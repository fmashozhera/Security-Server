2019-06-27 10:15:47.847 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:15:48.011 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:15:48.014 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:15:48.014 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:15:48.015 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:15:48.015 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:15:48.015 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:16:58.572 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:16:58.579 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:16:58.581 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:16:58.583 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:16:58.584 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:16:58.585 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:16:58.586 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:16:58.835 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 10:16:58.844 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 10:16:58.848 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 10:16:58.861 +02:00 [DBG] Start discovery request
2019-06-27 10:36:23.497 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:36:23.581 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:36:23.585 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:36:23.586 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:36:23.587 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:36:23.587 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:36:23.588 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:37:26.504 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:37:26.508 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:37:26.511 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:37:26.512 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:37:26.514 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:37:26.515 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:37:26.517 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:38:09.221 +02:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-06-27 10:47:46.333 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:47:46.385 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:47:46.390 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:47:46.391 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:47:46.391 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:47:46.392 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:47:46.393 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:49:26.936 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:49:26.942 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:49:26.945 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:49:26.948 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:49:26.949 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:49:26.951 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:49:26.952 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:49:26.999 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 10:49:27.009 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 10:49:27.011 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 10:49:27.022 +02:00 [DBG] Start discovery request
2019-06-27 10:49:27.557 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 10:49:27.566 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 10:49:27.577 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 10:49:27.590 +02:00 [DBG] Start key discovery request
2019-06-27 10:49:28.100 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 10:49:28.129 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 10:49:28.134 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 10:49:28.150 +02:00 [DBG] Start authorize request
2019-06-27 10:49:28.168 +02:00 [DBG] No user present in authorize request
2019-06-27 10:49:28.174 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:49:28.236 +02:00 [ERR] Unknown client or not enabled: SampleClient
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5598/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972221677967643.OTY0YTFlNzMtOWZmNC00YzA5LWE3ZTQtZDU1OWY1MjE2YjNkNzgyZjBhMjgtNzFkMi00M2E1LThkZGUtMTcxNjUyYTZhYjdl","state":"CfDJ8BST-4sCksNFlez27BzseIAlY0NT9TvSzhuna5vIkv0DwtM3b7kXd7inI-Wb3ijkarQ0fRZkI30SQB8jI2tPo3J3sIkejyvpa0qL7NiBLJuhMQ4Ib_2zFMvI1hVDxCdXY8oBqG6qrWSFvsN6XqvOXlopeJhFb92ez_B2VonD9alyPqnrdhWz-1_omIA5nntGuOWGRsQEnt7Q5eIRKD7F5-VJbk9RUUWZ6fFKhntOuRtnXaVsZruykA9TcPv_wbsr70VCPDuD_42l3dFICMNFypxjs0ZYUmfRipGLAfOofGmdoBfwS2MM1AIwX919BVrdog","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:49:28.303 +02:00 [ERR] Request validation failed
2019-06-27 10:49:28.305 +02:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5598/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972221677967643.OTY0YTFlNzMtOWZmNC00YzA5LWE3ZTQtZDU1OWY1MjE2YjNkNzgyZjBhMjgtNzFkMi00M2E1LThkZGUtMTcxNjUyYTZhYjdl","state":"CfDJ8BST-4sCksNFlez27BzseIAlY0NT9TvSzhuna5vIkv0DwtM3b7kXd7inI-Wb3ijkarQ0fRZkI30SQB8jI2tPo3J3sIkejyvpa0qL7NiBLJuhMQ4Ib_2zFMvI1hVDxCdXY8oBqG6qrWSFvsN6XqvOXlopeJhFb92ez_B2VonD9alyPqnrdhWz-1_omIA5nntGuOWGRsQEnt7Q5eIRKD7F5-VJbk9RUUWZ6fFKhntOuRtnXaVsZruykA9TcPv_wbsr70VCPDuD_42l3dFICMNFypxjs0ZYUmfRipGLAfOofGmdoBfwS2MM1AIwX919BVrdog","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:50:36.300 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:50:36.341 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:50:36.343 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:50:36.343 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:50:36.343 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:50:36.344 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:50:36.344 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:50:53.921 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:50:53.924 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:50:53.928 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:50:53.929 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:50:53.930 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:50:53.931 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:50:53.931 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:50:53.959 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 10:50:53.967 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 10:50:53.971 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 10:50:53.981 +02:00 [DBG] Start discovery request
2019-06-27 10:50:54.386 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 10:50:54.396 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 10:50:54.397 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 10:50:54.402 +02:00 [DBG] Start key discovery request
2019-06-27 10:50:54.546 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 10:50:54.563 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 10:50:54.572 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 10:50:54.585 +02:00 [DBG] Start authorize request
2019-06-27 10:50:54.601 +02:00 [DBG] No user present in authorize request
2019-06-27 10:50:54.605 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:50:54.622 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:50:54.647 +02:00 [ERR] Invalid redirect_uri: http://localhost:5598/signin-oidc
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5598/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972222544563707.MGE2NmM1MzctYTQ4Ni00YmQwLTk5M2UtYzRiMWI1ZDQ4ZTNhNDAxNzJkMjYtODA5Ni00NzA4LTgwZWEtMTE5MDA0ODc3NWEy","state":"CfDJ8BST-4sCksNFlez27BzseID2NC5MpWtTDZgwQt-EhT4sfYB_jZeJM1xWzdGbZDfxIYhBWRAAIt-CBNaJtnKeSyM2t_yishV2EIZiNiPCNjikjzTYy5yA9j-9x_JekOTSP8-SHq9VbHpv-OIxDfEiCZPZ0tEGbEVcUzE8oXLeSLSbZz78ZQfZp0YkJ9BhVATzrYc0vOM3lU2-e6VT8woC4-iG_HBPPMfHYqJ_rgTg4AjETQh-RUdWYqcbBjZzyYP2GuKHg_yiTqrmq_x-w8xE1Lu7OWvOxMkN85JETZ_3GpXueMwxx3OJ4YNXR_yZGQ-Mzg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:50:54.683 +02:00 [ERR] Request validation failed
2019-06-27 10:50:54.685 +02:00 [INF] {"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5598/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972222544563707.MGE2NmM1MzctYTQ4Ni00YmQwLTk5M2UtYzRiMWI1ZDQ4ZTNhNDAxNzJkMjYtODA5Ni00NzA4LTgwZWEtMTE5MDA0ODc3NWEy","state":"CfDJ8BST-4sCksNFlez27BzseID2NC5MpWtTDZgwQt-EhT4sfYB_jZeJM1xWzdGbZDfxIYhBWRAAIt-CBNaJtnKeSyM2t_yishV2EIZiNiPCNjikjzTYy5yA9j-9x_JekOTSP8-SHq9VbHpv-OIxDfEiCZPZ0tEGbEVcUzE8oXLeSLSbZz78ZQfZp0YkJ9BhVATzrYc0vOM3lU2-e6VT8woC4-iG_HBPPMfHYqJ_rgTg4AjETQh-RUdWYqcbBjZzyYP2GuKHg_yiTqrmq_x-w8xE1Lu7OWvOxMkN85JETZ_3GpXueMwxx3OJ4YNXR_yZGQ-Mzg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:52:46.920 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:52:46.956 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:52:46.958 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:52:46.958 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:52:46.959 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:52:46.959 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:52:46.959 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:53:07.482 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:53:07.487 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:53:07.492 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:53:07.493 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:53:07.494 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:53:07.495 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:53:07.496 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:53:07.544 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 10:53:07.558 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 10:53:07.566 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 10:53:07.578 +02:00 [DBG] Start discovery request
2019-06-27 10:53:08.065 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 10:53:08.082 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 10:53:08.085 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 10:53:08.095 +02:00 [DBG] Start key discovery request
2019-06-27 10:53:08.275 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 10:53:08.300 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 10:53:08.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 10:53:08.314 +02:00 [DBG] Start authorize request
2019-06-27 10:53:08.333 +02:00 [DBG] No user present in authorize request
2019-06-27 10:53:08.340 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:53:08.370 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:53:08.422 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:53:08.449 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDlJ8F_uqROk4-wgxCvCJMfmXw15JygcFqB8Ckg0uX1WOTLFf0zzc83V93PsINfg498XMfuyaDookljd0v0h-OxjrLeM0AMLb-VOpHSEjWSdiQB71Jmvd6a8MzFynW6_2mwZU040ALoYfyZYWFU21kGBff3WZvHtCWsFDCv9ppzkLX3pQ7badw6RHvshNvFMycVzQq1iJCn__i5G0ZQPANurR0Spc9QU7-V7zWZjGDU-yocqkjvzdAeVT4T7EJ-a-OkEJ_ibvHjuAKvhuCNWmlkQSu8FicGrQEE1Rgymab4_Q","UiLocales":null,"Nonce":"636972223881660033.NGM4YmUzNTgtYzNjOS00Njg4LTg5MGQtMzQyMTZlYTI2NWI0NzAwYWFhYjEtZWEyYS00NGUyLWI3YzYtNTdiY2Q5MzYwNjdh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972223881660033.NGM4YmUzNTgtYzNjOS00Njg4LTg5MGQtMzQyMTZlYTI2NWI0NzAwYWFhYjEtZWEyYS00NGUyLWI3YzYtNTdiY2Q5MzYwNjdh","state":"CfDJ8BST-4sCksNFlez27BzseIDlJ8F_uqROk4-wgxCvCJMfmXw15JygcFqB8Ckg0uX1WOTLFf0zzc83V93PsINfg498XMfuyaDookljd0v0h-OxjrLeM0AMLb-VOpHSEjWSdiQB71Jmvd6a8MzFynW6_2mwZU040ALoYfyZYWFU21kGBff3WZvHtCWsFDCv9ppzkLX3pQ7badw6RHvshNvFMycVzQq1iJCn__i5G0ZQPANurR0Spc9QU7-V7zWZjGDU-yocqkjvzdAeVT4T7EJ-a-OkEJ_ibvHjuAKvhuCNWmlkQSu8FicGrQEE1Rgymab4_Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:53:08.499 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 10:53:08.830 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:53:08.831 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:53:08.835 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:53:08.843 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:53:39.077 +02:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-27 10:53:39.135 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:53:39.135 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:53:39.138 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:53:39.140 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:53:39.141 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:53:39.142 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:53:39.144 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:56:35.063 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 10:56:35.098 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 10:56:35.100 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 10:56:35.101 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 10:56:35.101 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 10:56:35.101 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 10:56:35.102 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 10:57:06.032 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 10:57:06.036 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 10:57:06.037 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 10:57:06.039 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 10:57:06.040 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 10:57:06.040 +02:00 [DBG] Error Url: /home/error
2019-06-27 10:57:06.041 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 10:57:06.066 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 10:57:06.073 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 10:57:06.075 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 10:57:06.080 +02:00 [DBG] Start discovery request
2019-06-27 10:57:06.348 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 10:57:06.364 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 10:57:06.366 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 10:57:06.371 +02:00 [DBG] Start key discovery request
2019-06-27 10:57:06.481 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 10:57:06.497 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 10:57:06.502 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 10:57:06.512 +02:00 [DBG] Start authorize request
2019-06-27 10:57:06.545 +02:00 [DBG] No user present in authorize request
2019-06-27 10:57:06.559 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:57:06.596 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:57:06.656 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:57:06.687 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICHkKSYKfMtETTvrFa1e5Wxn-gZlSuyeUo1j3pxWMYvyF73MLB9WByqQkB1mkSWm8R6LA0apVSVj8AWae1IZ3pXK-gS1dfLDbM9iuT4qAal13Jvg-K5ZYdQZmSOMHhXRHojEh7pxoBo38yAk0PCFkh8r2xT2_Rb8beugG5uRLjLWKbND2ZMFlFfq8tkm-SZOaboaItfug5Vws1eB7MxWqq4TEfwfw3pEK5JQK58S6qNH3oapajJ-84OXe0_YYKZ1eGj_ht9bXAxVShNviyA5dd87fzEgZC3way5xOGpeffQtA","UiLocales":null,"Nonce":"636972226264082007.ZDU5MTFlYjctM2JiMi00MzU1LWEwMTYtYTZlYjFkMTUxOWJmNDNjZTY1OWUtYmQ4Yi00ZTA0LWE1NTYtNjVmZmU2ODU1MTZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972226264082007.ZDU5MTFlYjctM2JiMi00MzU1LWEwMTYtYTZlYjFkMTUxOWJmNDNjZTY1OWUtYmQ4Yi00ZTA0LWE1NTYtNjVmZmU2ODU1MTZi","state":"CfDJ8BST-4sCksNFlez27BzseICHkKSYKfMtETTvrFa1e5Wxn-gZlSuyeUo1j3pxWMYvyF73MLB9WByqQkB1mkSWm8R6LA0apVSVj8AWae1IZ3pXK-gS1dfLDbM9iuT4qAal13Jvg-K5ZYdQZmSOMHhXRHojEh7pxoBo38yAk0PCFkh8r2xT2_Rb8beugG5uRLjLWKbND2ZMFlFfq8tkm-SZOaboaItfug5Vws1eB7MxWqq4TEfwfw3pEK5JQK58S6qNH3oapajJ-84OXe0_YYKZ1eGj_ht9bXAxVShNviyA5dd87fzEgZC3way5xOGpeffQtA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 10:57:06.743 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 10:57:07.156 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 10:57:07.157 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:57:07.160 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 10:57:07.169 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 10:58:49.703 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 10:58:53.962 +02:00 [DBG] Augmenting SignInContext
2019-06-27 10:58:54.949 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AssertRequiredClaims(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 130
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AugmentPrincipal(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 90
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.SignInAsync(HttpContext context, String scheme, ClaimsPrincipal principal, AuthenticationProperties properties) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 78
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-27 11:00:28.210 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:00:28.212 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:00:28.216 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:00:28.219 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:00:30.231 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 11:00:48.900 +02:00 [DBG] Augmenting SignInContext
2019-06-27 11:00:49.876 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: sub claim is missing
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AssertRequiredClaims(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 130
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.AugmentPrincipal(ClaimsPrincipal principal) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 90
   at IdentityServer4.Hosting.IdentityServerAuthenticationService.SignInAsync(HttpContext context, String scheme, ClaimsPrincipal principal, AuthenticationProperties properties) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerAuthenticationService.cs:line 78
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-27 11:05:21.916 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 11:05:21.953 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 11:05:21.956 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 11:05:21.956 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 11:05:21.957 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 11:05:21.957 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 11:05:21.957 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 11:06:03.297 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 11:06:03.303 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 11:06:03.311 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 11:06:03.314 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 11:06:03.315 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 11:06:03.317 +02:00 [DBG] Error Url: /home/error
2019-06-27 11:06:03.318 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 11:06:03.365 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:06:03.375 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:06:03.381 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:06:03.387 +02:00 [DBG] Start discovery request
2019-06-27 11:06:03.831 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 11:06:03.851 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 11:06:03.857 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 11:06:03.865 +02:00 [DBG] Start key discovery request
2019-06-27 11:06:04.197 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 11:06:04.218 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 11:06:04.221 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 11:06:04.236 +02:00 [DBG] Start authorize request
2019-06-27 11:06:04.259 +02:00 [DBG] No user present in authorize request
2019-06-27 11:06:04.267 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:04.298 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:04.368 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:04.418 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","UiLocales":null,"Nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","state":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:06:04.481 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 11:06:04.964 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:04.966 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:04.970 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:04.979 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:14.838 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 11:06:18.255 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 11:06:18.374 +02:00 [DBG] Augmenting SignInContext
2019-06-27 11:06:18.377 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 11:06:18.383 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 11:06:18.400 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 11:06:18.403 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:18.405 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:18.415 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:18.420 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:18.436 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 11:06:18.444 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 11:06:18.447 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 11:06:18.455 +02:00 [DBG] Start authorize callback request
2019-06-27 11:06:18.464 +02:00 [DBG] User in authorize request: a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3
2019-06-27 11:06:18.467 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:18.470 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:18.477 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:18.481 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","UiLocales":null,"Nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"efa3952368c4086a0484827e75565031","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","state":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:06:18.518 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 11:06:18.541 +02:00 [DBG] user_consent grant with value: SampleClient|a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3 not found in store.
2019-06-27 11:06:18.546 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-06-27 11:06:18.548 +02:00 [INF] Showing consent: User has not yet consented
2019-06-27 11:06:18.585 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:18.586 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:18.591 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:18.594 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:23.519 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-27 11:06:23.593 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:23.595 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:23.599 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:23.619 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:23.628 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 11:06:23.630 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 11:06:23.636 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 11:06:23.639 +02:00 [DBG] Start authorize callback request
2019-06-27 11:06:23.645 +02:00 [DBG] User in authorize request: a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3
2019-06-27 11:06:23.647 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:06:23.649 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:06:23.654 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:06:23.658 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","UiLocales":null,"Nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"efa3952368c4086a0484827e75565031","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","state":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:06:23.687 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 11:06:23.692 +02:00 [DBG] user_consent grant with value: SampleClient|a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3 not found in store.
2019-06-27 11:06:23.695 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-06-27 11:06:23.706 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-06-27 11:06:23.710 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-06-27 11:06:23.719 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3
2019-06-27 11:06:23.748 +02:00 [DBG] Creating Implicit Flow response.
2019-06-27 11:06:23.763 +02:00 [DBG] Getting claims for identity token for subject: a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3 and client: SampleClient
2019-06-27 11:06:23.777 +02:00 [DBG] Get profile called for subject a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-06-27 11:06:23.793 +02:00 [DBG] Issued claims: ["name"]
2019-06-27 11:06:23.996 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAyTGNXNHkRATvlBAGnmPn85mQ-gjFzOdcRzIbdTn6PsNau8tcLdeSD5GheRTB_hL5b503U6T48hPkJhPx1er_B89ffDUds8fgJV2fMIHSnmvuVEEOWUeEawqerwnfvlKqsraaRXppHy9Mi5lzYS72mIM2Ar8J_CF-pZsPSFTuf6pXzhj8diJ7qXcIzPNXaqsyPuoopYmaSOoKKCEthaEvlOXZChoZvWFWJwCpCZyDR8rPSt0XhgYovMA_PcSebahhM4upqSb21VkpFdLqnBV0zXN9TPfwO9xZD3I5vRjVClA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-27 11:06:24.026 +02:00 [DBG] Augmenting SignInContext
2019-06-27 11:06:24.028 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 11:13:38.069 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 11:13:38.131 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 11:13:38.134 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 11:13:38.135 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 11:13:38.136 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 11:13:38.138 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 11:13:38.139 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 11:14:53.093 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 11:14:53.101 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 11:14:53.107 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 11:14:53.109 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 11:14:53.112 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 11:14:53.116 +02:00 [DBG] Error Url: /home/error
2019-06-27 11:14:53.118 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 11:14:53.151 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:14:53.163 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:14:53.166 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:14:53.178 +02:00 [DBG] Start discovery request
2019-06-27 11:14:53.653 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 11:14:53.661 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 11:14:53.663 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 11:14:53.677 +02:00 [DBG] Start key discovery request
2019-06-27 11:14:53.802 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 11:14:53.818 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 11:14:53.823 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 11:14:53.835 +02:00 [DBG] Start authorize request
2019-06-27 11:14:53.855 +02:00 [DBG] No user present in authorize request
2019-06-27 11:14:53.863 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:14:53.896 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:14:53.955 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:14:53.995 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICn3j0D55baBFynen82NLgNUIt5oCTG_dbCRRa_DXYivw5g9LvNm5o522tAtqdW1VH36ykoMBn8HvXDspTcNToOLVvN2yNcuiBcgX_Euz-2AgIkKEq-5WY1t_3Gbjtcj0Mw-IJ0RaXydSyZTMIgmiPKmCe1AJKldPRZO65RFfq3KZVOO3HeXMzB3zhxJQ8VI1YWdkEl5mQZR1fHi8qPiANjBet3FsDmgbfxnbGBjRGDQoQAQTNNZqoh-sW6KQZFXB7u_7gNbCju4cTLEjr2NiHzhY6WSSxwNgGfLt2S3kZJ2Q","UiLocales":null,"Nonce":"636972236937307173.ZDE1MjdkMGMtZDlhYi00Mzc2LTkwNzUtYWY1ZjE2NWZkZDBiYzU0Y2MwMDQtOTc1Yi00NjdmLTk2Y2QtYmI4MWMzY2Q0Zjcx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972236937307173.ZDE1MjdkMGMtZDlhYi00Mzc2LTkwNzUtYWY1ZjE2NWZkZDBiYzU0Y2MwMDQtOTc1Yi00NjdmLTk2Y2QtYmI4MWMzY2Q0Zjcx","state":"CfDJ8BST-4sCksNFlez27BzseICn3j0D55baBFynen82NLgNUIt5oCTG_dbCRRa_DXYivw5g9LvNm5o522tAtqdW1VH36ykoMBn8HvXDspTcNToOLVvN2yNcuiBcgX_Euz-2AgIkKEq-5WY1t_3Gbjtcj0Mw-IJ0RaXydSyZTMIgmiPKmCe1AJKldPRZO65RFfq3KZVOO3HeXMzB3zhxJQ8VI1YWdkEl5mQZR1fHi8qPiANjBet3FsDmgbfxnbGBjRGDQoQAQTNNZqoh-sW6KQZFXB7u_7gNbCju4cTLEjr2NiHzhY6WSSxwNgGfLt2S3kZJ2Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:14:54.064 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 11:14:54.492 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:14:54.494 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:14:54.499 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:14:54.510 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:15:02.281 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 11:16:55.416 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 11:16:55.514 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 11:16:55.519 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 11:16:55.520 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 11:16:55.521 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 11:16:55.522 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 11:16:55.523 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 11:17:23.747 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 11:17:23.758 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 11:17:23.770 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 11:17:23.772 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 11:17:23.774 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 11:17:23.779 +02:00 [DBG] Error Url: /home/error
2019-06-27 11:17:23.781 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 11:17:23.845 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:17:23.861 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:17:23.866 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:17:23.877 +02:00 [DBG] Start discovery request
2019-06-27 11:17:24.374 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 11:17:24.394 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 11:17:24.407 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 11:17:24.421 +02:00 [DBG] Start key discovery request
2019-06-27 11:17:24.570 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 11:17:24.583 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 11:17:24.587 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 11:17:24.597 +02:00 [DBG] Start authorize request
2019-06-27 11:17:24.621 +02:00 [DBG] No user present in authorize request
2019-06-27 11:17:24.629 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:17:24.671 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:17:24.745 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:17:24.800 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAO9AvJ-wcCUtkhjmKRY9ItRb04Lo7q6DUF38h1HPKahlNBAgSPSQlrzvY5HZ_LzzEuqfsvTPs0I8TGgGHZaZ0sm63kc4Q8Nr4zlVmek3MktqQsYCwUPVdmxPpJ7z1C3qDH9wQdpSqkl7uGnX6Maka6_EPTYdr642xrR8KvE2KjTUr_xzGZQ3nNc0HPlFK7w_C6Y8w5PnVrfFdmykmFxFLmwjJsG6oKNVCp8ju4SUfXF75_JONZQnX2en1-jl1HihM8HWJrbgMHf7OjEMq0RId9WnYEybhgqGn2rUjwc1slqw","UiLocales":null,"Nonce":"636972238444888222.ZTYwZGFmNzAtNTA4NS00MjkzLTlkMjEtZGQ4NTEyYThjZmNiM2M3OWVmMzctOTRjZC00MTk2LTk0M2YtN2RjNzE2M2JiMTE4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972238444888222.ZTYwZGFmNzAtNTA4NS00MjkzLTlkMjEtZGQ4NTEyYThjZmNiM2M3OWVmMzctOTRjZC00MTk2LTk0M2YtN2RjNzE2M2JiMTE4","state":"CfDJ8BST-4sCksNFlez27BzseIAO9AvJ-wcCUtkhjmKRY9ItRb04Lo7q6DUF38h1HPKahlNBAgSPSQlrzvY5HZ_LzzEuqfsvTPs0I8TGgGHZaZ0sm63kc4Q8Nr4zlVmek3MktqQsYCwUPVdmxPpJ7z1C3qDH9wQdpSqkl7uGnX6Maka6_EPTYdr642xrR8KvE2KjTUr_xzGZQ3nNc0HPlFK7w_C6Y8w5PnVrfFdmykmFxFLmwjJsG6oKNVCp8ju4SUfXF75_JONZQnX2en1-jl1HihM8HWJrbgMHf7OjEMq0RId9WnYEybhgqGn2rUjwc1slqw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:17:24.873 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 11:17:25.414 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:17:25.419 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:17:25.424 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:17:25.436 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:17:43.408 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:17:43.454 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:17:43.486 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:17:43.498 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:18:29.753 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:18:29.764 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:18:29.779 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:18:29.786 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:18:55.491 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:18:55.493 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:18:55.500 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:18:55.504 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:20:04.285 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:20:04.292 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:20:04.298 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:20:04.307 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:20:44.036 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 11:20:44.053 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 11:20:44.060 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 11:20:44.069 +02:00 [DBG] Start authorize request
2019-06-27 11:20:44.072 +02:00 [DBG] No user present in authorize request
2019-06-27 11:20:44.077 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:20:44.081 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:20:44.085 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:20:44.094 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAy-UM7Pi3elutQ6ewNIzxPphhNdjsJrt2vds-wtrxd5r452jUxXgLH_73o_49y6IBOjLIwhMzSO8DQf6GHn6zMxMn4rmktOW2w-NZhTN-lGHPIwK45c5_1P24b2C15QySMuQOArBzYdAnnUU2PODuc54VN6OG7MBxCXBS_Lh596D_wUqPJpjqNd5RBJjQxaK4yYWNbHqqXEmMxxJrGWMJEVw4oWzoJvTu0RmLyGI-OfhyoSEyk2-Urnq9-Mv3hjL5S2XZ8xqaHvW9CO1wjqG34hpU0AnCI4En2d3OOsJEc_w","UiLocales":null,"Nonce":"636972240440110411.MGViZjY5NTEtODlmMS00MmU5LTgxZjUtODdjODA0NDBlNjZjYTVhNWE3YTEtMWViNS00N2YzLTllZjUtMTdmNTA4ZTYxNDk0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972240440110411.MGViZjY5NTEtODlmMS00MmU5LTgxZjUtODdjODA0NDBlNjZjYTVhNWE3YTEtMWViNS00N2YzLTllZjUtMTdmNTA4ZTYxNDk0","state":"CfDJ8BST-4sCksNFlez27BzseIAy-UM7Pi3elutQ6ewNIzxPphhNdjsJrt2vds-wtrxd5r452jUxXgLH_73o_49y6IBOjLIwhMzSO8DQf6GHn6zMxMn4rmktOW2w-NZhTN-lGHPIwK45c5_1P24b2C15QySMuQOArBzYdAnnUU2PODuc54VN6OG7MBxCXBS_Lh596D_wUqPJpjqNd5RBJjQxaK4yYWNbHqqXEmMxxJrGWMJEVw4oWzoJvTu0RmLyGI-OfhyoSEyk2-Urnq9-Mv3hjL5S2XZ8xqaHvW9CO1wjqG34hpU0AnCI4En2d3OOsJEc_w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:20:44.121 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 11:20:44.134 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:20:44.134 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:20:44.140 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:20:44.142 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:21:48.040 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:21:48.046 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:21:48.062 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:21:48.068 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:30:06.452 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:30:06.462 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:30:06.470 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:30:06.475 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:32:04.138 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:32:04.139 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:32:04.147 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:32:04.160 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:32:28.036 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 11:32:46.619 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:32:46.622 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:32:46.646 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:32:46.653 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:42:17.655 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:42:17.657 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:42:17.664 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:42:17.670 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:45:15.260 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:45:15.271 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:45:15.279 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:45:15.288 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:48:55.179 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:48:55.180 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:48:55.190 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:48:55.195 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:49:01.536 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:49:01.537 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:49:01.552 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:49:01.556 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:49:05.399 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:49:05.400 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:49:05.414 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:49:05.417 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:49:38.269 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 11:49:38.344 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 11:49:38.351 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 11:49:38.351 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 11:49:38.353 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 11:49:38.354 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 11:49:38.355 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 11:50:23.797 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 11:50:23.807 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 11:50:23.815 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 11:50:23.816 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 11:50:23.817 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 11:50:23.819 +02:00 [DBG] Error Url: /home/error
2019-06-27 11:50:23.822 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 11:50:23.854 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 11:50:23.863 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 11:50:23.866 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 11:50:23.875 +02:00 [DBG] Start discovery request
2019-06-27 11:50:24.195 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 11:50:24.210 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 11:50:24.216 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 11:50:24.223 +02:00 [DBG] Start key discovery request
2019-06-27 11:50:24.319 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 11:50:24.328 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 11:50:24.332 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 11:50:24.343 +02:00 [DBG] Start authorize request
2019-06-27 11:50:24.367 +02:00 [DBG] No user present in authorize request
2019-06-27 11:50:24.374 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:50:24.401 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:50:24.434 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:50:24.458 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICa_wXIV9ke_DCaCCDOmeCZL5goWiI4hcBgAD_z3Ne7Kem4oAioMUwivNaKqFjCT7EebcUxtoi2fnR8pGitmKMSMCnsOKpR0PCeGpfSISzd1bCgxd9xfxi21aXZI-f02CTlfCDu9MlMtykBb-05QiKpw4pVOEKHytMC4cpBA1jTAkkw-kOsz9ACRWzGT2C__6oEVcX_VRYf1Kh5M7CColWNT84dcf1K6crxQelNSK4otw0WeEl6yJFg05Kh-y8oxvluJ8HsESW0iBhkY2JZ5SplfGc-QDo-oAxQKCVTYw7KLA","UiLocales":null,"Nonce":"636972258242632820.MWIyY2QwM2QtYTJhMS00NDkxLTk5ZDItNmJkNzllNTMyNGVhYjBkNTk5ZTMtYWFmOS00NWViLTlkMzItMThmNzA0M2JlNWIx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972258242632820.MWIyY2QwM2QtYTJhMS00NDkxLTk5ZDItNmJkNzllNTMyNGVhYjBkNTk5ZTMtYWFmOS00NWViLTlkMzItMThmNzA0M2JlNWIx","state":"CfDJ8BST-4sCksNFlez27BzseICa_wXIV9ke_DCaCCDOmeCZL5goWiI4hcBgAD_z3Ne7Kem4oAioMUwivNaKqFjCT7EebcUxtoi2fnR8pGitmKMSMCnsOKpR0PCeGpfSISzd1bCgxd9xfxi21aXZI-f02CTlfCDu9MlMtykBb-05QiKpw4pVOEKHytMC4cpBA1jTAkkw-kOsz9ACRWzGT2C__6oEVcX_VRYf1Kh5M7CColWNT84dcf1K6crxQelNSK4otw0WeEl6yJFg05Kh-y8oxvluJ8HsESW0iBhkY2JZ5SplfGc-QDo-oAxQKCVTYw7KLA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 11:50:24.507 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 11:50:24.787 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:50:24.789 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:50:24.794 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:50:24.804 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:50:27.783 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:50:27.785 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:50:27.792 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:50:27.801 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:51:31.494 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:51:31.496 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:51:31.508 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:51:31.513 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:51:34.884 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:51:34.885 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:51:34.892 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:51:34.898 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:14.637 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:52:14.638 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:14.645 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:52:14.650 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:19.462 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:52:19.463 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:19.470 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:52:19.474 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:54.547 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:52:54.548 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:52:54.556 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:52:54.560 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:53:53.051 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 11:53:53.052 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:53:53.061 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 11:53:53.064 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 11:55:47.436 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 11:55:47.494 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 11:55:47.498 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 11:55:47.499 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 11:55:47.500 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 11:55:47.502 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 11:55:47.503 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 12:04:15.311 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 12:04:15.402 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 12:04:15.412 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 12:04:15.413 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 12:04:15.416 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 12:04:15.422 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 12:04:15.423 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 12:06:12.005 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 12:06:12.008 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 12:06:12.009 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 12:06:12.009 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 12:06:12.010 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 12:06:12.010 +02:00 [DBG] Error Url: /home/error
2019-06-27 12:06:12.011 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 12:06:12.032 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 12:06:12.041 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 12:06:12.043 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 12:06:12.054 +02:00 [DBG] Start discovery request
2019-06-27 12:06:12.305 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 12:06:12.326 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 12:06:12.331 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 12:06:12.348 +02:00 [DBG] Start key discovery request
2019-06-27 12:06:12.459 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-06-27 12:06:12.466 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-06-27 12:06:12.469 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-06-27 12:06:12.492 +02:00 [DBG] Processing signout request for a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3
2019-06-27 12:06:12.502 +02:00 [DBG] Start end session request validation
2019-06-27 12:06:12.512 +02:00 [DBG] Start identity token validation
2019-06-27 12:06:12.634 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:12.689 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-06-27 12:06:12.899 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-06-27 12:06:12.901 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-27 12:06:12.933 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561626383,"exp":1561626683,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636972231639232842.Mzk1ZjI3YjQtOWFmMC00ZGU0LWEwMDMtMDI0YjllNGFlZmZjMzVkNDA3MjUtYWU0Ny00MDA2LTgwMTktMzRjYjZjYmM4ZTEx","iat":1561626383,"sid":"efa3952368c4086a0484827e75565031","sub":"a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3","auth_time":1561626378,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-06-27 12:06:12.990 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"a70ff80f53280ada8fb41ea69f1c8ce82fc879e0cf9033851cd0e5dc7c212df3","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIA84bQHToTBcJpedl8DBgvY_39dN50OhNyzowzruKPsPDZR5_w4SY8Z1_WTTzCfePjJTBPtsO3BTOVLqHCscENH72lHJjQjOyS-WTf7u__htyDx1UP-yet6XXu8Mhww8Rgg60hqZ6nxAh4BLhkhMBAs","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNkZjU0NjU4M2UyNjE5MzY3YzU2Njg1MDI3YTFkNTQ5IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NjE2MjYzODMsImV4cCI6MTU2MTYyNjY4MywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiU2FtcGxlQ2xpZW50Iiwibm9uY2UiOiI2MzY5NzIyMzE2MzkyMzI4NDIuTXprMVpqSTNZalF0T1dGbU1DMDBaR1UwTFdFd01ETXRNREkwWWpsbE5HRmxabVpqTXpWa05EQTNNalV0WVdVME55MDBNREEyTFRnd01Ua3RNelJqWWpaalltTTRaVEV4IiwiaWF0IjoxNTYxNjI2MzgzLCJzaWQiOiJlZmEzOTUyMzY4YzQwODZhMDQ4NDgyN2U3NTU2NTAzMSIsInN1YiI6ImE3MGZmODBmNTMyODBhZGE4ZmI0MWVhNjlmMWM4Y2U4MmZjODc5ZTBjZjkwMzM4NTFjZDBlNWRjN2MyMTJkZjMiLCJhdXRoX3RpbWUiOjE1NjE2MjYzNzgsImlkcCI6Ik1pY3Jvc29mdCIsIm5hbWUiOiJGdW5nYWkgTWFzaG96aGVyYSIsImFtciI6WyJleHRlcm5hbCJdfQ.aJpCGp4L6gzzHovSXwLhYoaMzI6uKmmTAoIBwWSCD0hjtHOAOIEXpAr0f6XXz7p2K2_PiHtOPC2zV1Ht1Co-y4FCjIJAdn7VKKEILwgISr6wn1jyqxzYGoslJaO8jutosq343_FN3-eoY2NOgSjp9hhFOM8DJmkPjf0g6xkj7jr4INWXrsnS_w2UrreZMR-IYji4bYnCkq2Ukqi5kF-0NgKMW6tkvU8QmiRnxvgzNAKA045t5pb25yQAI3qltSPVupA1ATeETr6drWjy-O7r1NBTcaJm_Fm7En0vLYUyhDwsxzHecde5GKcxpIb9tghXoQt9Szpfj1um6V7tU_6pUA","state":"CfDJ8BST-4sCksNFlez27BzseIA84bQHToTBcJpedl8DBgvY_39dN50OhNyzowzruKPsPDZR5_w4SY8Z1_WTTzCfePjJTBPtsO3BTOVLqHCscENH72lHJjQjOyS-WTf7u__htyDx1UP-yet6XXu8Mhww8Rgg60hqZ6nxAh4BLhkhMBAs","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-06-27 12:06:13.032 +02:00 [DBG] Success validating end session request from SampleClient
2019-06-27 12:06:13.547 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-06-27 12:06:13.866 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 12:06:13.889 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 12:06:13.895 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 12:06:13.925 +02:00 [DBG] Processing signout callback request
2019-06-27 12:06:13.968 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:14.042 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 12:06:14.055 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 12:06:14.066 +02:00 [INF] Successful signout callback.
2019-06-27 12:06:14.069 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 12:06:14.075 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 12:06:27.022 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 12:06:27.033 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 12:06:27.040 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 12:06:27.046 +02:00 [DBG] Start authorize request
2019-06-27 12:06:27.056 +02:00 [DBG] No user present in authorize request
2019-06-27 12:06:27.060 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 12:06:27.067 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:27.099 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 12:06:27.115 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDTuuaqdgu9koz5WF_wfWmXvmerebN5wgWL6YKGgGjigMyPFM7OupdLrTBF_uEesjI6mJxAhKL3CMk_u84DO9EaIV2KK8UjApnsPZ3CRrHzj8uYRPlNplomAM6ByX3AIVcoskiCcsR0iGOwfj_hIpdaD0693DlAFEnI5JdFYgPV1k4wASWZ1SpVbm3XcyWIBI70WwzrJLFgb8AQn1C220tE5sG5jtSZ_HHnNTkwQ5wEhGN5wN5j8sDaMzv-XtH6QX8g4F3W1BuUtVxn-4poR700zxYs4CA2SvhzB4d0OHfLqQ","UiLocales":null,"Nonce":"636972267870069644.ZjA5ZWNlZDEtYzBkYi00ZDNjLWFjYTUtY2I0Yzk3NzA1MGFkYTkxOGZkNTYtZTY5MS00MTEzLTg1YTYtNWFlMmY0NTY4YTIz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972267870069644.ZjA5ZWNlZDEtYzBkYi00ZDNjLWFjYTUtY2I0Yzk3NzA1MGFkYTkxOGZkNTYtZTY5MS00MTEzLTg1YTYtNWFlMmY0NTY4YTIz","state":"CfDJ8BST-4sCksNFlez27BzseIDTuuaqdgu9koz5WF_wfWmXvmerebN5wgWL6YKGgGjigMyPFM7OupdLrTBF_uEesjI6mJxAhKL3CMk_u84DO9EaIV2KK8UjApnsPZ3CRrHzj8uYRPlNplomAM6ByX3AIVcoskiCcsR0iGOwfj_hIpdaD0693DlAFEnI5JdFYgPV1k4wASWZ1SpVbm3XcyWIBI70WwzrJLFgb8AQn1C220tE5sG5jtSZ_HHnNTkwQ5wEhGN5wN5j8sDaMzv-XtH6QX8g4F3W1BuUtVxn-4poR700zxYs4CA2SvhzB4d0OHfLqQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 12:06:27.162 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 12:06:27.191 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 12:06:27.192 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:27.198 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 12:06:27.206 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:42.437 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 12:06:42.488 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:06:42.544 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 12:06:42.557 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:08:34.865 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 12:08:34.867 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:08:34.878 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 12:08:34.887 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:09:18.411 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 12:09:18.413 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:09:18.421 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 12:09:18.426 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 12:31:54.126 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 12:31:54.326 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 12:31:54.329 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 12:31:54.330 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 12:31:54.330 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 12:31:54.330 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 12:31:54.331 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 12:36:39.292 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 12:36:39.399 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 12:36:39.413 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 12:36:39.415 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 12:36:39.418 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 12:36:39.424 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 12:36:39.427 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 12:45:40.357 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 12:45:40.391 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 12:45:40.393 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 12:45:40.394 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 12:45:40.395 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 12:45:40.396 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 12:45:40.396 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 14:17:28.708 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 14:17:28.741 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 14:17:28.743 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 14:17:28.744 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 14:17:28.746 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 14:17:28.747 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 14:17:28.747 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 14:45:52.724 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 14:45:52.885 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 14:45:52.888 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 14:45:52.889 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 14:45:52.889 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 14:45:52.890 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 14:45:52.890 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 14:46:13.960 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 14:46:13.963 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 14:46:13.965 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 14:46:13.967 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 14:46:13.968 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 14:46:13.969 +02:00 [DBG] Error Url: /home/error
2019-06-27 14:46:13.970 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 14:46:13.993 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 14:46:13.998 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 14:46:14.000 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 14:46:14.006 +02:00 [DBG] Start discovery request
2019-06-27 14:46:14.949 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 14:46:14.961 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 14:46:14.964 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 14:46:14.968 +02:00 [DBG] Start key discovery request
2019-06-27 14:46:15.217 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 14:46:15.227 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 14:46:15.229 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 14:46:15.234 +02:00 [DBG] Start authorize request
2019-06-27 14:46:15.244 +02:00 [DBG] No user present in authorize request
2019-06-27 14:46:15.274 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:46:15.319 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:46:15.367 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:46:15.399 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIB5rUyrHOhZ8_BNgjWpoX-SMZiB-oJyXmgYaciKxF1lakwzg9XfxSWF_bFomr-Cmm0P9oQCnvRT_45j2u7r4jY3DxLbGVVtOWZApTOlT13HpaZT2LiPfUm8mQHzx9jGf1Job5PNxugX_azVrU8agput9A1hhG_KJdYD6IzEPBhRhUDaOyHtxSGBKWioWTheG0yS4ZUmiOdKxIIkpsU0sYXOcmQ7T-VwwcneKD5FaqQF539FO-PcBp6_RE-Kaj81UFj9nQ8pq3V0xZHPkz5Trm-aMIFQqx5aNapMtvG5sDj7XQ","UiLocales":null,"Nonce":"636972363751400558.NzA2MGUyMzQtNzI1MS00YjA4LTk2ZDAtZjdjNTI4OTE3ZmMyMDI1NTU2Y2YtNzM4Ni00M2Y2LThlZWQtYmExOWE2ZGQxNzE3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972363751400558.NzA2MGUyMzQtNzI1MS00YjA4LTk2ZDAtZjdjNTI4OTE3ZmMyMDI1NTU2Y2YtNzM4Ni00M2Y2LThlZWQtYmExOWE2ZGQxNzE3","state":"CfDJ8BST-4sCksNFlez27BzseIB5rUyrHOhZ8_BNgjWpoX-SMZiB-oJyXmgYaciKxF1lakwzg9XfxSWF_bFomr-Cmm0P9oQCnvRT_45j2u7r4jY3DxLbGVVtOWZApTOlT13HpaZT2LiPfUm8mQHzx9jGf1Job5PNxugX_azVrU8agput9A1hhG_KJdYD6IzEPBhRhUDaOyHtxSGBKWioWTheG0yS4ZUmiOdKxIIkpsU0sYXOcmQ7T-VwwcneKD5FaqQF539FO-PcBp6_RE-Kaj81UFj9nQ8pq3V0xZHPkz5Trm-aMIFQqx5aNapMtvG5sDj7XQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:46:15.444 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 14:46:16.324 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:46:16.325 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:46:16.331 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:46:16.338 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:47:14.416 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 14:48:38.058 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 14:48:38.129 +02:00 [DBG] Augmenting SignInContext
2019-06-27 14:48:38.132 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 14:48:38.138 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 14:48:38.152 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 14:48:38.162 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:48:38.167 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:48:38.170 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:48:38.181 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:48:38.512 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.fLRo26ESV9rt86HwQdO2xxZIdZFOHziX027qwF8JqWE' cookie not found.
2019-06-27 14:48:38.517 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-06-27 14:48:39.665 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-27 14:55:48.062 +02:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2019-06-27 14:55:48.101 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-27 14:55:48.104 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-27 14:55:48.105 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-27 14:55:48.105 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-27 14:55:48.106 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-27 14:55:48.107 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-27 14:56:40.167 +02:00 [DBG] Login Url: /Account/Login
2019-06-27 14:56:40.169 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-27 14:56:40.170 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-27 14:56:40.170 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-27 14:56:40.171 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-27 14:56:40.171 +02:00 [DBG] Error Url: /home/error
2019-06-27 14:56:40.171 +02:00 [DBG] Error Id Parameter: errorId
2019-06-27 14:56:40.192 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-27 14:56:40.199 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-27 14:56:40.201 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-27 14:56:40.206 +02:00 [DBG] Start discovery request
2019-06-27 14:56:40.434 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-27 14:56:40.438 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-27 14:56:40.442 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-27 14:56:40.448 +02:00 [DBG] Start key discovery request
2019-06-27 14:56:40.555 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 14:56:40.565 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 14:56:40.570 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 14:56:40.580 +02:00 [DBG] Start authorize request
2019-06-27 14:56:40.591 +02:00 [DBG] No user present in authorize request
2019-06-27 14:56:40.594 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:56:40.611 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:56:40.648 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:56:40.670 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","UiLocales":null,"Nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","state":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:56:40.726 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 14:56:41.111 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:56:41.112 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:56:41.118 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:56:41.123 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:00.654 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 14:57:04.776 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 14:57:04.842 +02:00 [DBG] Augmenting SignInContext
2019-06-27 14:57:04.845 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 14:57:04.849 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 14:57:04.857 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 14:57:04.858 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:04.861 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:04.864 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:04.869 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:04.876 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 14:57:04.882 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 14:57:04.883 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 14:57:04.889 +02:00 [DBG] Start authorize callback request
2019-06-27 14:57:04.894 +02:00 [DBG] User in authorize request: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:04.895 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:04.896 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:04.898 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:04.902 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","UiLocales":null,"Nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"31d2c14aeb94371b1ae5149529e4af02","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","state":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:57:04.919 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 14:57:04.932 +02:00 [DBG] user_consent grant with value: SampleClient|a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 not found in store.
2019-06-27 14:57:04.934 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-06-27 14:57:04.937 +02:00 [INF] Showing consent: User has not yet consented
2019-06-27 14:57:04.960 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:04.961 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:04.965 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:04.967 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:08.405 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-06-27 14:57:08.490 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:08.491 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:08.497 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:08.532 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:08.539 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 14:57:08.541 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 14:57:08.544 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 14:57:08.549 +02:00 [DBG] Start authorize callback request
2019-06-27 14:57:08.561 +02:00 [DBG] User in authorize request: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:08.563 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:08.564 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:08.569 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:08.571 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","UiLocales":null,"Nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"31d2c14aeb94371b1ae5149529e4af02","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","state":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:57:08.589 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 14:57:08.592 +02:00 [DBG] user_consent grant with value: SampleClient|a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 not found in store.
2019-06-27 14:57:08.594 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-06-27 14:57:08.599 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-06-27 14:57:08.603 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-06-27 14:57:08.608 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:08.626 +02:00 [DBG] Creating Implicit Flow response.
2019-06-27 14:57:08.632 +02:00 [DBG] Getting claims for identity token for subject: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 and client: SampleClient
2019-06-27 14:57:08.638 +02:00 [DBG] Get profile called for subject a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-06-27 14:57:08.647 +02:00 [DBG] Issued claims: ["name"]
2019-06-27 14:57:08.831 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICfc1PVnqgm0Oz4qSluSpwD_BIj9iGarGEoIEIiJ8KsCZcXSpKZRPrNn7cddBjawEczMm2zH5O3yp0xZri64aPZwFbIJ87Mygam-lJBXK_h_a6-uTAyhk9dAkZYLcH-L0mtNz53sZgc_Fk8ZsHuU5gAmEVTWqoYCQ5VRVFHTmoZGy-bj9_rOoNYvAWQKsrQxkVixeMsM_rriFVpIqhK_M5qUCeIjLfjbhQaka1RX_BEbYeP9pcOLAaHYHTHEqCryz2fNVN91_Te4H8g4P2kpeicDo1Fn77LOOliXRDJf6Mt9g","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-27 14:57:08.852 +02:00 [DBG] Augmenting SignInContext
2019-06-27 14:57:08.853 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 14:57:15.670 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-06-27 14:57:15.675 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-06-27 14:57:15.676 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-06-27 14:57:15.683 +02:00 [DBG] Processing signout request for a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:15.690 +02:00 [DBG] Start end session request validation
2019-06-27 14:57:15.695 +02:00 [DBG] Start identity token validation
2019-06-27 14:57:15.726 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:15.729 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-06-27 14:57:15.770 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-06-27 14:57:15.770 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-27 14:57:15.775 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561640228,"exp":1561640528,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636972370004809388.MjFhNzNmNWQtMGU3Mi00NTdlLWE2NGItNmI0Zjc1MDdmYjA3YWIyODYxOTUtMjM2NC00YTBlLWE0N2UtZDNlZDM0Y2VmNjc5","iat":1561640228,"sid":"31d2c14aeb94371b1ae5149529e4af02","sub":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","auth_time":1561640224,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-06-27 14:57:15.793 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAvS7pzPKoNduL63iBtYkFmIdIX0W77wBf7EbOXd_q5QssWr7ADC4yJcN4_rrxaUO4CShKSpAd-ROCybT1zgcuM03F8c8XRrMcnQC4Ro3tlKoToTg8qR3xN-926csCMJm98iH8ttR-91Ww9VPOD44mu","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNkZjU0NjU4M2UyNjE5MzY3YzU2Njg1MDI3YTFkNTQ5IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NjE2NDAyMjgsImV4cCI6MTU2MTY0MDUyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiU2FtcGxlQ2xpZW50Iiwibm9uY2UiOiI2MzY5NzIzNzAwMDQ4MDkzODguTWpGaE56Tm1OV1F0TUdVM01pMDBOVGRsTFdFMk5HSXRObUkwWmpjMU1EZG1ZakEzWVdJeU9EWXhPVFV0TWpNMk5DMDBZVEJsTFdFME4yVXRaRE5sWkRNMFkyVm1OamM1IiwiaWF0IjoxNTYxNjQwMjI4LCJzaWQiOiIzMWQyYzE0YWViOTQzNzFiMWFlNTE0OTUyOWU0YWYwMiIsInN1YiI6ImE2NGViMjA5N2IxNTg0ZDIwNTExNTMyNmFiNjA3YTM2OWRkNDBlYmRlODExYTg5NDhhZjM4NGUwNTExNjM4YzYiLCJhdXRoX3RpbWUiOjE1NjE2NDAyMjQsImlkcCI6Ik1pY3Jvc29mdCIsIm5hbWUiOiJGdW5nYWkgTWFzaG96aGVyYSIsImFtciI6WyJleHRlcm5hbCJdfQ.gJ5jI_20rvIWnH5Xrr7nniycrNUYrsf4yz0kfH7GX9b35yxzXvqwPI_cKXxszhRH0Cxc3x0RY3cxwQ4yOwZ7Soa5Frnlo1rJ2-AF4iBOuU-TBSQTi9aBP0iZVvodjDo9FivnYegiT8fVAwfXHq64vaXbcCATMxwQpa_4No-ltf-nE8YgtvfvdJPH_-ZfysxWmCefFAy9eLvmcABgvLzbqx_V8ZxmWHAGvtv29jSb0TzPKk3Yl8r2ucNUikJLXz9hhKc9mb_TrS8CSCWSgaN0dIy1IwfWyDdgii-OtnISxKFoe43rFYqYR5QPVEmjgVTeC5Di3Po9DAOMdxX1_7Ld5w","state":"CfDJ8BST-4sCksNFlez27BzseIAvS7pzPKoNduL63iBtYkFmIdIX0W77wBf7EbOXd_q5QssWr7ADC4yJcN4_rrxaUO4CShKSpAd-ROCybT1zgcuM03F8c8XRrMcnQC4Ro3tlKoToTg8qR3xN-926csCMJm98iH8ttR-91Ww9VPOD44mu","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-06-27 14:57:15.812 +02:00 [DBG] Success validating end session request from SampleClient
2019-06-27 14:57:15.862 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-06-27 14:57:15.943 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 14:57:15.955 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 14:57:15.957 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 14:57:15.972 +02:00 [DBG] Processing signout callback request
2019-06-27 14:57:15.991 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:16.002 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 14:57:16.004 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 14:57:16.012 +02:00 [INF] Successful signout callback.
2019-06-27 14:57:16.022 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 14:57:16.026 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 14:57:18.156 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 14:57:18.159 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 14:57:18.164 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 14:57:18.166 +02:00 [DBG] Start authorize request
2019-06-27 14:57:18.167 +02:00 [DBG] No user present in authorize request
2019-06-27 14:57:18.171 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:18.172 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:18.175 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:18.177 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDtf1HfN65bRiheSd5TqfvyuQzMZ7HiVEX3ZwjgxSOEMixKKmGeUmWgg1eqw2k0l4V-LuVui1v083WShIOCb9asbA4EaCDs_xlZHR93r1oic1JHLZTANXgZ9_Xlz7IIirdpAS6zTyoGcJglRdbaWZmEmaEdeITv7HMdt9P01S6nBD88FY1a0aUKkyYj0izjcCX5KYX3spZVFxq6lzAsw0KlY1RsxmE5II7JJdNvtsEDJV3p4A1LnF58zfZwAnt6UPtrmHQZy_fPA-XWpaqaiuvsjtVVv1OMajJbSuRzTcHEcA","UiLocales":null,"Nonce":"636972370381414772.ZmIxYWFhMjEtZmE3Ny00MTExLWI1M2ItMzBlNzk2ODg0MzFmYmExMDI3M2YtYTg0Yi00NTg2LTg3YWQtN2VjYzJkZWM1MzJh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972370381414772.ZmIxYWFhMjEtZmE3Ny00MTExLWI1M2ItMzBlNzk2ODg0MzFmYmExMDI3M2YtYTg0Yi00NTg2LTg3YWQtN2VjYzJkZWM1MzJh","state":"CfDJ8BST-4sCksNFlez27BzseIDtf1HfN65bRiheSd5TqfvyuQzMZ7HiVEX3ZwjgxSOEMixKKmGeUmWgg1eqw2k0l4V-LuVui1v083WShIOCb9asbA4EaCDs_xlZHR93r1oic1JHLZTANXgZ9_Xlz7IIirdpAS6zTyoGcJglRdbaWZmEmaEdeITv7HMdt9P01S6nBD88FY1a0aUKkyYj0izjcCX5KYX3spZVFxq6lzAsw0KlY1RsxmE5II7JJdNvtsEDJV3p4A1LnF58zfZwAnt6UPtrmHQZy_fPA-XWpaqaiuvsjtVVv1OMajJbSuRzTcHEcA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:57:18.194 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 14:57:18.203 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:18.204 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:18.208 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:18.209 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:19.602 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 14:57:20.588 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 14:57:20.597 +02:00 [DBG] Augmenting SignInContext
2019-06-27 14:57:20.598 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 14:57:20.600 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 14:57:20.606 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 14:57:20.610 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:20.611 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:20.616 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:20.618 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:20.628 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 14:57:20.629 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 14:57:20.630 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 14:57:20.632 +02:00 [DBG] Start authorize callback request
2019-06-27 14:57:20.636 +02:00 [DBG] User in authorize request: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:20.639 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 14:57:20.640 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:20.644 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 14:57:20.646 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDtf1HfN65bRiheSd5TqfvyuQzMZ7HiVEX3ZwjgxSOEMixKKmGeUmWgg1eqw2k0l4V-LuVui1v083WShIOCb9asbA4EaCDs_xlZHR93r1oic1JHLZTANXgZ9_Xlz7IIirdpAS6zTyoGcJglRdbaWZmEmaEdeITv7HMdt9P01S6nBD88FY1a0aUKkyYj0izjcCX5KYX3spZVFxq6lzAsw0KlY1RsxmE5II7JJdNvtsEDJV3p4A1LnF58zfZwAnt6UPtrmHQZy_fPA-XWpaqaiuvsjtVVv1OMajJbSuRzTcHEcA","UiLocales":null,"Nonce":"636972370381414772.ZmIxYWFhMjEtZmE3Ny00MTExLWI1M2ItMzBlNzk2ODg0MzFmYmExMDI3M2YtYTg0Yi00NTg2LTg3YWQtN2VjYzJkZWM1MzJh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"aa7818dead41b0eca5eb43a4425f19a3","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972370381414772.ZmIxYWFhMjEtZmE3Ny00MTExLWI1M2ItMzBlNzk2ODg0MzFmYmExMDI3M2YtYTg0Yi00NTg2LTg3YWQtN2VjYzJkZWM1MzJh","state":"CfDJ8BST-4sCksNFlez27BzseIDtf1HfN65bRiheSd5TqfvyuQzMZ7HiVEX3ZwjgxSOEMixKKmGeUmWgg1eqw2k0l4V-LuVui1v083WShIOCb9asbA4EaCDs_xlZHR93r1oic1JHLZTANXgZ9_Xlz7IIirdpAS6zTyoGcJglRdbaWZmEmaEdeITv7HMdt9P01S6nBD88FY1a0aUKkyYj0izjcCX5KYX3spZVFxq6lzAsw0KlY1RsxmE5II7JJdNvtsEDJV3p4A1LnF58zfZwAnt6UPtrmHQZy_fPA-XWpaqaiuvsjtVVv1OMajJbSuRzTcHEcA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 14:57:20.666 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 14:57:20.671 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-06-27 14:57:20.673 +02:00 [DBG] Creating Implicit Flow response.
2019-06-27 14:57:20.675 +02:00 [DBG] Getting claims for identity token for subject: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 and client: SampleClient
2019-06-27 14:57:20.677 +02:00 [DBG] Get profile called for subject a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-06-27 14:57:20.680 +02:00 [DBG] Issued claims: ["name"]
2019-06-27 14:57:20.684 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDtf1HfN65bRiheSd5TqfvyuQzMZ7HiVEX3ZwjgxSOEMixKKmGeUmWgg1eqw2k0l4V-LuVui1v083WShIOCb9asbA4EaCDs_xlZHR93r1oic1JHLZTANXgZ9_Xlz7IIirdpAS6zTyoGcJglRdbaWZmEmaEdeITv7HMdt9P01S6nBD88FY1a0aUKkyYj0izjcCX5KYX3spZVFxq6lzAsw0KlY1RsxmE5II7JJdNvtsEDJV3p4A1LnF58zfZwAnt6UPtrmHQZy_fPA-XWpaqaiuvsjtVVv1OMajJbSuRzTcHEcA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-27 14:57:20.690 +02:00 [DBG] Augmenting SignInContext
2019-06-27 14:57:20.691 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 14:57:22.472 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-06-27 14:57:22.477 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-06-27 14:57:22.480 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-06-27 14:57:22.483 +02:00 [DBG] Processing signout request for a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 14:57:22.487 +02:00 [DBG] Start end session request validation
2019-06-27 14:57:22.489 +02:00 [DBG] Start identity token validation
2019-06-27 14:57:22.491 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:22.497 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-06-27 14:57:22.510 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-06-27 14:57:22.513 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-27 14:57:22.516 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561640240,"exp":1561640540,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636972370381414772.ZmIxYWFhMjEtZmE3Ny00MTExLWI1M2ItMzBlNzk2ODg0MzFmYmExMDI3M2YtYTg0Yi00NTg2LTg3YWQtN2VjYzJkZWM1MzJh","iat":1561640240,"sid":"aa7818dead41b0eca5eb43a4425f19a3","sub":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","auth_time":1561640240,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-06-27 14:57:22.531 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIALPQf74iXLUxlq-9MDhJBh_qpniq6Dyy74IG_jdoZseP9nzH9naaoSF5CLKX-aPWEncVYUuMGqcKBSZj7H_nIIERcbuObsiNC0x2ccKw5GbYqAi799ev19GuYfRqTqRSMnhfIoWi2QowR8SETF7vnY","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNkZjU0NjU4M2UyNjE5MzY3YzU2Njg1MDI3YTFkNTQ5IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NjE2NDAyNDAsImV4cCI6MTU2MTY0MDU0MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiU2FtcGxlQ2xpZW50Iiwibm9uY2UiOiI2MzY5NzIzNzAzODE0MTQ3NzIuWm1JeFlXRmhNakV0Wm1FM055MDBNVEV4TFdJMU0ySXRNekJsTnprMk9EZzBNekZtWW1FeE1ESTNNMll0WVRnMFlpMDBOVGcyTFRnM1lXUXROMlZqWXpKa1pXTTFNekpoIiwiaWF0IjoxNTYxNjQwMjQwLCJzaWQiOiJhYTc4MThkZWFkNDFiMGVjYTVlYjQzYTQ0MjVmMTlhMyIsInN1YiI6ImE2NGViMjA5N2IxNTg0ZDIwNTExNTMyNmFiNjA3YTM2OWRkNDBlYmRlODExYTg5NDhhZjM4NGUwNTExNjM4YzYiLCJhdXRoX3RpbWUiOjE1NjE2NDAyNDAsImlkcCI6Ik1pY3Jvc29mdCIsIm5hbWUiOiJGdW5nYWkgTWFzaG96aGVyYSIsImFtciI6WyJleHRlcm5hbCJdfQ.sB3Uy3cD2QMuq5GS58Vkvt0kYmd0nQQApNb39QpxkznUj3KqRvG_TBzmnZj39Oiqv-SSlqx8QsVQN_IEdI0byCntHpQnkmtAHGQXZYvH9nHZlmiTCF86NfTqE77q7jwtsktXOapoCdEaYSeWjaa2QrsIueJxBHB6RfMcSviLrgIU94Fu0FOVAA1qDynA_OO0CUJJl-824mJwSgH_0OMNjMagb5XCtY_ysa1R5d9Hiq3TDZcGVoGNrCghDIPihHN60MKQi-f4X4jTWeLJjthmWUjjexczYRWtQUyZzHowQShYal86v63rgthe_aJnQe2I0MSWuGq_nvCihXJmhNYi-g","state":"CfDJ8BST-4sCksNFlez27BzseIALPQf74iXLUxlq-9MDhJBh_qpniq6Dyy74IG_jdoZseP9nzH9naaoSF5CLKX-aPWEncVYUuMGqcKBSZj7H_nIIERcbuObsiNC0x2ccKw5GbYqAi799ev19GuYfRqTqRSMnhfIoWi2QowR8SETF7vnY","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-06-27 14:57:22.549 +02:00 [DBG] Success validating end session request from SampleClient
2019-06-27 14:57:22.556 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-06-27 14:57:22.608 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 14:57:22.617 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 14:57:22.621 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 14:57:22.632 +02:00 [DBG] Processing signout callback request
2019-06-27 14:57:22.635 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:57:22.638 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 14:57:22.641 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 14:57:22.642 +02:00 [INF] Successful signout callback.
2019-06-27 14:57:22.643 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 14:57:22.644 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 14:59:45.051 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 14:59:45.058 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 14:59:45.064 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 14:59:45.065 +02:00 [DBG] Processing signout callback request
2019-06-27 14:59:45.068 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 14:59:45.071 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 14:59:45.071 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 14:59:45.072 +02:00 [INF] Successful signout callback.
2019-06-27 14:59:45.073 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 14:59:45.074 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:01:28.075 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:01:28.086 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:01:28.095 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:01:28.101 +02:00 [DBG] Processing signout callback request
2019-06-27 15:01:28.102 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:01:28.119 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:01:28.121 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:01:28.124 +02:00 [INF] Successful signout callback.
2019-06-27 15:01:28.142 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:01:28.143 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:01:49.938 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:01:49.957 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:01:49.964 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:01:49.973 +02:00 [DBG] Processing signout callback request
2019-06-27 15:01:49.975 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:01:49.978 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:01:49.980 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:01:49.988 +02:00 [INF] Successful signout callback.
2019-06-27 15:01:49.992 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:01:49.996 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:03:34.797 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:03:34.805 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:03:34.808 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:03:34.814 +02:00 [DBG] Processing signout callback request
2019-06-27 15:03:34.815 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:03:34.835 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:03:34.874 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:03:34.881 +02:00 [INF] Successful signout callback.
2019-06-27 15:03:34.909 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:03:34.930 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:04:22.097 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:04:22.115 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:04:22.118 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:04:22.124 +02:00 [DBG] Processing signout callback request
2019-06-27 15:04:22.142 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:04:22.144 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:04:22.148 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:04:22.153 +02:00 [INF] Successful signout callback.
2019-06-27 15:04:22.159 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:04:22.162 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:04:58.313 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:04:58.344 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:04:58.347 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:04:58.351 +02:00 [DBG] Processing signout callback request
2019-06-27 15:04:58.353 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:04:58.359 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:04:58.361 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:04:58.363 +02:00 [INF] Successful signout callback.
2019-06-27 15:04:58.364 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:04:58.369 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:05:13.514 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 15:05:13.517 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 15:05:13.523 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 15:05:13.528 +02:00 [DBG] Start authorize request
2019-06-27 15:05:13.529 +02:00 [DBG] No user present in authorize request
2019-06-27 15:05:13.531 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:05:13.532 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:13.534 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:05:13.536 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAqhCjv3nyYVqBzxIZMr0E0mN0H-j3FLB795w5DWpRfrlFzbXhAx-mEWoU30-FCsosGUqTtzsHduApcm6Z9Jd9YLmIAdOtzy7QZTj9PmQ-3aqMHJaMht-isJZv-2npR3KAFwxLfDCknM5O1yly1JpQEExHM5PwSTL5TLi2RNTsG_skv4I3w6gwEV8H76dMj3ZuSXG-JPUL8ety6NYu9llNESOcwupkYfRoDaebezTI3IGMdsHMG4gXr-WS-HZ2EmPOLeGKyj0VTSrEr9LLd6Q6fRp6A2qio4LL8Nixyzb9TVA","UiLocales":null,"Nonce":"636972375134990681.N2ZkYTNjNzgtNDI0NS00YjhiLTg3YzktMDljNDk2ZDAwMDgwZDEyOWEyY2MtNTM5Yy00OWVjLTk4MTktZjM3N2ZkNDRlMzI3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972375134990681.N2ZkYTNjNzgtNDI0NS00YjhiLTg3YzktMDljNDk2ZDAwMDgwZDEyOWEyY2MtNTM5Yy00OWVjLTk4MTktZjM3N2ZkNDRlMzI3","state":"CfDJ8BST-4sCksNFlez27BzseIAqhCjv3nyYVqBzxIZMr0E0mN0H-j3FLB795w5DWpRfrlFzbXhAx-mEWoU30-FCsosGUqTtzsHduApcm6Z9Jd9YLmIAdOtzy7QZTj9PmQ-3aqMHJaMht-isJZv-2npR3KAFwxLfDCknM5O1yly1JpQEExHM5PwSTL5TLi2RNTsG_skv4I3w6gwEV8H76dMj3ZuSXG-JPUL8ety6NYu9llNESOcwupkYfRoDaebezTI3IGMdsHMG4gXr-WS-HZ2EmPOLeGKyj0VTSrEr9LLd6Q6fRp6A2qio4LL8Nixyzb9TVA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 15:05:13.558 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 15:05:13.565 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:05:13.565 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:13.568 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:05:13.570 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:16.997 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 15:05:54.933 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 15:05:54.947 +02:00 [DBG] Augmenting SignInContext
2019-06-27 15:05:54.948 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 15:05:54.949 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 15:05:54.952 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 15:05:54.954 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:05:54.959 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:54.962 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:05:54.963 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:54.975 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 15:05:54.977 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 15:05:54.981 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 15:05:54.984 +02:00 [DBG] Start authorize callback request
2019-06-27 15:05:54.986 +02:00 [DBG] User in authorize request: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 15:05:54.988 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:05:54.993 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:05:54.995 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:05:54.999 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAqhCjv3nyYVqBzxIZMr0E0mN0H-j3FLB795w5DWpRfrlFzbXhAx-mEWoU30-FCsosGUqTtzsHduApcm6Z9Jd9YLmIAdOtzy7QZTj9PmQ-3aqMHJaMht-isJZv-2npR3KAFwxLfDCknM5O1yly1JpQEExHM5PwSTL5TLi2RNTsG_skv4I3w6gwEV8H76dMj3ZuSXG-JPUL8ety6NYu9llNESOcwupkYfRoDaebezTI3IGMdsHMG4gXr-WS-HZ2EmPOLeGKyj0VTSrEr9LLd6Q6fRp6A2qio4LL8Nixyzb9TVA","UiLocales":null,"Nonce":"636972375134990681.N2ZkYTNjNzgtNDI0NS00YjhiLTg3YzktMDljNDk2ZDAwMDgwZDEyOWEyY2MtNTM5Yy00OWVjLTk4MTktZjM3N2ZkNDRlMzI3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f65ddb25e86fbf2ed5069a34ca6e388a","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972375134990681.N2ZkYTNjNzgtNDI0NS00YjhiLTg3YzktMDljNDk2ZDAwMDgwZDEyOWEyY2MtNTM5Yy00OWVjLTk4MTktZjM3N2ZkNDRlMzI3","state":"CfDJ8BST-4sCksNFlez27BzseIAqhCjv3nyYVqBzxIZMr0E0mN0H-j3FLB795w5DWpRfrlFzbXhAx-mEWoU30-FCsosGUqTtzsHduApcm6Z9Jd9YLmIAdOtzy7QZTj9PmQ-3aqMHJaMht-isJZv-2npR3KAFwxLfDCknM5O1yly1JpQEExHM5PwSTL5TLi2RNTsG_skv4I3w6gwEV8H76dMj3ZuSXG-JPUL8ety6NYu9llNESOcwupkYfRoDaebezTI3IGMdsHMG4gXr-WS-HZ2EmPOLeGKyj0VTSrEr9LLd6Q6fRp6A2qio4LL8Nixyzb9TVA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 15:05:55.020 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 15:05:55.025 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-06-27 15:05:55.028 +02:00 [DBG] Creating Implicit Flow response.
2019-06-27 15:05:55.030 +02:00 [DBG] Getting claims for identity token for subject: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 and client: SampleClient
2019-06-27 15:05:55.032 +02:00 [DBG] Get profile called for subject a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-06-27 15:05:55.038 +02:00 [DBG] Issued claims: ["name"]
2019-06-27 15:05:55.043 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAqhCjv3nyYVqBzxIZMr0E0mN0H-j3FLB795w5DWpRfrlFzbXhAx-mEWoU30-FCsosGUqTtzsHduApcm6Z9Jd9YLmIAdOtzy7QZTj9PmQ-3aqMHJaMht-isJZv-2npR3KAFwxLfDCknM5O1yly1JpQEExHM5PwSTL5TLi2RNTsG_skv4I3w6gwEV8H76dMj3ZuSXG-JPUL8ety6NYu9llNESOcwupkYfRoDaebezTI3IGMdsHMG4gXr-WS-HZ2EmPOLeGKyj0VTSrEr9LLd6Q6fRp6A2qio4LL8Nixyzb9TVA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-27 15:05:55.050 +02:00 [DBG] Augmenting SignInContext
2019-06-27 15:05:55.051 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 15:07:10.038 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-06-27 15:07:10.042 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-06-27 15:07:10.046 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-06-27 15:07:10.048 +02:00 [DBG] Processing signout request for a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 15:07:10.049 +02:00 [DBG] Start end session request validation
2019-06-27 15:07:10.054 +02:00 [DBG] Start identity token validation
2019-06-27 15:07:10.055 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:07:10.057 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-06-27 15:07:10.063 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-06-27 15:07:10.065 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-27 15:07:10.067 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561640755,"exp":1561641055,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636972375134990681.N2ZkYTNjNzgtNDI0NS00YjhiLTg3YzktMDljNDk2ZDAwMDgwZDEyOWEyY2MtNTM5Yy00OWVjLTk4MTktZjM3N2ZkNDRlMzI3","iat":1561640755,"sid":"f65ddb25e86fbf2ed5069a34ca6e388a","sub":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","auth_time":1561640754,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-06-27 15:07:10.073 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIC9QbONczkkSI-y3KVqbC6xFXpIL3kHN58jXPBIYN0t3ClTtuXd4rJgnKDznXKi0LkyyxbbHOf0xHcy5-jJgX58-MjJldH7GGfStxJleSyHXmkkNDZ6qU2qDD8GCbxRZNltNyr_6CsU3NdBY2oAO_rB","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6ImNkZjU0NjU4M2UyNjE5MzY3YzU2Njg1MDI3YTFkNTQ5IiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NjE2NDA3NTUsImV4cCI6MTU2MTY0MTA1NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiU2FtcGxlQ2xpZW50Iiwibm9uY2UiOiI2MzY5NzIzNzUxMzQ5OTA2ODEuTjJaa1lUTmpOemd0TkRJME5TMDBZamhpTFRnM1l6a3RNRGxqTkRrMlpEQXdNRGd3WkRFeU9XRXlZMk10TlRNNVl5MDBPV1ZqTFRrNE1Ua3Raak0zTjJaa05EUmxNekkzIiwiaWF0IjoxNTYxNjQwNzU1LCJzaWQiOiJmNjVkZGIyNWU4NmZiZjJlZDUwNjlhMzRjYTZlMzg4YSIsInN1YiI6ImE2NGViMjA5N2IxNTg0ZDIwNTExNTMyNmFiNjA3YTM2OWRkNDBlYmRlODExYTg5NDhhZjM4NGUwNTExNjM4YzYiLCJhdXRoX3RpbWUiOjE1NjE2NDA3NTQsImlkcCI6Ik1pY3Jvc29mdCIsIm5hbWUiOiJGdW5nYWkgTWFzaG96aGVyYSIsImFtciI6WyJleHRlcm5hbCJdfQ.uodv30nnBc4vtZAplghtMZ_KaMlT4co4T8OU1dluBHX79-lXoIeTli9Wnz-1pfEbdxtTDAdomASI4aCZM9OAZbBmneYL2e3uO-ctuA0Gjt8GhL3cWxKYpsYxOCoCaYPUE0VoLvsXvpgubupDggMHMZk3ZoBbeZ7yLi1yprpxLptmL_cBYoA0SJ9syDQgJl3UfGC48w8X5VZKMPp3W2BJqzxmJWe7R7oKtQmWZS8fzu2hWlQ-BHKz1cwEWQw-MHsz5AXoGSoYm3ZhpArmJSjGOkHiu68rOzTZ7tLTLFkhEPPUGi7wj6k9bIv-aXu7Cop2bKT1TCB9VD6VH2-JmT_xZA","state":"CfDJ8BST-4sCksNFlez27BzseIC9QbONczkkSI-y3KVqbC6xFXpIL3kHN58jXPBIYN0t3ClTtuXd4rJgnKDznXKi0LkyyxbbHOf0xHcy5-jJgX58-MjJldH7GGfStxJleSyHXmkkNDZ6qU2qDD8GCbxRZNltNyr_6CsU3NdBY2oAO_rB","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-06-27 15:07:10.092 +02:00 [DBG] Success validating end session request from SampleClient
2019-06-27 15:07:10.113 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-06-27 15:07:10.194 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-06-27 15:07:10.317 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-06-27 15:07:10.334 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-06-27 15:07:10.357 +02:00 [DBG] Processing signout callback request
2019-06-27 15:07:10.358 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:07:10.363 +02:00 [DBG] No client front-channel logout URLs
2019-06-27 15:07:10.364 +02:00 [DBG] No client back-channel logout URLs
2019-06-27 15:07:10.366 +02:00 [INF] Successful signout callback.
2019-06-27 15:07:10.387 +02:00 [DBG] No client front-channel iframe urls
2019-06-27 15:07:10.391 +02:00 [DBG] No client back-channel iframe urls
2019-06-27 15:07:12.175 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-27 15:07:12.180 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-27 15:07:12.182 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-27 15:07:12.184 +02:00 [DBG] Start authorize request
2019-06-27 15:07:12.185 +02:00 [DBG] No user present in authorize request
2019-06-27 15:07:12.190 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:07:12.191 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:07:12.193 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:07:12.196 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICpCAXym-5VcwMBC0berGCGz9lf8oB-iWaWyn9vluYWDNFd0LRIFqboi2qA8QViu8_fR0upeo_6NqF8M7k3GCEjYylAmuKF9FZmI5_vc09wpbyAAE67jS2Olyyi6qXekF4cZgDPLmz0Pqx2C6hFxz9-KsPsRm7qAfrtJMfGPUBNIrXiXmJVfAk92oUNwq2iZnbOE3AIbcf1pzK51naJU32hkt4W9GDn9uibPrFzcDNSEHxCK-uwReE1CYzxfqz5GmHRY7-br-om-rE15uQSgxvg31yqQeP1AXik9QEshRn7YQ","UiLocales":null,"Nonce":"636972376321597922.YWMxOGMwOGQtNjM3My00ZTFjLWI2ZjMtY2Q1ZWI2NDA2YWMzOWI5ZmYzN2EtMWY4ZS00ZGMwLWFlOWEtNzkyMDc4NDU3N2Qx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972376321597922.YWMxOGMwOGQtNjM3My00ZTFjLWI2ZjMtY2Q1ZWI2NDA2YWMzOWI5ZmYzN2EtMWY4ZS00ZGMwLWFlOWEtNzkyMDc4NDU3N2Qx","state":"CfDJ8BST-4sCksNFlez27BzseICpCAXym-5VcwMBC0berGCGz9lf8oB-iWaWyn9vluYWDNFd0LRIFqboi2qA8QViu8_fR0upeo_6NqF8M7k3GCEjYylAmuKF9FZmI5_vc09wpbyAAE67jS2Olyyi6qXekF4cZgDPLmz0Pqx2C6hFxz9-KsPsRm7qAfrtJMfGPUBNIrXiXmJVfAk92oUNwq2iZnbOE3AIbcf1pzK51naJU32hkt4W9GDn9uibPrFzcDNSEHxCK-uwReE1CYzxfqz5GmHRY7-br-om-rE15uQSgxvg31yqQeP1AXik9QEshRn7YQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 15:07:12.218 +02:00 [INF] Showing login: User is not authenticated
2019-06-27 15:07:12.226 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:07:12.226 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:07:12.229 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:07:12.230 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:22.614 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:08:22.615 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:22.623 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:08:22.625 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:27.102 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 15:08:30.096 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-27 15:08:30.106 +02:00 [DBG] Augmenting SignInContext
2019-06-27 15:08:30.107 +02:00 [DBG] Adding amr claim with value: external
2019-06-27 15:08:30.111 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 15:08:30.114 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-27 15:08:30.120 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:08:30.121 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:30.126 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:08:30.128 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:30.139 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-27 15:08:30.144 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-27 15:08:30.146 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-27 15:08:30.148 +02:00 [DBG] Start authorize callback request
2019-06-27 15:08:30.149 +02:00 [DBG] User in authorize request: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6
2019-06-27 15:08:30.151 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:08:30.155 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:30.159 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:08:30.161 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICpCAXym-5VcwMBC0berGCGz9lf8oB-iWaWyn9vluYWDNFd0LRIFqboi2qA8QViu8_fR0upeo_6NqF8M7k3GCEjYylAmuKF9FZmI5_vc09wpbyAAE67jS2Olyyi6qXekF4cZgDPLmz0Pqx2C6hFxz9-KsPsRm7qAfrtJMfGPUBNIrXiXmJVfAk92oUNwq2iZnbOE3AIbcf1pzK51naJU32hkt4W9GDn9uibPrFzcDNSEHxCK-uwReE1CYzxfqz5GmHRY7-br-om-rE15uQSgxvg31yqQeP1AXik9QEshRn7YQ","UiLocales":null,"Nonce":"636972376321597922.YWMxOGMwOGQtNjM3My00ZTFjLWI2ZjMtY2Q1ZWI2NDA2YWMzOWI5ZmYzN2EtMWY4ZS00ZGMwLWFlOWEtNzkyMDc4NDU3N2Qx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"66ccca6b5f53720881236b48f53d9a10","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636972376321597922.YWMxOGMwOGQtNjM3My00ZTFjLWI2ZjMtY2Q1ZWI2NDA2YWMzOWI5ZmYzN2EtMWY4ZS00ZGMwLWFlOWEtNzkyMDc4NDU3N2Qx","state":"CfDJ8BST-4sCksNFlez27BzseICpCAXym-5VcwMBC0berGCGz9lf8oB-iWaWyn9vluYWDNFd0LRIFqboi2qA8QViu8_fR0upeo_6NqF8M7k3GCEjYylAmuKF9FZmI5_vc09wpbyAAE67jS2Olyyi6qXekF4cZgDPLmz0Pqx2C6hFxz9-KsPsRm7qAfrtJMfGPUBNIrXiXmJVfAk92oUNwq2iZnbOE3AIbcf1pzK51naJU32hkt4W9GDn9uibPrFzcDNSEHxCK-uwReE1CYzxfqz5GmHRY7-br-om-rE15uQSgxvg31yqQeP1AXik9QEshRn7YQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-27 15:08:30.187 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-27 15:08:30.195 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-06-27 15:08:30.197 +02:00 [DBG] Creating Implicit Flow response.
2019-06-27 15:08:30.199 +02:00 [DBG] Getting claims for identity token for subject: a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 and client: SampleClient
2019-06-27 15:08:30.203 +02:00 [DBG] Get profile called for subject a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-06-27 15:08:30.210 +02:00 [DBG] Issued claims: ["name"]
2019-06-27 15:08:30.215 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a64eb2097b1584d205115326ab607a369dd40ebde811a8948af384e0511638c6","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICpCAXym-5VcwMBC0berGCGz9lf8oB-iWaWyn9vluYWDNFd0LRIFqboi2qA8QViu8_fR0upeo_6NqF8M7k3GCEjYylAmuKF9FZmI5_vc09wpbyAAE67jS2Olyyi6qXekF4cZgDPLmz0Pqx2C6hFxz9-KsPsRm7qAfrtJMfGPUBNIrXiXmJVfAk92oUNwq2iZnbOE3AIbcf1pzK51naJU32hkt4W9GDn9uibPrFzcDNSEHxCK-uwReE1CYzxfqz5GmHRY7-br-om-rE15uQSgxvg31yqQeP1AXik9QEshRn7YQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-06-27 15:08:30.221 +02:00 [DBG] Augmenting SignInContext
2019-06-27 15:08:30.223 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-27 15:08:31.467 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:08:31.467 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:08:31.472 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:08:31.475 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:09:34.347 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:09:34.348 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:09:34.352 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:09:34.355 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:10:51.331 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:10:51.332 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:10:51.340 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:10:51.343 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:10:55.907 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-27 15:10:59.479 +02:00 [INF] Error from RemoteAuthentication: The operation was canceled..
2019-06-27 15:11:00.205 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled. ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request. ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.GetResult(Int16 token)
   at System.Net.FixedSizeReader.ReadPacketAsync(Stream transport, AsyncProtocolRequest request)
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__47_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.CreateConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.WaitForCreatedConnectionAsync(ValueTask`1 creationTask)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.AspNetCore.Authentication.MicrosoftAccount.MicrosoftAccountHandler.CreateTicketAsync(ClaimsIdentity identity, AuthenticationProperties properties, OAuthTokenResponse tokens)
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthHandler`1.HandleRemoteAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-27 15:11:28.080 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:11:28.082 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:11:28.088 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:11:28.091 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:11:35.979 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:11:35.980 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:11:35.985 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:11:35.987 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:12:06.832 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:12:06.833 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:12:06.839 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:12:06.841 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:12:31.202 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:12:31.202 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:12:31.208 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:12:31.211 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:13:05.157 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:13:05.157 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:13:05.162 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:13:05.164 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:13:25.355 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:13:25.356 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:13:25.363 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:13:25.365 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:14:53.974 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:14:53.975 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:14:53.980 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:14:53.983 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:15:02.389 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:15:02.390 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:15:02.409 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:15:02.412 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:15:53.781 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:15:53.782 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:15:53.787 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:15:53.789 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:16:01.794 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:16:01.794 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:16:01.800 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:16:01.802 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:16:16.759 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:16:16.760 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:16:16.765 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:16:16.768 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:19:06.962 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:19:06.963 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:19:06.969 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:19:06.973 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:19:58.897 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:19:58.899 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:19:58.908 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:19:58.910 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:20:09.347 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:20:09.347 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:20:09.353 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:20:09.356 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:20:45.233 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:20:45.234 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:20:45.240 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:20:45.301 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:05.669 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:21:05.673 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:05.682 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:21:05.687 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:45.472 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:21:45.473 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:45.479 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:21:45.481 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:58.882 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:21:58.883 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:21:58.889 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:21:58.894 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:22:00.077 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer\STS\Views\Account\Login.cshtml(7,18): error CS1001: Identifier expected
D:\Projects\SecurityServer\STS\Views\Account\Login.cshtml(7,18): error CS1002: ; expected
D:\Projects\SecurityServer\STS\Views\Account\Login.cshtml(7,9): error CS0246: The type or namespace name 'asdasdsad' could not be found (are you missing a using directive or an assembly reference?)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-27 15:22:29.427 +02:00 [DBG] Start authorize request protocol validation
2019-06-27 15:22:29.428 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-27 15:22:29.433 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-27 15:22:29.435 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:47:17.159 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-06-28 12:47:21.643 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-28 12:47:21.644 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-28 12:47:21.645 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-28 12:47:21.646 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-28 12:47:21.647 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-28 12:47:21.649 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-28 12:47:22.482 +02:00 [DBG] Starting grant removal
2019-06-28 12:48:08.197 +02:00 [DBG] Login Url: /Account/Login
2019-06-28 12:48:08.203 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-28 12:48:08.207 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-28 12:48:08.208 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-28 12:48:08.210 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-28 12:48:08.212 +02:00 [DBG] Error Url: /home/error
2019-06-28 12:48:08.214 +02:00 [DBG] Error Id Parameter: errorId
2019-06-28 12:48:08.249 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-28 12:48:08.258 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-28 12:48:08.262 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-28 12:48:08.270 +02:00 [DBG] Start discovery request
2019-06-28 12:48:09.060 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-28 12:48:09.063 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-28 12:48:09.065 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-28 12:48:09.070 +02:00 [DBG] Start key discovery request
2019-06-28 12:48:09.366 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-28 12:48:09.382 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-28 12:48:09.384 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-28 12:48:09.392 +02:00 [DBG] Start authorize request
2019-06-28 12:48:09.407 +02:00 [DBG] No user present in authorize request
2019-06-28 12:48:09.413 +02:00 [DBG] Start authorize request protocol validation
2019-06-28 12:48:09.457 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:09.493 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-28 12:48:09.510 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIB2euvv2Vg2tYEYVyd4QKVOuYXdqb4bJaHVCW3JGShmzQgJb0ATFMVVFQ7MHqvruIM-JVlmk0AwzchzIlurFVpCHTpD97C7BIusAk2pTg2M3UACFqH9F9uVeoYV_ydOpNsHJPDToaxKEvAudatvArlRhqtW1YRVXTN3PQu0ydZn7IS3Fcofsdcjwyk2sjant04QilaxqbrcYyYKSXxPhpYqVRmqvRoLZY9gU8PIQfJ_TDv9GoZNmofhmQ27VNYrB2UBxjQnsPDNYk2UyTAuFe_e3ChoGAsmOKocty1qs5U7BQ","UiLocales":null,"Nonce":"636973156891116407.ZTA4ODZjNmUtZTExNC00ODRiLWE2NDMtODlmYTI4ODAwNGMxZWE5N2FlZDMtODA4Yi00OGZjLTlmZDctMTNkZDM0YTNlYjM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636973156891116407.ZTA4ODZjNmUtZTExNC00ODRiLWE2NDMtODlmYTI4ODAwNGMxZWE5N2FlZDMtODA4Yi00OGZjLTlmZDctMTNkZDM0YTNlYjM4","state":"CfDJ8BST-4sCksNFlez27BzseIB2euvv2Vg2tYEYVyd4QKVOuYXdqb4bJaHVCW3JGShmzQgJb0ATFMVVFQ7MHqvruIM-JVlmk0AwzchzIlurFVpCHTpD97C7BIusAk2pTg2M3UACFqH9F9uVeoYV_ydOpNsHJPDToaxKEvAudatvArlRhqtW1YRVXTN3PQu0ydZn7IS3Fcofsdcjwyk2sjant04QilaxqbrcYyYKSXxPhpYqVRmqvRoLZY9gU8PIQfJ_TDv9GoZNmofhmQ27VNYrB2UBxjQnsPDNYk2UyTAuFe_e3ChoGAsmOKocty1qs5U7BQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-28 12:48:09.546 +02:00 [INF] Showing login: User is not authenticated
2019-06-28 12:48:10.347 +02:00 [DBG] Start authorize request protocol validation
2019-06-28 12:48:10.348 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:10.351 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-28 12:48:10.356 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:15.393 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-06-28 12:48:19.266 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-06-28 12:48:19.486 +02:00 [DBG] Augmenting SignInContext
2019-06-28 12:48:19.493 +02:00 [DBG] Adding amr claim with value: external
2019-06-28 12:48:19.500 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-06-28 12:48:19.510 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-06-28 12:48:19.514 +02:00 [DBG] Start authorize request protocol validation
2019-06-28 12:48:19.516 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:19.519 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-28 12:48:19.527 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:19.540 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-06-28 12:48:19.543 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-06-28 12:48:19.545 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-06-28 12:48:19.550 +02:00 [DBG] Start authorize callback request
2019-06-28 12:48:19.555 +02:00 [DBG] User in authorize request: f3d83917c36bb326389bbfc18f1e329e7685ebb8822f6089507db9bf3cf24bd5
2019-06-28 12:48:19.557 +02:00 [DBG] Start authorize request protocol validation
2019-06-28 12:48:19.558 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 12:48:19.560 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-28 12:48:19.562 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"f3d83917c36bb326389bbfc18f1e329e7685ebb8822f6089507db9bf3cf24bd5","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIB2euvv2Vg2tYEYVyd4QKVOuYXdqb4bJaHVCW3JGShmzQgJb0ATFMVVFQ7MHqvruIM-JVlmk0AwzchzIlurFVpCHTpD97C7BIusAk2pTg2M3UACFqH9F9uVeoYV_ydOpNsHJPDToaxKEvAudatvArlRhqtW1YRVXTN3PQu0ydZn7IS3Fcofsdcjwyk2sjant04QilaxqbrcYyYKSXxPhpYqVRmqvRoLZY9gU8PIQfJ_TDv9GoZNmofhmQ27VNYrB2UBxjQnsPDNYk2UyTAuFe_e3ChoGAsmOKocty1qs5U7BQ","UiLocales":null,"Nonce":"636973156891116407.ZTA4ODZjNmUtZTExNC00ODRiLWE2NDMtODlmYTI4ODAwNGMxZWE5N2FlZDMtODA4Yi00OGZjLTlmZDctMTNkZDM0YTNlYjM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2c30c0b3ae5d53193292f2ae5e7affba","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636973156891116407.ZTA4ODZjNmUtZTExNC00ODRiLWE2NDMtODlmYTI4ODAwNGMxZWE5N2FlZDMtODA4Yi00OGZjLTlmZDctMTNkZDM0YTNlYjM4","state":"CfDJ8BST-4sCksNFlez27BzseIB2euvv2Vg2tYEYVyd4QKVOuYXdqb4bJaHVCW3JGShmzQgJb0ATFMVVFQ7MHqvruIM-JVlmk0AwzchzIlurFVpCHTpD97C7BIusAk2pTg2M3UACFqH9F9uVeoYV_ydOpNsHJPDToaxKEvAudatvArlRhqtW1YRVXTN3PQu0ydZn7IS3Fcofsdcjwyk2sjant04QilaxqbrcYyYKSXxPhpYqVRmqvRoLZY9gU8PIQfJ_TDv9GoZNmofhmQ27VNYrB2UBxjQnsPDNYk2UyTAuFe_e3ChoGAsmOKocty1qs5U7BQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-28 12:48:19.583 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-28 12:48:36.195 +02:00 [ERR] An error occurred using the connection to database 'SecurityServer' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
2019-06-28 12:48:36.388 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
2019-06-28 12:48:36.513 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
2019-06-28 12:48:37.149 +02:00 [FTL] Unhandled exception: Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 59
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 69
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
2019-06-28 12:48:37.462 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 59
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 69
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 70
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:083ae3f3-d92e-45fa-abc3-8f6785914432
Error Number:4060,State:1,Class:11
2019-06-28 13:47:33.124 +02:00 [ERR] An error occurred using the connection to database 'SecurityServer' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:1e708032-48b2-4fbc-b4a2-ae5c8fb5a52b
Error Number:4060,State:1,Class:11
2019-06-28 13:47:33.191 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:1e708032-48b2-4fbc-b4a2-ae5c8fb5a52b
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:1e708032-48b2-4fbc-b4a2-ae5c8fb5a52b
Error Number:4060,State:1,Class:11
2019-06-28 13:47:33.288 +02:00 [ERR] Exception removing expired grants: Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
2019-06-28 14:47:43.832 +02:00 [ERR] An error occurred using the connection to database 'SecurityServer' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:fea1b988-8b17-4398-abba-4eb11c6c7618
Error Number:4060,State:1,Class:11
2019-06-28 14:47:43.919 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:fea1b988-8b17-4398-abba-4eb11c6c7618
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:fea1b988-8b17-4398-abba-4eb11c6c7618
Error Number:4060,State:1,Class:11
2019-06-28 14:47:44.029 +02:00 [ERR] Exception removing expired grants: Cannot open database "SecurityServer" requested by the login. The login failed.
Login failed for user 'sa'.
2019-06-28 15:48:20.480 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-06-28 15:48:20.672 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-06-28 15:48:20.673 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-06-28 15:48:20.674 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-06-28 15:48:20.674 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-06-28 15:48:20.675 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-06-28 15:48:20.675 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-06-28 15:48:21.169 +02:00 [DBG] Starting grant removal
2019-06-28 15:48:59.671 +02:00 [DBG] Login Url: /Account/Login
2019-06-28 15:48:59.675 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-28 15:48:59.677 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-28 15:48:59.678 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-28 15:48:59.679 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-28 15:48:59.680 +02:00 [DBG] Error Url: /home/error
2019-06-28 15:48:59.681 +02:00 [DBG] Error Id Parameter: errorId
2019-06-28 15:48:59.704 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-28 15:48:59.709 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-28 15:48:59.711 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-28 15:48:59.715 +02:00 [DBG] Start discovery request
2019-06-28 15:49:00.264 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-28 15:49:00.283 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-28 15:49:00.286 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-28 15:49:00.295 +02:00 [DBG] Start key discovery request
2019-06-28 15:49:00.451 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-06-28 15:49:00.465 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-06-28 15:49:00.467 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-06-28 15:49:00.480 +02:00 [DBG] Start authorize request
2019-06-28 15:49:00.500 +02:00 [DBG] User in authorize request: f3d83917c36bb326389bbfc18f1e329e7685ebb8822f6089507db9bf3cf24bd5
2019-06-28 15:49:00.510 +02:00 [DBG] Start authorize request protocol validation
2019-06-28 15:49:00.530 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-06-28 15:49:00.559 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-06-28 15:49:00.579 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"f3d83917c36bb326389bbfc18f1e329e7685ebb8822f6089507db9bf3cf24bd5","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAAUBiz_E52tPhIB88Z_tmMYDBf0oSRBTD8rx0kJkKe56VtK6BnB9bLkmSCXIcLDgohFdKS5MuzVIwSZKECBm0mC8jszOg8WJomBNFkpsD6JxxPwBR-3p_IktTCGdFWU7ze0EuZzov1oPp5nx-7oimhCxok8Zcg05_shydyFDT9_XBTpDko6mkA7jcqSguV8MA3CWSuIPN7j5cJbWIh67SkCaCUWTXwz8fNPCHVelfsNOF6cCsQH5pMSRPOHXykGgr01JZcKuekvKWVAcQKFqStXRUVz8LMd-8cJOstkLzQ1g","UiLocales":null,"Nonce":"636973265403291441.MTEzYTE0ZmUtMTAyNi00NGJkLWJiYTctNjRlY2ZhOWNmMzBhYTE0YjE4NDMtZjNlMC00YjQwLThhYzktZTczYTI4MzRhNWZk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2c30c0b3ae5d53193292f2ae5e7affba","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636973265403291441.MTEzYTE0ZmUtMTAyNi00NGJkLWJiYTctNjRlY2ZhOWNmMzBhYTE0YjE4NDMtZjNlMC00YjQwLThhYzktZTczYTI4MzRhNWZk","state":"CfDJ8BST-4sCksNFlez27BzseIAAUBiz_E52tPhIB88Z_tmMYDBf0oSRBTD8rx0kJkKe56VtK6BnB9bLkmSCXIcLDgohFdKS5MuzVIwSZKECBm0mC8jszOg8WJomBNFkpsD6JxxPwBR-3p_IktTCGdFWU7ze0EuZzov1oPp5nx-7oimhCxok8Zcg05_shydyFDT9_XBTpDko6mkA7jcqSguV8MA3CWSuIPN7j5cJbWIh67SkCaCUWTXwz8fNPCHVelfsNOF6cCsQH5pMSRPOHXykGgr01JZcKuekvKWVAcQKFqStXRUVz8LMd-8cJOstkLzQ1g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-06-28 15:49:00.630 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-06-28 15:49:01.474 +02:00 [ERR] Failed executing DbCommand (426ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
2019-06-28 15:49:01.747 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
2019-06-28 15:49:01.865 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
2019-06-28 15:49:02.370 +02:00 [FTL] Unhandled exception: Invalid object name 'PersistedGrants'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
2019-06-28 15:49:02.676 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpoint.cs:line 55
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 70
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:728ac27e-46f9-4b0c-9a1b-e47638f6d0d8
Error Number:208,State:1,Class:16
2019-07-01 09:48:15.734 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 09:48:18.775 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 09:48:18.777 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 09:48:18.778 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 09:48:18.778 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 09:48:18.779 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 09:48:18.780 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 09:48:20.637 +02:00 [DBG] Starting grant removal
2019-07-01 09:50:32.819 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 09:50:32.823 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 09:50:32.826 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 09:50:32.827 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 09:50:32.829 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 09:50:32.831 +02:00 [DBG] Error Url: /home/error
2019-07-01 09:50:32.832 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 09:50:32.866 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 09:50:32.873 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 09:50:32.875 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 09:50:32.881 +02:00 [DBG] Start discovery request
2019-07-01 09:50:33.806 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 09:50:33.814 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 09:50:33.816 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 09:50:33.822 +02:00 [DBG] Start key discovery request
2019-07-01 09:50:34.199 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 09:50:34.209 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 09:50:34.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 09:50:34.216 +02:00 [DBG] Start authorize request
2019-07-01 09:50:34.227 +02:00 [DBG] No user present in authorize request
2019-07-01 09:50:34.231 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 09:50:34.252 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:50:34.284 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 09:50:34.306 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAI4zGHj99CqU4QKNAw-gp7ZOE8Qp_6kFoRhNp7f_ArQhRGXcH7cY_roZZET54Y2UmwzRA-XObEj12YbDzzsmR_xdVrT7aKISS3N-eaqBEFZP5v03D2ZwKKnq-5Lth3dF00O1r2NPv-Wvaz7RxnjxEtMvUTXeC5zy6omXb3gB-FrePrmIIVJCvroWGLhDb4txk-iEUxBEoYIjxOVmbwXCxvWpVi6AQIKA2fraZfd4Rp7sARxBuVPmMsWotHUFocNOeYRMEVyRH_C4qpOtoSKSs3nkKcS_2rAiaSZy_SZuq5CA","UiLocales":null,"Nonce":"636975642338534374.ZDcwZTI0ZGMtOGI0Ni00ZmM5LWE5ZWMtODMyZWNhY2NjNDA1MjY1ZjIzODgtNWE4OS00MzliLWI4NjAtZjA3Y2Y1NmFjZjJk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975642338534374.ZDcwZTI0ZGMtOGI0Ni00ZmM5LWE5ZWMtODMyZWNhY2NjNDA1MjY1ZjIzODgtNWE4OS00MzliLWI4NjAtZjA3Y2Y1NmFjZjJk","state":"CfDJ8BST-4sCksNFlez27BzseIAI4zGHj99CqU4QKNAw-gp7ZOE8Qp_6kFoRhNp7f_ArQhRGXcH7cY_roZZET54Y2UmwzRA-XObEj12YbDzzsmR_xdVrT7aKISS3N-eaqBEFZP5v03D2ZwKKnq-5Lth3dF00O1r2NPv-Wvaz7RxnjxEtMvUTXeC5zy6omXb3gB-FrePrmIIVJCvroWGLhDb4txk-iEUxBEoYIjxOVmbwXCxvWpVi6AQIKA2fraZfd4Rp7sARxBuVPmMsWotHUFocNOeYRMEVyRH_C4qpOtoSKSs3nkKcS_2rAiaSZy_SZuq5CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 09:50:34.362 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 09:50:36.083 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 09:50:36.085 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:50:36.089 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 09:50:36.096 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:51:04.875 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 09:51:11.967 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 09:51:12.093 +02:00 [DBG] Augmenting SignInContext
2019-07-01 09:51:12.101 +02:00 [DBG] Adding amr claim with value: external
2019-07-01 09:51:12.107 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 09:51:12.118 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-07-01 09:51:12.120 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 09:51:12.123 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:51:12.130 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 09:51:12.136 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:51:12.146 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 09:51:12.149 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 09:51:12.151 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 09:51:12.168 +02:00 [DBG] Start authorize callback request
2019-07-01 09:51:12.174 +02:00 [DBG] User in authorize request: 8f26a435f5ef4eccbb1d0d7243e3709bffea64e295016243d219fc6948abae67
2019-07-01 09:51:12.178 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 09:51:12.180 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 09:51:12.182 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 09:51:12.188 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"8f26a435f5ef4eccbb1d0d7243e3709bffea64e295016243d219fc6948abae67","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAI4zGHj99CqU4QKNAw-gp7ZOE8Qp_6kFoRhNp7f_ArQhRGXcH7cY_roZZET54Y2UmwzRA-XObEj12YbDzzsmR_xdVrT7aKISS3N-eaqBEFZP5v03D2ZwKKnq-5Lth3dF00O1r2NPv-Wvaz7RxnjxEtMvUTXeC5zy6omXb3gB-FrePrmIIVJCvroWGLhDb4txk-iEUxBEoYIjxOVmbwXCxvWpVi6AQIKA2fraZfd4Rp7sARxBuVPmMsWotHUFocNOeYRMEVyRH_C4qpOtoSKSs3nkKcS_2rAiaSZy_SZuq5CA","UiLocales":null,"Nonce":"636975642338534374.ZDcwZTI0ZGMtOGI0Ni00ZmM5LWE5ZWMtODMyZWNhY2NjNDA1MjY1ZjIzODgtNWE4OS00MzliLWI4NjAtZjA3Y2Y1NmFjZjJk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"2534db949d190a957788a88f18b891f5","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975642338534374.ZDcwZTI0ZGMtOGI0Ni00ZmM5LWE5ZWMtODMyZWNhY2NjNDA1MjY1ZjIzODgtNWE4OS00MzliLWI4NjAtZjA3Y2Y1NmFjZjJk","state":"CfDJ8BST-4sCksNFlez27BzseIAI4zGHj99CqU4QKNAw-gp7ZOE8Qp_6kFoRhNp7f_ArQhRGXcH7cY_roZZET54Y2UmwzRA-XObEj12YbDzzsmR_xdVrT7aKISS3N-eaqBEFZP5v03D2ZwKKnq-5Lth3dF00O1r2NPv-Wvaz7RxnjxEtMvUTXeC5zy6omXb3gB-FrePrmIIVJCvroWGLhDb4txk-iEUxBEoYIjxOVmbwXCxvWpVi6AQIKA2fraZfd4Rp7sARxBuVPmMsWotHUFocNOeYRMEVyRH_C4qpOtoSKSs3nkKcS_2rAiaSZy_SZuq5CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 09:51:12.224 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 09:51:14.721 +02:00 [ERR] Failed executing DbCommand (536ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
2019-07-01 09:51:15.787 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
2019-07-01 09:51:15.929 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
2019-07-01 09:51:16.922 +02:00 [FTL] Unhandled exception: Invalid object name 'PersistedGrants'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 59
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 69
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
2019-07-01 09:51:17.321 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAsync(String key) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\PersistedGrantStore.cs:line 78
   at IdentityServer4.Stores.DefaultGrantStore`1.GetItemAsync(String key) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\DefaultGrantStore.cs:line 91
   at IdentityServer4.Services.DefaultConsentService.RequiresConsentAsync(ClaimsPrincipal subject, Client client, IEnumerable`1 scopes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Services\Default\DefaultConsentService.cs:line 97
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessConsentAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 240
   at IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator.ProcessInteractionAsync(ValidatedAuthorizeRequest request, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\AuthorizeInteractionResponseGenerator.cs:line 89
   at IdentityServer4.Endpoints.AuthorizeEndpointBase.ProcessAuthorizeRequestAsync(NameValueCollection parameters, ClaimsPrincipal user, ConsentResponse consent) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeEndpointBase.cs:line 81
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 59
   at IdentityServer4.Endpoints.AuthorizeCallbackEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\AuthorizeCallbackEndpoint.cs:line 69
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 70
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:86730be1-53ab-4484-8803-3a4652a42ae2
Error Number:208,State:1,Class:16
2019-07-01 10:06:44.391 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 10:06:44.466 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 10:06:44.467 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 10:06:44.468 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 10:06:44.469 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 10:06:44.470 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 10:06:44.471 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 10:06:44.751 +02:00 [DBG] Starting grant removal
2019-07-01 10:07:57.705 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 10:07:57.710 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 10:07:57.713 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 10:07:57.715 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 10:07:57.716 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 10:07:57.720 +02:00 [DBG] Error Url: /home/error
2019-07-01 10:07:57.720 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 10:07:57.777 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 10:07:57.796 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 10:07:57.800 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 10:07:57.810 +02:00 [DBG] Start discovery request
2019-07-01 10:07:58.196 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 10:07:58.204 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 10:07:58.207 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 10:07:58.214 +02:00 [DBG] Start key discovery request
2019-07-01 10:07:58.352 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 10:07:58.369 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 10:07:58.371 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 10:07:58.391 +02:00 [DBG] Start authorize request
2019-07-01 10:07:58.409 +02:00 [DBG] No user present in authorize request
2019-07-01 10:07:58.414 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:07:58.434 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:07:58.472 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:07:58.498 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","UiLocales":null,"Nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","state":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:07:58.563 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 10:07:59.017 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:07:59.021 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:07:59.025 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:07:59.038 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:04.587 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 10:08:08.888 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 10:08:09.012 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:08:09.016 +02:00 [DBG] Adding amr claim with value: external
2019-07-01 10:08:09.027 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:08:09.043 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-07-01 10:08:09.047 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:08:09.049 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:09.053 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:08:09.062 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:09.104 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 10:08:09.112 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 10:08:09.114 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 10:08:09.125 +02:00 [DBG] Start authorize callback request
2019-07-01 10:08:09.133 +02:00 [DBG] User in authorize request: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:08:09.136 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:08:09.139 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:09.145 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:08:09.148 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","UiLocales":null,"Nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"8df6ece47dfa47b04e18fe78d7ac54d1","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","state":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:08:09.184 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 10:08:09.281 +02:00 [DBG] eJmDsIckBEgt68iLsC1V3KdTl0g0ZqpugFjh9PzDqGo= found in database: false
2019-07-01 10:08:09.287 +02:00 [DBG] user_consent grant with value: SampleClient|5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f not found in store.
2019-07-01 10:08:09.292 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 10:08:09.294 +02:00 [INF] Showing consent: User has not yet consented
2019-07-01 10:08:09.342 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:08:09.343 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:09.347 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:08:09.350 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:20.563 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-01 10:08:20.666 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:08:20.667 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:20.677 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:08:20.718 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:20.771 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 10:08:20.776 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 10:08:20.778 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 10:08:20.782 +02:00 [DBG] Start authorize callback request
2019-07-01 10:08:20.793 +02:00 [DBG] User in authorize request: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:08:20.797 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:08:20.799 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:20.802 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:08:20.806 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","UiLocales":null,"Nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"8df6ece47dfa47b04e18fe78d7ac54d1","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","state":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:08:20.849 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 10:08:20.855 +02:00 [DBG] eJmDsIckBEgt68iLsC1V3KdTl0g0ZqpugFjh9PzDqGo= found in database: false
2019-07-01 10:08:20.859 +02:00 [DBG] user_consent grant with value: SampleClient|5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f not found in store.
2019-07-01 10:08:20.865 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 10:08:20.871 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-01 10:08:20.877 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-01 10:08:20.883 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:08:20.921 +02:00 [DBG] eJmDsIckBEgt68iLsC1V3KdTl0g0ZqpugFjh9PzDqGo= not found in database
2019-07-01 10:08:21.068 +02:00 [DBG] Creating Implicit Flow response.
2019-07-01 10:08:21.083 +02:00 [DBG] Getting claims for identity token for subject: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f and client: SampleClient
2019-07-01 10:08:21.094 +02:00 [DBG] Get profile called for subject 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-07-01 10:08:21.107 +02:00 [DBG] Issued claims: ["name"]
2019-07-01 10:08:21.528 +02:00 [INF] Authorize endpoint response
{"SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICAdF6sTO0FBINZ4NieLyNjECmptc4DQ_kUPt5UE4w1_n4PeCGDxCcROxI9awsp5-kmhjod0g3JuGoMGiJ5m1Wjv5TXGjiuSKWdlmT-aLT1PAGPpzNbCjJQ60aMw2atKapThO3jsiqbAIRbaK4_Pn6ixZp6SmAwkUpDa4kVoIg1Qipnjvjy7NZMgiBRnueShXsqMEDpn2EOlHYudxVO5zndl-I6gSD6Qj9PtAYr3qQ8j6-1yVKUhhgXx2RC32ZFKtmjrEuFAGQiAsoLHfMWZPDCM6oJi8pYRUBKMKev5WcnRw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-01 10:08:21.560 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:08:21.561 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:08:51.266 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-01 10:08:51.276 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-01 10:08:51.280 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-01 10:08:51.293 +02:00 [DBG] Processing signout request for 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:08:51.302 +02:00 [DBG] Start end session request validation
2019-07-01 10:08:51.315 +02:00 [DBG] Start identity token validation
2019-07-01 10:08:51.332 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:51.336 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-01 10:08:51.383 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-07-01 10:08:51.385 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-01 10:08:51.393 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561968501,"exp":1561968801,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636975652782566382.MTQ4NjFjYzAtMGNmYy00ZmRkLTg5ODgtMTg1ODQ2MmNiZDExNTI1NTcyZmYtZjU5YS00NmVlLWJjOTUtNDdhNWY5ZGE0Njhi","iat":1561968501,"sid":"8df6ece47dfa47b04e18fe78d7ac54d1","sub":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","auth_time":1561968489,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-07-01 10:08:51.411 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICdHTybkaRTKw3nTNgLl7_l_utuJ59GN-RkxJ97ldCja2HYfWRTS-B2xQOXG_v0p5A9fY5U1AEodSAzWTxGFYqmOs-rqc_edPt__VybMyjwppTUaP212QTWwZ5POwlQmvuoJ6vMEKuG3Pzrp4JCSai5","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICdHTybkaRTKw3nTNgLl7_l_utuJ59GN-RkxJ97ldCja2HYfWRTS-B2xQOXG_v0p5A9fY5U1AEodSAzWTxGFYqmOs-rqc_edPt__VybMyjwppTUaP212QTWwZ5POwlQmvuoJ6vMEKuG3Pzrp4JCSai5","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-01 10:08:51.427 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-01 10:08:51.485 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-07-01 10:08:51.699 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-01 10:08:51.712 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-01 10:08:51.714 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-01 10:08:51.729 +02:00 [DBG] Processing signout callback request
2019-07-01 10:08:51.749 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:08:51.753 +02:00 [DBG] No client front-channel logout URLs
2019-07-01 10:08:51.759 +02:00 [DBG] No client back-channel logout URLs
2019-07-01 10:08:51.763 +02:00 [INF] Successful signout callback.
2019-07-01 10:08:51.766 +02:00 [DBG] No client front-channel iframe urls
2019-07-01 10:08:51.768 +02:00 [DBG] No client back-channel iframe urls
2019-07-01 10:09:54.233 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 10:09:54.246 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 10:09:54.251 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 10:09:54.256 +02:00 [DBG] Start authorize request
2019-07-01 10:09:54.259 +02:00 [DBG] No user present in authorize request
2019-07-01 10:09:54.261 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:09:54.262 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:54.266 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:09:54.276 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICwgimDurcbQWTmZu4CxCFXfHLjIeV3NXEOR_-DUssVW4Y2CrbTM-GsBOSPXDwI0JJDHoINJMC_oluWNrDes3xgFCf4_Ax1VnSPfaP9wUeZN9Rk5OZJGx7qijUWOz8r1w1tIIA0qKTa4mSMf9vUuPU-bE7e3AtIO00PASkPTuD3MNlLZe8sJvwwUiSMx2Dsm7NKQDEpoGWBvLwPmfEW4_Z-KIU7TrbU9HaCEHE0wT9ihaNMxJzFmYPJVySezPnR0bPiNOJU8_JAHGRlhLCLIQoBNrzSFRe12sM5l36v_0nKzQ","UiLocales":null,"Nonce":"636975653942101422.NjFkN2NkMTEtMGZmYi00Y2E5LWFhM2YtNGM0NDNjYTVkMmVmNzFjNTBmNWMtMDc1ZC00Yzk1LTlkMDEtMzAxYTI1Mjg1NjJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975653942101422.NjFkN2NkMTEtMGZmYi00Y2E5LWFhM2YtNGM0NDNjYTVkMmVmNzFjNTBmNWMtMDc1ZC00Yzk1LTlkMDEtMzAxYTI1Mjg1NjJl","state":"CfDJ8BST-4sCksNFlez27BzseICwgimDurcbQWTmZu4CxCFXfHLjIeV3NXEOR_-DUssVW4Y2CrbTM-GsBOSPXDwI0JJDHoINJMC_oluWNrDes3xgFCf4_Ax1VnSPfaP9wUeZN9Rk5OZJGx7qijUWOz8r1w1tIIA0qKTa4mSMf9vUuPU-bE7e3AtIO00PASkPTuD3MNlLZe8sJvwwUiSMx2Dsm7NKQDEpoGWBvLwPmfEW4_Z-KIU7TrbU9HaCEHE0wT9ihaNMxJzFmYPJVySezPnR0bPiNOJU8_JAHGRlhLCLIQoBNrzSFRe12sM5l36v_0nKzQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:09:54.311 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 10:09:54.328 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:09:54.329 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:54.336 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:09:54.341 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:56.546 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 10:09:57.562 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 10:09:57.573 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:09:57.576 +02:00 [DBG] Adding amr claim with value: external
2019-07-01 10:09:57.579 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:09:57.590 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-07-01 10:09:57.595 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:09:57.597 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:57.602 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:09:57.607 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:57.620 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 10:09:57.623 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 10:09:57.637 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 10:09:57.643 +02:00 [DBG] Start authorize callback request
2019-07-01 10:09:57.646 +02:00 [DBG] User in authorize request: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:09:57.653 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:09:57.654 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:09:57.658 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:09:57.660 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICwgimDurcbQWTmZu4CxCFXfHLjIeV3NXEOR_-DUssVW4Y2CrbTM-GsBOSPXDwI0JJDHoINJMC_oluWNrDes3xgFCf4_Ax1VnSPfaP9wUeZN9Rk5OZJGx7qijUWOz8r1w1tIIA0qKTa4mSMf9vUuPU-bE7e3AtIO00PASkPTuD3MNlLZe8sJvwwUiSMx2Dsm7NKQDEpoGWBvLwPmfEW4_Z-KIU7TrbU9HaCEHE0wT9ihaNMxJzFmYPJVySezPnR0bPiNOJU8_JAHGRlhLCLIQoBNrzSFRe12sM5l36v_0nKzQ","UiLocales":null,"Nonce":"636975653942101422.NjFkN2NkMTEtMGZmYi00Y2E5LWFhM2YtNGM0NDNjYTVkMmVmNzFjNTBmNWMtMDc1ZC00Yzk1LTlkMDEtMzAxYTI1Mjg1NjJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"fd851978bdfb07f72173f69cea6dd67c","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975653942101422.NjFkN2NkMTEtMGZmYi00Y2E5LWFhM2YtNGM0NDNjYTVkMmVmNzFjNTBmNWMtMDc1ZC00Yzk1LTlkMDEtMzAxYTI1Mjg1NjJl","state":"CfDJ8BST-4sCksNFlez27BzseICwgimDurcbQWTmZu4CxCFXfHLjIeV3NXEOR_-DUssVW4Y2CrbTM-GsBOSPXDwI0JJDHoINJMC_oluWNrDes3xgFCf4_Ax1VnSPfaP9wUeZN9Rk5OZJGx7qijUWOz8r1w1tIIA0qKTa4mSMf9vUuPU-bE7e3AtIO00PASkPTuD3MNlLZe8sJvwwUiSMx2Dsm7NKQDEpoGWBvLwPmfEW4_Z-KIU7TrbU9HaCEHE0wT9ihaNMxJzFmYPJVySezPnR0bPiNOJU8_JAHGRlhLCLIQoBNrzSFRe12sM5l36v_0nKzQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:09:57.721 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 10:09:57.758 +02:00 [DBG] eJmDsIckBEgt68iLsC1V3KdTl0g0ZqpugFjh9PzDqGo= found in database: true
2019-07-01 10:09:57.764 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-01 10:09:57.768 +02:00 [DBG] Creating Implicit Flow response.
2019-07-01 10:09:57.772 +02:00 [DBG] Getting claims for identity token for subject: 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f and client: SampleClient
2019-07-01 10:09:57.775 +02:00 [DBG] Get profile called for subject 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-07-01 10:09:57.784 +02:00 [DBG] Issued claims: ["name"]
2019-07-01 10:09:57.792 +02:00 [INF] Authorize endpoint response
{"SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICwgimDurcbQWTmZu4CxCFXfHLjIeV3NXEOR_-DUssVW4Y2CrbTM-GsBOSPXDwI0JJDHoINJMC_oluWNrDes3xgFCf4_Ax1VnSPfaP9wUeZN9Rk5OZJGx7qijUWOz8r1w1tIIA0qKTa4mSMf9vUuPU-bE7e3AtIO00PASkPTuD3MNlLZe8sJvwwUiSMx2Dsm7NKQDEpoGWBvLwPmfEW4_Z-KIU7TrbU9HaCEHE0wT9ihaNMxJzFmYPJVySezPnR0bPiNOJU8_JAHGRlhLCLIQoBNrzSFRe12sM5l36v_0nKzQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-01 10:09:57.803 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:09:57.804 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:10:06.078 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-01 10:10:06.084 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-01 10:10:06.096 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-01 10:10:06.098 +02:00 [DBG] Processing signout request for 5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f
2019-07-01 10:10:06.103 +02:00 [DBG] Start end session request validation
2019-07-01 10:10:06.106 +02:00 [DBG] Start identity token validation
2019-07-01 10:10:06.109 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:10:06.113 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-01 10:10:06.126 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-07-01 10:10:06.127 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-01 10:10:06.130 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561968597,"exp":1561968897,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636975653942101422.NjFkN2NkMTEtMGZmYi00Y2E5LWFhM2YtNGM0NDNjYTVkMmVmNzFjNTBmNWMtMDc1ZC00Yzk1LTlkMDEtMzAxYTI1Mjg1NjJl","iat":1561968597,"sid":"fd851978bdfb07f72173f69cea6dd67c","sub":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","auth_time":1561968597,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-07-01 10:10:06.156 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"5f31a8a9198012284d0a051886967ffecb745b86a6c648cef510c001709d9f5f","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDi4K1HpnfjSwRrgZU5kkihXJkzDNB5S7tUArew8dcsxZuPivYRN43T8iXwQWsj2q3DcW8hpU8baGCNUTdbBX5xPULeev9MZU4oq6gDdaj6Qf043c4DLVx-hhN-C9z-e-d50QPy7xDsUJ-seR45G-DL","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIDi4K1HpnfjSwRrgZU5kkihXJkzDNB5S7tUArew8dcsxZuPivYRN43T8iXwQWsj2q3DcW8hpU8baGCNUTdbBX5xPULeev9MZU4oq6gDdaj6Qf043c4DLVx-hhN-C9z-e-d50QPy7xDsUJ-seR45G-DL","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-01 10:10:06.179 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-01 10:10:06.199 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-07-01 10:10:06.267 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-01 10:10:06.274 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-01 10:10:06.277 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-01 10:10:06.283 +02:00 [DBG] Processing signout callback request
2019-07-01 10:10:06.285 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:10:06.290 +02:00 [DBG] No client front-channel logout URLs
2019-07-01 10:10:06.291 +02:00 [DBG] No client back-channel logout URLs
2019-07-01 10:10:06.295 +02:00 [INF] Successful signout callback.
2019-07-01 10:10:06.297 +02:00 [DBG] No client front-channel iframe urls
2019-07-01 10:10:06.301 +02:00 [DBG] No client back-channel iframe urls
2019-07-01 10:27:33.284 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 10:27:33.372 +02:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-07-01 10:27:33.373 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-07-01 10:27:33.374 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-07-01 10:27:33.374 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-07-01 10:27:33.375 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-07-01 10:27:33.375 +02:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-07-01 10:27:33.576 +02:00 [DBG] Starting grant removal
2019-07-01 10:27:59.950 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 10:27:59.957 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 10:27:59.960 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 10:27:59.964 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 10:27:59.966 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 10:27:59.971 +02:00 [DBG] Error Url: /home/error
2019-07-01 10:27:59.973 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 10:28:00.044 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 10:28:00.055 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 10:28:00.060 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 10:28:00.075 +02:00 [DBG] Start discovery request
2019-07-01 10:28:00.511 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 10:28:00.530 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 10:28:00.540 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 10:28:00.556 +02:00 [DBG] Start key discovery request
2019-07-01 10:28:00.861 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 10:28:00.882 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 10:28:00.890 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 10:28:00.907 +02:00 [DBG] Start authorize request
2019-07-01 10:28:00.936 +02:00 [DBG] No user present in authorize request
2019-07-01 10:28:00.945 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:28:00.985 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:01.062 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:28:01.118 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","UiLocales":null,"Nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","state":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:28:01.189 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 10:28:01.669 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:28:01.671 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:01.676 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:28:01.689 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:51.780 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 10:28:56.136 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 10:28:56.237 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:28:56.243 +02:00 [DBG] Adding amr claim with value: external
2019-07-01 10:28:56.251 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:28:56.269 +02:00 [INF] AuthenticationScheme: idsrv.external signed out.
2019-07-01 10:28:56.277 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:28:56.278 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:56.283 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:28:56.291 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:56.317 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 10:28:56.332 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 10:28:56.335 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 10:28:56.346 +02:00 [DBG] Start authorize callback request
2019-07-01 10:28:56.354 +02:00 [DBG] User in authorize request: fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71
2019-07-01 10:28:56.358 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:28:56.361 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:56.367 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:28:56.375 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","UiLocales":null,"Nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1f6036e05212cf7d4ca7e2838e1c9c0e","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","state":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:28:56.420 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 10:28:56.516 +02:00 [DBG] kyFTosKcuCyOsTDXKppdcLeUx35GSFpcPvvJceiT+K4= found in database: false
2019-07-01 10:28:56.524 +02:00 [DBG] user_consent grant with value: SampleClient|fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71 not found in store.
2019-07-01 10:28:56.528 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 10:28:56.530 +02:00 [INF] Showing consent: User has not yet consented
2019-07-01 10:28:56.577 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:28:56.579 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:28:56.586 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:28:56.595 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:07.782 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-01 10:29:07.865 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:29:07.866 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:07.875 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:29:07.904 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:07.916 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-01 10:29:07.921 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-01 10:29:07.929 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-01 10:29:07.933 +02:00 [DBG] Start authorize callback request
2019-07-01 10:29:07.943 +02:00 [DBG] User in authorize request: fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71
2019-07-01 10:29:07.946 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 10:29:07.948 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:07.953 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 10:29:07.960 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","UiLocales":null,"Nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1f6036e05212cf7d4ca7e2838e1c9c0e","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","state":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 10:29:08.006 +02:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-07-01 10:29:08.012 +02:00 [DBG] kyFTosKcuCyOsTDXKppdcLeUx35GSFpcPvvJceiT+K4= found in database: false
2019-07-01 10:29:08.015 +02:00 [DBG] user_consent grant with value: SampleClient|fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71 not found in store.
2019-07-01 10:29:08.018 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-01 10:29:08.027 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-01 10:29:08.033 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-01 10:29:08.041 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71
2019-07-01 10:29:08.071 +02:00 [DBG] kyFTosKcuCyOsTDXKppdcLeUx35GSFpcPvvJceiT+K4= not found in database
2019-07-01 10:29:08.514 +02:00 [DBG] Creating Implicit Flow response.
2019-07-01 10:29:08.527 +02:00 [DBG] Getting claims for identity token for subject: fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71 and client: SampleClient
2019-07-01 10:29:08.536 +02:00 [DBG] Get profile called for subject fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71 from client MVC Client with claim types ["name","family_name","given_name","middle_name","nickname","preferred_username","profile","picture","website","gender","birthdate","zoneinfo","locale","updated_at"] via ClaimsProviderIdentityToken
2019-07-01 10:29:08.552 +02:00 [DBG] Issued claims: ["name"]
2019-07-01 10:29:08.685 +02:00 [INF] Authorize endpoint response
{"SubjectId":"fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICX1bh1-2TppnqaXQ-qaBGfUUXZ6Nt_UtDbHZwxs_h0CdsHjbwwfzdJ9O_GXIM_ovB_EEEfMtgOzEf3E_VVYHz3odImfBLPtCvq7yCgvrkxeTpTrzVa2_yEeeMhoXHz1GyA6vrWlKRcGYhE6Wt8N_tU9qN2eODCponeQjJoOHJupemOzIQ5zfu9R6ZnojTyyuRUWRkfRR6tRPyEcEY_TYfaNHwqdg5xdSVbnUdrJ7aA7TeMi3VEkWS-AjC4MrbmQWq_2d_Bd8qP-Uq4Lnw0YiAJpVPIT9JigwR0GSLgiEpkZg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-01 10:29:08.765 +02:00 [DBG] Augmenting SignInContext
2019-07-01 10:29:08.771 +02:00 [INF] AuthenticationScheme: idsrv signed in.
2019-07-01 10:29:12.505 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-01 10:29:12.517 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-01 10:29:12.522 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-01 10:29:12.538 +02:00 [DBG] Processing signout request for fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71
2019-07-01 10:29:12.552 +02:00 [DBG] Start end session request validation
2019-07-01 10:29:12.568 +02:00 [DBG] Start identity token validation
2019-07-01 10:29:12.597 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:12.606 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-01 10:29:12.694 +02:00 [DBG] IsActive called from: IdentityTokenValidation
2019-07-01 10:29:12.695 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-01 10:29:12.709 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1561969748,"exp":1561970048,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636975664806269620.YmM0ODUzMjEtZWVjNS00ZTA1LThiYjYtOGEwZWZjOTVjMDc4YWIxZDZkYmUtNjI5Mi00ODdkLWI5MTQtZTA2ZmQ1MzRhODEy","iat":1561969748,"sid":"1f6036e05212cf7d4ca7e2838e1c9c0e","sub":"fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71","auth_time":1561969736,"idp":"Microsoft","name":"Fungai Mashozhera","amr":"external"},"$type":"TokenValidationLog"}
2019-07-01 10:29:12.758 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"fc923ebe83d2b830bf5fbd61dd8c3f9ec3d5defdc49f52ce953183de8eebdc71","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIC39iHlXX0xze3wDvqQiKIW5Q2BBnF7d3RXBkzntkwhrIZHp7YNcLm1ov7AOOL2-ye2Kx09A_JymC9U-phVFRGLDC4fwrNS8UXPICwzYdgDdPnL6LXzn2sI_iVhfZd7zsyOaoveSDkx9NqAWbTyVc2F","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIC39iHlXX0xze3wDvqQiKIW5Q2BBnF7d3RXBkzntkwhrIZHp7YNcLm1ov7AOOL2-ye2Kx09A_JymC9U-phVFRGLDC4fwrNS8UXPICwzYdgDdPnL6LXzn2sI_iVhfZd7zsyOaoveSDkx9NqAWbTyVc2F","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-01 10:29:12.800 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-01 10:29:12.940 +02:00 [INF] AuthenticationScheme: idsrv signed out.
2019-07-01 10:29:13.050 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-01 10:29:13.079 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-01 10:29:13.083 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-01 10:29:13.099 +02:00 [DBG] Processing signout callback request
2019-07-01 10:29:13.120 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:13.126 +02:00 [DBG] No client front-channel logout URLs
2019-07-01 10:29:13.127 +02:00 [DBG] No client back-channel logout URLs
2019-07-01 10:29:13.136 +02:00 [INF] Successful signout callback.
2019-07-01 10:29:13.140 +02:00 [DBG] No client front-channel iframe urls
2019-07-01 10:29:13.143 +02:00 [DBG] No client back-channel iframe urls
2019-07-01 10:29:14.857 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-01 10:29:14.864 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-01 10:29:14.868 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-01 10:29:14.876 +02:00 [DBG] Processing signout callback request
2019-07-01 10:29:14.881 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:14.892 +02:00 [DBG] No client front-channel logout URLs
2019-07-01 10:29:14.905 +02:00 [DBG] No client back-channel logout URLs
2019-07-01 10:29:14.911 +02:00 [INF] Successful signout callback.
2019-07-01 10:29:14.921 +02:00 [DBG] No client front-channel iframe urls
2019-07-01 10:29:14.922 +02:00 [DBG] No client back-channel iframe urls
2019-07-01 10:29:54.471 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-01 10:29:54.478 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-01 10:29:54.483 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-01 10:29:54.492 +02:00 [DBG] Processing signout callback request
2019-07-01 10:29:54.495 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 10:29:54.504 +02:00 [DBG] No client front-channel logout URLs
2019-07-01 10:29:54.508 +02:00 [DBG] No client back-channel logout URLs
2019-07-01 10:29:54.510 +02:00 [INF] Successful signout callback.
2019-07-01 10:29:54.513 +02:00 [DBG] No client front-channel iframe urls
2019-07-01 10:29:54.516 +02:00 [DBG] No client back-channel iframe urls
2019-07-04 13:09:28.289 +02:00 [ERR] Failed executing DbCommand (1,043ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [DeviceCode] nvarchar(200) NOT NULL,
    [UserCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'DeviceCodes' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:ddcc8633-2001-4b70-9e7e-9664e559a7d7
Error Number:2714,State:6,Class:16
