2019-07-01 11:49:06.695 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 11:49:06.902 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 11:49:06.903 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 11:49:06.904 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 11:49:06.904 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 11:49:06.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 11:49:06.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 11:49:08.167 +02:00 [DBG] Starting grant removal
2019-07-01 11:49:09.680 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 11:49:09.687 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 11:49:09.688 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 11:49:09.691 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 11:49:09.691 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 11:49:09.691 +02:00 [DBG] Error Url: /home/error
2019-07-01 11:49:09.692 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 11:51:02.574 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 11:51:02.701 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 11:51:02.704 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 11:51:02.706 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 11:51:02.707 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 11:51:02.715 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 11:51:02.716 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 11:51:03.221 +02:00 [DBG] Starting grant removal
2019-07-01 11:51:11.124 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 11:51:11.131 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 11:51:11.136 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 11:51:11.141 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 11:51:11.145 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 11:51:11.147 +02:00 [DBG] Error Url: /home/error
2019-07-01 11:51:11.148 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 11:52:18.164 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 11:52:18.200 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 11:52:18.204 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 11:52:18.215 +02:00 [DBG] Start discovery request
2019-07-01 11:52:19.855 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 11:52:20.678 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 11:52:20.684 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 11:52:20.689 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 11:52:20.698 +02:00 [DBG] Start key discovery request
2019-07-01 11:52:21.038 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 11:52:21.048 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 11:52:21.051 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 11:52:21.069 +02:00 [DBG] Start authorize request
2019-07-01 11:52:21.100 +02:00 [DBG] No user present in authorize request
2019-07-01 11:52:21.111 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 11:52:21.946 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:52:21.983 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:52:22.152 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:52:22.275 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:52:22.294 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:52:22.299 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:52:22.312 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 11:52:22.345 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICd1nWZs1kpHr4DJcYoKGWjCLgK3JWwyFtqp408vrd85kpLRLJq2PBX7paxq2imEPkCKHyozpWk_AMAfaJ1EUtm4CFNEUbx-cIBm27ypgeWcjrrD3rZRTrLwRaLVUASTz29zMNvr824E4qpVR6VjIm32BjA3TIzIcZreMrArnpJQ6XctF02Qp_kWXfAcwG5fexNOX-0ByGOHhUv_Gx-ABRZAH6q0BGaEak49EUwZNMPBYnwDSIaN6J_vrwb5VHrFWCp1rQ4ck7fQ9Bik4Lmt2ZB4YOEFL_vTqz5Quicf6Dr7w","UiLocales":null,"Nonce":"636975715408145701.MDljMTJmZTAtN2Y1My00ODMyLTgyN2YtMmI3ZTFkZWUyYTFlMGY2MGMxNmItODAxYi00MTQ4LTgzYmYtNTNmYjM4N2Q5Zjlh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975715408145701.MDljMTJmZTAtN2Y1My00ODMyLTgyN2YtMmI3ZTFkZWUyYTFlMGY2MGMxNmItODAxYi00MTQ4LTgzYmYtNTNmYjM4N2Q5Zjlh","state":"CfDJ8BST-4sCksNFlez27BzseICd1nWZs1kpHr4DJcYoKGWjCLgK3JWwyFtqp408vrd85kpLRLJq2PBX7paxq2imEPkCKHyozpWk_AMAfaJ1EUtm4CFNEUbx-cIBm27ypgeWcjrrD3rZRTrLwRaLVUASTz29zMNvr824E4qpVR6VjIm32BjA3TIzIcZreMrArnpJQ6XctF02Qp_kWXfAcwG5fexNOX-0ByGOHhUv_Gx-ABRZAH6q0BGaEak49EUwZNMPBYnwDSIaN6J_vrwb5VHrFWCp1rQ4ck7fQ9Bik4Lmt2ZB4YOEFL_vTqz5Quicf6Dr7w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 11:52:22.430 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 11:52:22.571 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 11:52:22.583 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:52:22.586 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:52:22.596 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:52:22.602 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:52:22.612 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:52:22.617 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:52:22.623 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 11:52:22.648 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:52:22.649 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:52:27.543 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 11:52:32.934 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 11:52:35.081 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Quickstart\Account\ExternalController.cs:line 96
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-01 11:54:29.153 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 11:54:29.389 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 11:54:29.390 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 11:54:29.394 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 11:54:29.396 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 11:54:29.397 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 11:54:29.398 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 11:54:30.012 +02:00 [DBG] Starting grant removal
2019-07-01 11:54:36.923 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 11:54:36.931 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 11:54:36.936 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 11:54:36.938 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 11:54:36.940 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 11:54:36.943 +02:00 [DBG] Error Url: /home/error
2019-07-01 11:54:36.947 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 11:55:32.158 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 11:55:32.198 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 11:55:32.203 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 11:55:32.211 +02:00 [DBG] Start discovery request
2019-07-01 11:55:33.760 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 11:55:34.182 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 11:55:34.189 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 11:55:34.192 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 11:55:34.206 +02:00 [DBG] Start key discovery request
2019-07-01 11:55:34.432 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 11:55:34.448 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 11:55:34.456 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 11:55:34.465 +02:00 [DBG] Start authorize request
2019-07-01 11:55:34.489 +02:00 [DBG] No user present in authorize request
2019-07-01 11:55:34.499 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 11:55:35.290 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:55:35.310 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:55:35.426 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:55:35.536 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:55:35.556 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:55:35.562 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:55:35.576 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 11:55:35.605 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIC7AZdiKKxZB50qTEqfb_lQTQyIa-t48EBQbnNrU8LN3XbBNIeo52L868emIvxLhp1EmGUKIMwMhiYc-l3GPj1okl6kzdrQlfJsrufvA-CIw-SszNo3YjgHmTzrMyaTZPqqHkONMGnKIHnvqrrIKwofqmlf3c0s5JalQJwtqS8T5-hwcKDiuQXnKwNqJyXibr-0IvkGUmc3ILXAVaAM4iRqt7qVC8y7fGE_wYwcZoWIXhvaCqpceAa-pl8bbFcC-Dxdh8mQ7Bc5fjztA4AYA-6IffIqpWjDAMtkDHyPVc2J1w","UiLocales":null,"Nonce":"636975717342827837.OGQ0ZTgwOGItMTJhYS00ODNhLWJjNmYtMGRjYWZkZTM4OWIzYTRiOTRiY2EtMzM0YS00YTdkLTg3ZDQtYjFmYWY1MzYwODNh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975717342827837.OGQ0ZTgwOGItMTJhYS00ODNhLWJjNmYtMGRjYWZkZTM4OWIzYTRiOTRiY2EtMzM0YS00YTdkLTg3ZDQtYjFmYWY1MzYwODNh","state":"CfDJ8BST-4sCksNFlez27BzseIC7AZdiKKxZB50qTEqfb_lQTQyIa-t48EBQbnNrU8LN3XbBNIeo52L868emIvxLhp1EmGUKIMwMhiYc-l3GPj1okl6kzdrQlfJsrufvA-CIw-SszNo3YjgHmTzrMyaTZPqqHkONMGnKIHnvqrrIKwofqmlf3c0s5JalQJwtqS8T5-hwcKDiuQXnKwNqJyXibr-0IvkGUmc3ILXAVaAM4iRqt7qVC8y7fGE_wYwcZoWIXhvaCqpceAa-pl8bbFcC-Dxdh8mQ7Bc5fjztA4AYA-6IffIqpWjDAMtkDHyPVc2J1w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 11:55:35.678 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 11:55:35.827 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 11:55:35.841 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:55:35.842 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:55:35.853 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:55:35.859 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:55:35.871 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 11:55:35.877 +02:00 [DBG] Found [] API scopes in database
2019-07-01 11:55:35.879 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 11:55:35.905 +02:00 [DBG] SampleClient found in database: true
2019-07-01 11:55:35.906 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 11:55:40.205 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 11:56:04.757 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 11:56:07.274 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Quickstart\Account\ExternalController.cs:line 96
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-01 12:00:10.432 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 12:00:10.571 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 12:00:10.576 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 12:00:10.580 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 12:00:10.582 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 12:00:10.585 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 12:00:10.589 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 12:00:11.088 +02:00 [DBG] Starting grant removal
2019-07-01 12:00:18.754 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 12:00:18.769 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 12:00:18.773 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 12:00:18.779 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 12:00:18.786 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 12:00:18.790 +02:00 [DBG] Error Url: /home/error
2019-07-01 12:00:18.796 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 12:00:52.574 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 12:00:52.657 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 12:00:52.672 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 12:00:52.691 +02:00 [DBG] Start discovery request
2019-07-01 12:00:54.749 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 12:00:55.319 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 12:00:55.346 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 12:00:55.356 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 12:00:55.372 +02:00 [DBG] Start key discovery request
2019-07-01 12:00:55.720 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 12:00:55.738 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 12:00:55.746 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 12:00:55.755 +02:00 [DBG] Start authorize request
2019-07-01 12:00:55.780 +02:00 [DBG] No user present in authorize request
2019-07-01 12:00:55.801 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:00:56.819 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:00:56.845 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:00:57.005 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:00:57.139 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:00:57.159 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:00:57.164 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:00:57.175 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:00:57.216 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseID67J25fgrm0pNBHw2oRsIH7dRYWnLsV9fuJULAYPJsX4mEEGyNRpmisJ-toTgZWT-JoK1L2C3hSRfqJQ1tHl2bCihbxHDK5ywuqjxJpgEI5bM0ZmlqREtyc40gSjduE0E1FcqEvLNXiuOXDlorrzoxTTFDB1qQ1VJDP33WKGu3HsjYnxqjbXtcHc9lWzHas6iIvhKJitvxkcoviFzb10ZVJabStIv1eVICTXMo64E1MO02Ay0iWYPURmSdKxzHG1J1XpxcW8x81fASZ53dlPd085VBH3vUzOKRnCWmxVLl-w","UiLocales":null,"Nonce":"636975720555124857.ZmIzMzk2MTItNjM4OC00ODBkLTk3YzYtMDg3ODg1YjhiMTBhMWQwZGZmMWUtN2UwNi00NzIyLWJlN2ItZTZmYzZjYzBiZmRh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975720555124857.ZmIzMzk2MTItNjM4OC00ODBkLTk3YzYtMDg3ODg1YjhiMTBhMWQwZGZmMWUtN2UwNi00NzIyLWJlN2ItZTZmYzZjYzBiZmRh","state":"CfDJ8BST-4sCksNFlez27BzseID67J25fgrm0pNBHw2oRsIH7dRYWnLsV9fuJULAYPJsX4mEEGyNRpmisJ-toTgZWT-JoK1L2C3hSRfqJQ1tHl2bCihbxHDK5ywuqjxJpgEI5bM0ZmlqREtyc40gSjduE0E1FcqEvLNXiuOXDlorrzoxTTFDB1qQ1VJDP33WKGu3HsjYnxqjbXtcHc9lWzHas6iIvhKJitvxkcoviFzb10ZVJabStIv1eVICTXMo64E1MO02Ay0iWYPURmSdKxzHG1J1XpxcW8x81fASZ53dlPd085VBH3vUzOKRnCWmxVLl-w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 12:00:57.273 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 12:00:57.451 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:00:57.564 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:00:57.566 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:00:57.579 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:00:57.586 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:00:57.603 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:00:57.613 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:00:57.616 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:00:57.650 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:00:57.652 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:01:07.338 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 12:01:39.957 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 12:01:42.480 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Quickstart\Account\ExternalController.cs:line 96
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-01 12:07:36.122 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 12:07:36.223 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 12:07:36.225 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 12:07:36.226 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 12:07:36.227 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 12:07:36.228 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 12:07:36.229 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 12:07:36.573 +02:00 [DBG] Starting grant removal
2019-07-01 12:07:44.229 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 12:07:44.295 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 12:07:44.353 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 12:07:44.389 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 12:07:44.474 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 12:07:44.507 +02:00 [DBG] Error Url: /home/error
2019-07-01 12:07:44.521 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 12:08:16.554 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 12:08:16.641 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 12:08:16.645 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 12:08:16.654 +02:00 [DBG] Start discovery request
2019-07-01 12:08:18.235 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 12:08:18.576 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 12:08:18.582 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 12:08:18.584 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 12:08:18.595 +02:00 [DBG] Start key discovery request
2019-07-01 12:08:18.920 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 12:08:18.936 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 12:08:18.940 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 12:08:18.953 +02:00 [DBG] Start authorize request
2019-07-01 12:08:18.974 +02:00 [DBG] No user present in authorize request
2019-07-01 12:08:18.987 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:08:19.698 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:08:19.714 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:08:19.834 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:08:19.929 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:08:19.949 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:08:19.956 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:08:19.968 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:08:20.005 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseID8gThgcTOFwljuDEhTh2tLo_3cyH--AEL2_7zS7l8omMZp7r_VzuiYc6MtQ3M58kD2-O-gEgFx-QcXao4aqhPhWKo5R5bIEYG3P-1VuF73iKhoIkf0wd2eIaPwBx36brkyj5HXEYQb6wBSXRxwu00VnVh7dz7EmfzuUMNFnbYGLR7nOiMh3dklki5KIM-KluQb09MvzIDITQcB9r3FNlRrFsQ8sdCewcAiVDnuGmBDb8R1G_E8gtm2h-p1jQDQ9CHXITIN4OfXCLHVBUlp0YHcq3AGjG2RckH3Sz0fKsW0jg","UiLocales":null,"Nonce":"636975724986972553.MTkwZWQ5ZmYtMmVhOS00NzBmLWE0ZjUtM2YzNmJiZTc5YjlhZmFiNjk3YzUtYjM3Zi00NTVkLThhZWItOWUzNzdlMjQ0NWJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975724986972553.MTkwZWQ5ZmYtMmVhOS00NzBmLWE0ZjUtM2YzNmJiZTc5YjlhZmFiNjk3YzUtYjM3Zi00NTVkLThhZWItOWUzNzdlMjQ0NWJl","state":"CfDJ8BST-4sCksNFlez27BzseID8gThgcTOFwljuDEhTh2tLo_3cyH--AEL2_7zS7l8omMZp7r_VzuiYc6MtQ3M58kD2-O-gEgFx-QcXao4aqhPhWKo5R5bIEYG3P-1VuF73iKhoIkf0wd2eIaPwBx36brkyj5HXEYQb6wBSXRxwu00VnVh7dz7EmfzuUMNFnbYGLR7nOiMh3dklki5KIM-KluQb09MvzIDITQcB9r3FNlRrFsQ8sdCewcAiVDnuGmBDb8R1G_E8gtm2h-p1jQDQ9CHXITIN4OfXCLHVBUlp0YHcq3AGjG2RckH3Sz0fKsW0jg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 12:08:20.046 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 12:08:20.176 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:08:20.196 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:08:20.198 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:08:20.205 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:08:20.212 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:08:20.218 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:08:20.222 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:08:20.224 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:08:20.243 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:08:20.244 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:08:24.069 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 12:08:29.975 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 12:08:32.414 +02:00 [ERR] Failed executing DbCommand (1,517ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:e0f25c89-8db0-4130-a058-3291c0b12cfc
Error Number:515,State:2,Class:16
2019-07-01 12:08:34.214 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-01 12:10:40.264 +02:00 [ERR] Failed executing DbCommand (555ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:e0f25c89-8db0-4130-a058-3291c0b12cfc
Error Number:515,State:2,Class:16
2019-07-01 12:10:41.599 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-01 12:11:51.360 +02:00 [ERR] Failed executing DbCommand (531ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:e0f25c89-8db0-4130-a058-3291c0b12cfc
Error Number:515,State:2,Class:16
2019-07-01 12:11:53.001 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-01 12:14:33.121 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 12:14:33.235 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 12:14:33.237 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 12:14:33.239 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 12:14:33.240 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 12:14:33.241 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 12:14:33.242 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 12:14:33.557 +02:00 [DBG] Starting grant removal
2019-07-01 12:14:39.473 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 12:14:39.495 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 12:14:39.505 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 12:14:39.516 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 12:14:39.523 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 12:14:39.533 +02:00 [DBG] Error Url: /home/error
2019-07-01 12:14:39.549 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 12:15:16.357 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 12:15:16.413 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 12:15:16.431 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 12:15:16.450 +02:00 [DBG] Start discovery request
2019-07-01 12:15:18.300 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 12:15:18.930 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 12:15:18.941 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 12:15:18.945 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 12:15:18.957 +02:00 [DBG] Start key discovery request
2019-07-01 12:15:19.526 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 12:15:19.560 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 12:15:19.597 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 12:15:19.641 +02:00 [DBG] Start authorize request
2019-07-01 12:15:19.675 +02:00 [DBG] No user present in authorize request
2019-07-01 12:15:19.772 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:15:21.030 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:15:21.094 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:15:21.294 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:15:21.456 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:15:21.524 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:15:21.541 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:15:21.555 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:15:21.592 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIC5JVuF7-9eOHEh1DaKzeBc4wu21HeJ9XLJacp5YTASEEr-5izlSQNXvS2inqC7wOcCKvgyKriz29RrRbn4fT5vsljwcMkmC8abCuEQzEaax7xPNZtJj-yCfSOIeFqkNsRsWsO74Y7vvkSjmwkseP4JDORr_0oOD_1C6qZuHhzJD3zPU9dsCKCIPRGBAHOitUDjOY7dv6LVCazIbpM2OqweRNfpkE5-2A0SqKrMtWnztbQSVmPgYwKybDgxfbQdHAchbGEt8Q0S5xvy6w4dxCE2JLGlbtvsuIN_Q4WfzyDC8A","UiLocales":null,"Nonce":"636975729190925158.YWNiOWY1ZjItMzUwNS00MWU0LTg4YTItYmVhMDM2ZmNhNTI4N2MwMmQ0ZTYtNzJiMy00NzIyLWJmMTgtOGRjOWI1MThmY2Fk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975729190925158.YWNiOWY1ZjItMzUwNS00MWU0LTg4YTItYmVhMDM2ZmNhNTI4N2MwMmQ0ZTYtNzJiMy00NzIyLWJmMTgtOGRjOWI1MThmY2Fk","state":"CfDJ8BST-4sCksNFlez27BzseIC5JVuF7-9eOHEh1DaKzeBc4wu21HeJ9XLJacp5YTASEEr-5izlSQNXvS2inqC7wOcCKvgyKriz29RrRbn4fT5vsljwcMkmC8abCuEQzEaax7xPNZtJj-yCfSOIeFqkNsRsWsO74Y7vvkSjmwkseP4JDORr_0oOD_1C6qZuHhzJD3zPU9dsCKCIPRGBAHOitUDjOY7dv6LVCazIbpM2OqweRNfpkE5-2A0SqKrMtWnztbQSVmPgYwKybDgxfbQdHAchbGEt8Q0S5xvy6w4dxCE2JLGlbtvsuIN_Q4WfzyDC8A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 12:15:21.695 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 12:15:21.873 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:15:21.890 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:15:21.891 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:15:21.902 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:15:21.913 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:15:21.923 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:15:21.929 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:15:21.931 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:15:21.955 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:15:21.957 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:15:38.474 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 12:15:43.987 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 12:19:35.060 +02:00 [ERR] Failed executing DbCommand (524ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:aebdeec6-071b-4d27-9312-5f8eb6dd7e80
Error Number:515,State:2,Class:16
2019-07-01 12:19:36.728 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-01 12:24:08.643 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-01 12:24:08.742 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-01 12:24:08.744 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-01 12:24:08.746 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-01 12:24:08.748 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-01 12:24:08.752 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-01 12:24:08.755 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-01 12:24:09.102 +02:00 [DBG] Starting grant removal
2019-07-01 12:24:17.513 +02:00 [DBG] Login Url: /Account/Login
2019-07-01 12:24:17.549 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-01 12:24:17.624 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-01 12:24:17.705 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-01 12:24:17.726 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-01 12:24:17.746 +02:00 [DBG] Error Url: /home/error
2019-07-01 12:24:17.776 +02:00 [DBG] Error Id Parameter: errorId
2019-07-01 12:24:48.619 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-01 12:24:48.679 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-01 12:24:48.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-01 12:24:48.696 +02:00 [DBG] Start discovery request
2019-07-01 12:24:50.238 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-01 12:24:50.599 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-01 12:24:50.605 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-01 12:24:50.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-01 12:24:50.622 +02:00 [DBG] Start key discovery request
2019-07-01 12:24:50.927 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-01 12:24:50.937 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-01 12:24:50.941 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-01 12:24:50.950 +02:00 [DBG] Start authorize request
2019-07-01 12:24:50.971 +02:00 [DBG] No user present in authorize request
2019-07-01 12:24:50.983 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:24:51.777 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:24:51.794 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:24:51.917 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:24:52.021 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:24:52.037 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:24:52.042 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:24:52.052 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:24:52.085 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICzBZ6Zg3Q6HbOAPdtvz8cN6fE8l-SuRQng9vAD4VbgWNcdqDg1JPfswHekchMXJSHzZ6Dd72CGf6pRnNwaKp1EpPZVMk4RgGeuULdhCBm4VOde-RejLwGtt_i6KxoKwZvK80iS3FMA1OBGauEtuxK86qgzyEVJ2h5BKZLGV48D7RM14Cpzuu7pB952MNGRjmmQkbo3y-bxdNf5OCb1BnWMxpXbnQ84158JQHDIzNohQ-m08O4ca9lzH4-us-59kRsKlObVg6b8rndtLlu3mnpbzje8439I3LWylK-5-rDwHQ","UiLocales":null,"Nonce":"636975734907110708.NmRiZmY1ZmQtYjExMC00ZjExLWI2NmQtNzc5YzY3ZDZiNWI2M2FiOWE1YjUtMWY4OC00Yjk3LWJkNjMtZGE5MmQ5YzZmOGY2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636975734907110708.NmRiZmY1ZmQtYjExMC00ZjExLWI2NmQtNzc5YzY3ZDZiNWI2M2FiOWE1YjUtMWY4OC00Yjk3LWJkNjMtZGE5MmQ5YzZmOGY2","state":"CfDJ8BST-4sCksNFlez27BzseICzBZ6Zg3Q6HbOAPdtvz8cN6fE8l-SuRQng9vAD4VbgWNcdqDg1JPfswHekchMXJSHzZ6Dd72CGf6pRnNwaKp1EpPZVMk4RgGeuULdhCBm4VOde-RejLwGtt_i6KxoKwZvK80iS3FMA1OBGauEtuxK86qgzyEVJ2h5BKZLGV48D7RM14Cpzuu7pB952MNGRjmmQkbo3y-bxdNf5OCb1BnWMxpXbnQ84158JQHDIzNohQ-m08O4ca9lzH4-us-59kRsKlObVg6b8rndtLlu3mnpbzje8439I3LWylK-5-rDwHQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-01 12:24:52.133 +02:00 [INF] Showing login: User is not authenticated
2019-07-01 12:24:52.259 +02:00 [DBG] Start authorize request protocol validation
2019-07-01 12:24:52.280 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:24:52.282 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:24:52.290 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:24:52.304 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:24:52.342 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-01 12:24:52.350 +02:00 [DBG] Found [] API scopes in database
2019-07-01 12:24:52.353 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-01 12:24:52.374 +02:00 [DBG] SampleClient found in database: true
2019-07-01 12:24:52.375 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-01 12:24:55.479 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-01 12:25:00.388 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-01 12:25:28.184 +02:00 [ERR] Failed executing DbCommand (605ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:6d282703-af2e-416f-a588-2da07699173e
Error Number:515,State:2,Class:16
2019-07-01 12:25:31.167 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-01 12:32:08.099 +02:00 [ERR] Failed executing DbCommand (195ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [SecurityServer];
System.Data.SqlClient.SqlException (0x80131904): Cannot create file 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\SecurityServer.mdf' because it already exists. Change the file path or the file name, and retry the operation.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:af8ddc5a-b2d5-4944-a3a7-f7bab0e80dc7
Error Number:5170,State:4,Class:16
2019-07-02 09:02:32.070 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 129
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 108
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2019-07-02 10:17:40.488 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 10:17:40.869 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 10:17:40.870 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 10:17:40.871 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 10:17:40.871 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 10:17:40.873 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 10:17:40.874 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 10:17:42.523 +02:00 [DBG] Starting grant removal
2019-07-02 10:17:52.212 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 10:17:52.233 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 10:17:52.238 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 10:17:52.240 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 10:17:52.241 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 10:17:52.242 +02:00 [DBG] Error Url: /home/error
2019-07-02 10:17:52.245 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 10:19:01.507 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 10:19:01.577 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 10:19:01.580 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 10:19:01.600 +02:00 [DBG] Start discovery request
2019-07-02 10:19:02.584 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 10:19:03.968 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 10:19:03.973 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 10:19:03.976 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 10:19:03.987 +02:00 [DBG] Start key discovery request
2019-07-02 10:19:04.249 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 10:19:04.257 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 10:19:04.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 10:19:04.270 +02:00 [DBG] Start authorize request
2019-07-02 10:19:04.322 +02:00 [DBG] No user present in authorize request
2019-07-02 10:19:04.346 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:19:04.787 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:19:04.822 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:19:05.121 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:19:05.520 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:19:05.553 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:19:05.570 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:19:05.582 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:19:05.608 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAFKaXPfMqf_UIQ_cAVpUCrGtH_75FWnb7rXHSMqMX8UmQCykU5oa3bEoN__unm7b28ljmYzP1iSumIWrIlpPlVnRgz1gUWA7It02NVzVwB0yD8qgzkEDEkgIXNMpYAw0s1Rb7ZaFkc-s5p8E6kkZaD0I837cKSYqcrx1Ziyfb9t6W2JKvV742F38A-Yi3flT0SXP2a5xQvUKjE1uldq7GXuSPaf9zXkNCwc61OqeA9rbwfnf6jXWVYlA2gO2xI5GY5GxuKN9_q2OPkHZ7NqoxcB73MqdPX7Azj0sj_ix12ng","UiLocales":null,"Nonce":"636976523440643059.NzU0N2JlMDQtZjNiMy00ZjhkLTk0NDYtZWUzNjVjYTFlMTlhNjRmYjc5MTQtNjQ1Mi00NzNhLWE2NDMtODQxNDg3ODRlM2Vm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976523440643059.NzU0N2JlMDQtZjNiMy00ZjhkLTk0NDYtZWUzNjVjYTFlMTlhNjRmYjc5MTQtNjQ1Mi00NzNhLWE2NDMtODQxNDg3ODRlM2Vm","state":"CfDJ8BST-4sCksNFlez27BzseIAFKaXPfMqf_UIQ_cAVpUCrGtH_75FWnb7rXHSMqMX8UmQCykU5oa3bEoN__unm7b28ljmYzP1iSumIWrIlpPlVnRgz1gUWA7It02NVzVwB0yD8qgzkEDEkgIXNMpYAw0s1Rb7ZaFkc-s5p8E6kkZaD0I837cKSYqcrx1Ziyfb9t6W2JKvV742F38A-Yi3flT0SXP2a5xQvUKjE1uldq7GXuSPaf9zXkNCwc61OqeA9rbwfnf6jXWVYlA2gO2xI5GY5GxuKN9_q2OPkHZ7NqoxcB73MqdPX7Azj0sj_ix12ng","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 10:19:05.669 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 10:19:05.828 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:19:05.884 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:19:05.886 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:19:05.920 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:19:05.940 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:19:05.972 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:19:05.988 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:19:05.990 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:19:06.045 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:19:06.046 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:19:10.100 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 10:19:15.273 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 10:19:35.653 +02:00 [ERR] Failed executing DbCommand (1,860ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserClaims] ([ClaimType], [ClaimValue], [UserId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetUserClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:678bbac0-f7b8-4917-9c1e-935b536a88fe
Error Number:515,State:2,Class:16
2019-07-02 10:19:37.671 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-07-02 10:55:01.905 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 10:55:01.990 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 10:55:01.991 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 10:55:01.993 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 10:55:01.994 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 10:55:01.997 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 10:55:01.998 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 10:55:02.297 +02:00 [DBG] Starting grant removal
2019-07-02 10:55:05.741 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 10:55:05.749 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 10:55:05.751 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 10:55:05.752 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 10:55:05.755 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 10:55:05.757 +02:00 [DBG] Error Url: /home/error
2019-07-02 10:55:05.768 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 10:56:04.399 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 10:56:04.468 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 10:56:04.473 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 10:56:04.484 +02:00 [DBG] Start discovery request
2019-07-02 10:56:05.604 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 10:56:05.930 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 10:56:05.972 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 10:56:05.984 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 10:56:05.996 +02:00 [DBG] Start key discovery request
2019-07-02 10:56:06.229 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 10:56:06.236 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 10:56:06.237 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 10:56:06.254 +02:00 [DBG] Start authorize request
2019-07-02 10:56:06.280 +02:00 [DBG] No user present in authorize request
2019-07-02 10:56:06.287 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:06.861 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:06.876 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:06.962 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:07.047 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:07.069 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:07.095 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:07.108 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:07.136 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","UiLocales":null,"Nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","state":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 10:56:07.185 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 10:56:07.291 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:07.296 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:07.297 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:07.304 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:07.308 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:07.313 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:07.317 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:07.320 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:07.336 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:07.336 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:09.402 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 10:56:13.190 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 10:56:22.860 +02:00 [DBG] Augmenting SignInContext
2019-07-02 10:56:22.862 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 10:56:22.874 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 10:56:22.890 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 10:56:22.952 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 10:56:22.957 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 10:56:22.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 10:56:22.967 +02:00 [DBG] Start authorize callback request
2019-07-02 10:56:22.979 +02:00 [DBG] User in authorize request: 938c5df2-f30a-4d7e-8ae7-8be7dad453f8
2019-07-02 10:56:22.981 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:23.027 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:23.028 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:23.048 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:23.065 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:23.074 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:23.077 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:23.079 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:23.081 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"938c5df2-f30a-4d7e-8ae7-8be7dad453f8","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","UiLocales":null,"Nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1d5290dd11a009e473a92f11e34f7695","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","state":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 10:56:23.196 +02:00 [DBG] hVQVDeNV6QQhaAYr5nhpENJVSBEWVRVxfA+yZN0SPDw= found in database: false
2019-07-02 10:56:23.199 +02:00 [DBG] user_consent grant with value: SampleClient|938c5df2-f30a-4d7e-8ae7-8be7dad453f8 not found in store.
2019-07-02 10:56:23.202 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 10:56:23.203 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 10:56:23.261 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:23.341 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:23.342 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:23.381 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:23.402 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:23.428 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:23.442 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:23.444 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:23.532 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:23.533 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:23.555 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:23.572 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:27.452 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 10:56:27.679 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:27.739 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:27.740 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:27.760 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:27.774 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:27.779 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:27.789 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:27.791 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:27.857 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:27.859 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:27.876 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 10:56:27.879 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 10:56:27.887 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 10:56:27.908 +02:00 [DBG] Start authorize callback request
2019-07-02 10:56:27.945 +02:00 [DBG] User in authorize request: 938c5df2-f30a-4d7e-8ae7-8be7dad453f8
2019-07-02 10:56:27.961 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 10:56:27.974 +02:00 [DBG] SampleClient found in database: true
2019-07-02 10:56:27.975 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 10:56:27.987 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:27.990 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:27.995 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 10:56:28.000 +02:00 [DBG] Found [] API scopes in database
2019-07-02 10:56:28.005 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 10:56:28.007 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"938c5df2-f30a-4d7e-8ae7-8be7dad453f8","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","UiLocales":null,"Nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1d5290dd11a009e473a92f11e34f7695","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","state":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 10:56:28.045 +02:00 [DBG] hVQVDeNV6QQhaAYr5nhpENJVSBEWVRVxfA+yZN0SPDw= found in database: false
2019-07-02 10:56:28.049 +02:00 [DBG] user_consent grant with value: SampleClient|938c5df2-f30a-4d7e-8ae7-8be7dad453f8 not found in store.
2019-07-02 10:56:28.052 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 10:56:28.064 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-02 10:56:28.073 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-02 10:56:28.080 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 938c5df2-f30a-4d7e-8ae7-8be7dad453f8
2019-07-02 10:56:28.126 +02:00 [DBG] hVQVDeNV6QQhaAYr5nhpENJVSBEWVRVxfA+yZN0SPDw= not found in database
2019-07-02 10:56:28.217 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 10:56:28.238 +02:00 [DBG] Getting claims for identity token for subject: 938c5df2-f30a-4d7e-8ae7-8be7dad453f8 and client: SampleClient
2019-07-02 10:56:28.657 +02:00 [INF] Authorize endpoint response
{"SubjectId":"938c5df2-f30a-4d7e-8ae7-8be7dad453f8","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDIvNxL-ca5QVWMikLgKKc7F6p54LiurGmMJK8Vegce3UQwa6fEqgkDUBXki3PCG0fKFDEBzdqrsiVFHiKiFPNpjlqn4AdZwsm8R4CFzF5M6TXC_iywt9XpPT6EPZW9bVec_VMVya118PUvQtjm62Ex9BoGxh9gHwOUkU4O4LDv_-U5qenh9qYxL1O3owJk7YatWIEB4se0g1b0Vv7h8HW1kgjzeEkSvX3gtjV9dw49jZKX2bG6Oc70NvzBZK9-PlcWw92kvmjZSzBW3OWQNRX1u-VgqGXIaz_MR4zgEsJyow","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 10:56:28.702 +02:00 [DBG] Augmenting SignInContext
2019-07-02 10:56:28.703 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:05:11.047 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 11:05:11.160 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 11:05:11.162 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 11:05:11.163 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 11:05:11.163 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 11:05:11.164 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 11:05:11.164 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 11:05:11.445 +02:00 [DBG] Starting grant removal
2019-07-02 11:05:14.798 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 11:05:14.813 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 11:05:14.829 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 11:05:14.831 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 11:05:14.842 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 11:05:14.847 +02:00 [DBG] Error Url: /home/error
2019-07-02 11:05:14.855 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 11:05:28.742 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:05:28.861 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 11:05:28.866 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:05:28.871 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 11:05:28.966 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 11:05:28.993 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 11:05:29.004 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 11:05:29.016 +02:00 [DBG] Processing signout callback request
2019-07-02 11:05:29.956 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:05:29.973 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:05:29.976 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 11:05:29.976 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 11:05:29.980 +02:00 [INF] Successful signout callback.
2019-07-02 11:05:29.982 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 11:05:29.985 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 11:06:12.072 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 11:06:12.129 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 11:06:12.129 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 11:06:12.130 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 11:06:12.131 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 11:06:12.131 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 11:06:12.132 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 11:06:12.363 +02:00 [DBG] Starting grant removal
2019-07-02 11:06:14.812 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 11:06:14.825 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 11:06:14.828 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 11:06:14.831 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 11:06:14.839 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 11:06:14.842 +02:00 [DBG] Error Url: /home/error
2019-07-02 11:06:14.844 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 11:06:36.602 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 11:06:36.640 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 11:06:36.645 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 11:06:36.652 +02:00 [DBG] Start discovery request
2019-07-02 11:06:37.801 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 11:06:38.077 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 11:06:38.082 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 11:06:38.085 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 11:06:38.096 +02:00 [DBG] Start key discovery request
2019-07-02 11:06:38.220 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 11:06:38.242 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 11:06:38.264 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 11:06:38.284 +02:00 [DBG] Processing signout request for anonymous
2019-07-02 11:06:38.298 +02:00 [DBG] Start end session request validation
2019-07-02 11:06:38.333 +02:00 [DBG] Start identity token validation
2019-07-02 11:06:38.923 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:06:38.932 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:06:38.934 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 11:06:39.303 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-02 11:06:39.325 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562057788,"exp":1562058088,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976545660918556.NWFmNzU2ZTItZjliOS00NWM3LTg1ODctNjAwMTIzYmMzNTJiYjdlZTMxMWYtZGMwNC00MGIyLTk4YWUtNGY4MGFiNzI0Njk3","iat":1562057788,"sid":"1d5290dd11a009e473a92f11e34f7695","sub":"938c5df2-f30a-4d7e-8ae7-8be7dad453f8","auth_time":1562057782,"idp":"Microsoft","name":"Fungai Mashozhera","preferred_username":"45e4f82c-5d57-4e98-af02-c14b6917961e","amr":"external"},"$type":"TokenValidationLog"}
2019-07-02 11:06:39.349 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICxSyMWZw56HKMAVbpjW6WCCJ3hwyKIHK8SkBMFdxARd50HtIBv60pIp_qCUVXaNJw0518DranYBQjNi2OfMD7-AVR5JHTQuhyGnf22ID-mMRqaDf7izHpEx8WIW2MvxVb2MBvMy4Gju9y4r9zEoJRv","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICxSyMWZw56HKMAVbpjW6WCCJ3hwyKIHK8SkBMFdxARd50HtIBv60pIp_qCUVXaNJw0518DranYBQjNi2OfMD7-AVR5JHTQuhyGnf22ID-mMRqaDf7izHpEx8WIW2MvxVb2MBvMy4Gju9y4r9zEoJRv","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 11:06:39.368 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-02 11:08:24.182 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 11:08:24.194 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 11:08:24.199 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 11:08:24.212 +02:00 [DBG] Start authorize request
2019-07-02 11:08:24.227 +02:00 [DBG] No user present in authorize request
2019-07-02 11:08:24.241 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:08:24.347 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:08:24.349 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:08:24.479 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:08:24.584 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:08:24.659 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:08:24.676 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:08:24.687 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:08:24.702 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIBjXKFLQV3KgNqCLHjlWu9jMhhXruQWH_Sntf7P5Klprj8fHsf7WPToacJJc9VDEYo5yUV1F2ngqCvrXpONIFlxHTnL29kGbho4_UXSdDYK8UqHir6WH89t1m2sWxl1U22VltBjSNRoFbf9uOUS3zhfR9A0LF9M7RciiKdWAJuXBEL6Onc2pjylMo-KkjAltda1Zq82MEKnT1obGisQ05m3IFqjiWGMTRIZ37xOu8m07xN7ckPUvcAVBoJGt-7raB_OO9NQ9IGDVbL8QZp5I8AzDkZ_SSE-xrBaLipy26lrZA","UiLocales":null,"Nonce":"636976553041495710.NDUxMTMzMDMtNjU1Yi00NTFhLWI1ZTUtMDliNjVlYmM0MDM3ZmZhNzY2YTQtNzY1NC00NzUyLWEwODUtYTM5MGY4YThkNjAy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976553041495710.NDUxMTMzMDMtNjU1Yi00NTFhLWI1ZTUtMDliNjVlYmM0MDM3ZmZhNzY2YTQtNzY1NC00NzUyLWEwODUtYTM5MGY4YThkNjAy","state":"CfDJ8BST-4sCksNFlez27BzseIBjXKFLQV3KgNqCLHjlWu9jMhhXruQWH_Sntf7P5Klprj8fHsf7WPToacJJc9VDEYo5yUV1F2ngqCvrXpONIFlxHTnL29kGbho4_UXSdDYK8UqHir6WH89t1m2sWxl1U22VltBjSNRoFbf9uOUS3zhfR9A0LF9M7RciiKdWAJuXBEL6Onc2pjylMo-KkjAltda1Zq82MEKnT1obGisQ05m3IFqjiWGMTRIZ37xOu8m07xN7ckPUvcAVBoJGt-7raB_OO9NQ9IGDVbL8QZp5I8AzDkZ_SSE-xrBaLipy26lrZA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:08:24.745 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 11:08:24.811 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:08:24.894 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:08:24.895 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:08:24.919 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:08:24.934 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:08:24.943 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:08:24.948 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:08:24.949 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:08:25.011 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:08:25.012 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:08:33.187 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 11:08:36.666 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 11:10:40.135 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 11:10:40.248 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 11:10:40.249 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 11:10:40.250 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 11:10:40.251 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 11:10:40.252 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 11:10:40.253 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 11:10:40.522 +02:00 [DBG] Starting grant removal
2019-07-02 11:10:42.862 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 11:10:42.869 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 11:10:42.874 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 11:10:42.876 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 11:10:42.884 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 11:10:42.887 +02:00 [DBG] Error Url: /home/error
2019-07-02 11:10:42.889 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 11:10:58.058 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 11:10:58.099 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 11:10:58.106 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 11:10:58.116 +02:00 [DBG] Start discovery request
2019-07-02 11:10:59.372 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 11:10:59.596 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 11:10:59.601 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 11:10:59.603 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 11:10:59.613 +02:00 [DBG] Start key discovery request
2019-07-02 11:10:59.814 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 11:10:59.832 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 11:10:59.835 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 11:10:59.842 +02:00 [DBG] Start authorize request
2019-07-02 11:10:59.864 +02:00 [DBG] No user present in authorize request
2019-07-02 11:10:59.872 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:11:00.363 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:11:00.374 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:11:00.449 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:11:00.499 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:11:00.513 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:11:00.515 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:11:00.521 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:11:00.546 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","UiLocales":null,"Nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","state":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:11:00.581 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 11:11:00.689 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:11:00.697 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:11:00.698 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:11:00.701 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:11:00.704 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:11:00.709 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:11:00.717 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:11:00.720 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:11:00.732 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:11:00.732 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:11:06.816 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 11:11:10.389 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 11:14:32.407 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:14:32.410 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 11:14:32.421 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:14:32.432 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:14:32.473 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:14:32.475 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:14:32.478 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:14:32.485 +02:00 [DBG] Start authorize callback request
2019-07-02 11:14:32.491 +02:00 [DBG] User in authorize request: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:14:32.493 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:14:32.563 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:32.566 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:32.597 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:32.611 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:32.624 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:32.628 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:32.630 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:14:32.635 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","UiLocales":null,"Nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"7db4af534e2ba6f9ad7f490db7680cc7","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","state":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:14:32.731 +02:00 [DBG] /lI/erODKT1JlZu0bZj2C0uPeL//E9VrPRCr7dYITOE= found in database: false
2019-07-02 11:14:32.733 +02:00 [DBG] user_consent grant with value: SampleClient|a7b2fd1c-2766-4de0-ae66-88b7ce411243 not found in store.
2019-07-02 11:14:32.737 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:14:32.738 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 11:14:32.783 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:14:32.788 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:32.789 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:32.794 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:32.797 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:32.802 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:32.804 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:32.806 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:14:32.813 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:32.814 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:32.820 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:32.822 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:40.157 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:14:40.247 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:14:40.253 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:40.254 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:40.260 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:40.264 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:40.267 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:40.270 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:40.272 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:14:40.296 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:40.297 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:40.304 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:14:40.306 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:14:40.309 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:14:40.313 +02:00 [DBG] Start authorize callback request
2019-07-02 11:14:40.322 +02:00 [DBG] User in authorize request: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:14:40.324 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:14:40.339 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:14:40.340 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:14:40.348 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:40.353 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:40.364 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:14:40.368 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:14:40.370 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:14:40.373 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","UiLocales":null,"Nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"7db4af534e2ba6f9ad7f490db7680cc7","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","state":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:14:40.402 +02:00 [DBG] /lI/erODKT1JlZu0bZj2C0uPeL//E9VrPRCr7dYITOE= found in database: false
2019-07-02 11:14:40.403 +02:00 [DBG] user_consent grant with value: SampleClient|a7b2fd1c-2766-4de0-ae66-88b7ce411243 not found in store.
2019-07-02 11:14:40.405 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:14:40.412 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-02 11:14:40.415 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-02 11:14:40.419 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:14:40.439 +02:00 [DBG] /lI/erODKT1JlZu0bZj2C0uPeL//E9VrPRCr7dYITOE= not found in database
2019-07-02 11:14:40.481 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 11:14:40.490 +02:00 [DBG] Getting claims for identity token for subject: a7b2fd1c-2766-4de0-ae66-88b7ce411243 and client: SampleClient
2019-07-02 11:14:40.662 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAcMEjx48-aUFeQhBMDtDvMivozG54X_uJIu-53Gn6QpEhg4OaWlxchAJww7nhi_XKNErOFvguqpjQpGfzNd8q7XWVITudCZU754Wt3Wz9byfee1fsTrWQJcF0xM226DGz-fl_f6kQzaOL1nEc3gFqMBXzaod1x5EmwDLQL_XPp1YsAJ409bxvMt6FqilL9OqMd92sVkn5vsdIutxa4Zgbq1m9ydTFkJv5jf5IDajV8j2R7WAdXKeorINHSy_WKOHWsbKI1cmdYgZ-YXCrBIdtb4jTOPxTAMjRmcXCxgsVMfw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 11:14:40.690 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:14:40.692 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:18:08.030 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 11:18:08.036 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 11:18:08.040 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 11:18:08.046 +02:00 [DBG] Processing signout request for a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:18:08.051 +02:00 [DBG] Start end session request validation
2019-07-02 11:18:08.056 +02:00 [DBG] Start identity token validation
2019-07-02 11:18:08.098 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:08.098 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:08.102 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 11:18:08.173 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-02 11:18:08.178 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562058880,"exp":1562059180,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976554596773918.MTYzNTU2NTYtNzIzNC00YjZiLTk4ZmItMWVlYTViOTY1NjdhNzNjMzVlNGEtYzgxNy00YTg3LWFmNDAtNWYwYjVmZmU2ZTZj","iat":1562058880,"sid":"7db4af534e2ba6f9ad7f490db7680cc7","sub":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","auth_time":1562058872,"idp":"Microsoft","name":"Fungai Mashozhera","preferred_username":"b2dfd921-2326-46a9-a422-716e1a2b96cc","amr":"external"},"$type":"TokenValidationLog"}
2019-07-02 11:18:08.198 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAzo9doZVU8syMylyYQ-9T6Oi6D723tzO7AttmryFgDdirGFv44cPsI1FS1WO6H_fWckijiC3mPB5o8wbK9muuxWfmY4cIrojSKsBGmNlgknfAYAF5y2GA1oAUZuvlkudT0rpIgW_9PPYynlWlrEk1V","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIAzo9doZVU8syMylyYQ-9T6Oi6D723tzO7AttmryFgDdirGFv44cPsI1FS1WO6H_fWckijiC3mPB5o8wbK9muuxWfmY4cIrojSKsBGmNlgknfAYAF5y2GA1oAUZuvlkudT0rpIgW_9PPYynlWlrEk1V","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 11:18:08.212 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-02 11:18:08.264 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 11:18:08.267 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:18:08.269 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 11:18:08.355 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 11:18:08.365 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 11:18:08.371 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 11:18:08.390 +02:00 [DBG] Processing signout callback request
2019-07-02 11:18:08.450 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:08.451 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:08.456 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 11:18:08.458 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 11:18:08.462 +02:00 [INF] Successful signout callback.
2019-07-02 11:18:08.464 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 11:18:08.466 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 11:18:19.545 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 11:18:19.551 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 11:18:19.553 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 11:18:19.555 +02:00 [DBG] Start authorize request
2019-07-02 11:18:19.556 +02:00 [DBG] No user present in authorize request
2019-07-02 11:18:19.559 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:18:19.596 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:19.597 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:19.612 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:19.621 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:19.628 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:19.632 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:19.634 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:18:19.637 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICjz2nItE-vtTkKQ0iRZVDaaeaeafpAgst-O_9hVyz5tI9vuMPIkojCn8ufVzlD_eg8M2BtmaYHYdGNCzbblAiR4YYqEATxgs5aO4Ou9n7rXBt7EUyZylEIpmYBo04SWOs_GSE0lD--GdER1L16lU-KaFxGpcqWWEmRaZD6w250Z85nB559_6RTITzwEiCtVzdI5vw7Ji9H4SvAOhyvxLU0JQLHKAiBHYW_YolObBvsXr45NxB2r-7GFBI8WN_KhGmpeGPoWY5I6R5C9hBak9v9jllYv3BU8YodmwFD0Sn5LQ","UiLocales":null,"Nonce":"636976558995314674.YWM1ZWE0YzAtNjYzZi00NTQ2LTllMjQtYTc4ZWZkYTNlZjQ1ODVjNzA0ZWEtYjNhNi00ZmY4LWIyZjYtNzg5ZjNiMTA3MmI4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976558995314674.YWM1ZWE0YzAtNjYzZi00NTQ2LTllMjQtYTc4ZWZkYTNlZjQ1ODVjNzA0ZWEtYjNhNi00ZmY4LWIyZjYtNzg5ZjNiMTA3MmI4","state":"CfDJ8BST-4sCksNFlez27BzseICjz2nItE-vtTkKQ0iRZVDaaeaeafpAgst-O_9hVyz5tI9vuMPIkojCn8ufVzlD_eg8M2BtmaYHYdGNCzbblAiR4YYqEATxgs5aO4Ou9n7rXBt7EUyZylEIpmYBo04SWOs_GSE0lD--GdER1L16lU-KaFxGpcqWWEmRaZD6w250Z85nB559_6RTITzwEiCtVzdI5vw7Ji9H4SvAOhyvxLU0JQLHKAiBHYW_YolObBvsXr45NxB2r-7GFBI8WN_KhGmpeGPoWY5I6R5C9hBak9v9jllYv3BU8YodmwFD0Sn5LQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:18:19.656 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 11:18:19.663 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:18:19.668 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:19.669 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:19.673 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:19.677 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:19.680 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:19.684 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:19.686 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:18:19.692 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:19.693 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:21.588 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 11:18:24.443 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 11:18:28.244 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:18:28.244 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 11:18:28.248 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:18:28.251 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:18:28.259 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:18:28.260 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:18:28.262 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:18:28.263 +02:00 [DBG] Start authorize callback request
2019-07-02 11:18:28.264 +02:00 [DBG] User in authorize request: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:18:28.266 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:18:28.278 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:18:28.279 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:18:28.286 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:28.289 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:28.297 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:18:28.301 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:18:28.302 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:18:28.305 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICjz2nItE-vtTkKQ0iRZVDaaeaeafpAgst-O_9hVyz5tI9vuMPIkojCn8ufVzlD_eg8M2BtmaYHYdGNCzbblAiR4YYqEATxgs5aO4Ou9n7rXBt7EUyZylEIpmYBo04SWOs_GSE0lD--GdER1L16lU-KaFxGpcqWWEmRaZD6w250Z85nB559_6RTITzwEiCtVzdI5vw7Ji9H4SvAOhyvxLU0JQLHKAiBHYW_YolObBvsXr45NxB2r-7GFBI8WN_KhGmpeGPoWY5I6R5C9hBak9v9jllYv3BU8YodmwFD0Sn5LQ","UiLocales":null,"Nonce":"636976558995314674.YWM1ZWE0YzAtNjYzZi00NTQ2LTllMjQtYTc4ZWZkYTNlZjQ1ODVjNzA0ZWEtYjNhNi00ZmY4LWIyZjYtNzg5ZjNiMTA3MmI4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ca7e1f4ba72819b794bb21aee862e88d","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976558995314674.YWM1ZWE0YzAtNjYzZi00NTQ2LTllMjQtYTc4ZWZkYTNlZjQ1ODVjNzA0ZWEtYjNhNi00ZmY4LWIyZjYtNzg5ZjNiMTA3MmI4","state":"CfDJ8BST-4sCksNFlez27BzseICjz2nItE-vtTkKQ0iRZVDaaeaeafpAgst-O_9hVyz5tI9vuMPIkojCn8ufVzlD_eg8M2BtmaYHYdGNCzbblAiR4YYqEATxgs5aO4Ou9n7rXBt7EUyZylEIpmYBo04SWOs_GSE0lD--GdER1L16lU-KaFxGpcqWWEmRaZD6w250Z85nB559_6RTITzwEiCtVzdI5vw7Ji9H4SvAOhyvxLU0JQLHKAiBHYW_YolObBvsXr45NxB2r-7GFBI8WN_KhGmpeGPoWY5I6R5C9hBak9v9jllYv3BU8YodmwFD0Sn5LQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:18:28.343 +02:00 [DBG] /lI/erODKT1JlZu0bZj2C0uPeL//E9VrPRCr7dYITOE= found in database: true
2019-07-02 11:18:28.348 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-02 11:18:28.350 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 11:18:28.351 +02:00 [DBG] Getting claims for identity token for subject: a7b2fd1c-2766-4de0-ae66-88b7ce411243 and client: SampleClient
2019-07-02 11:18:28.364 +02:00 [INF] Authorize endpoint response
{"SubjectId":"a7b2fd1c-2766-4de0-ae66-88b7ce411243","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICjz2nItE-vtTkKQ0iRZVDaaeaeafpAgst-O_9hVyz5tI9vuMPIkojCn8ufVzlD_eg8M2BtmaYHYdGNCzbblAiR4YYqEATxgs5aO4Ou9n7rXBt7EUyZylEIpmYBo04SWOs_GSE0lD--GdER1L16lU-KaFxGpcqWWEmRaZD6w250Z85nB559_6RTITzwEiCtVzdI5vw7Ji9H4SvAOhyvxLU0JQLHKAiBHYW_YolObBvsXr45NxB2r-7GFBI8WN_KhGmpeGPoWY5I6R5C9hBak9v9jllYv3BU8YodmwFD0Sn5LQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 11:18:28.370 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:18:28.371 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:19:55.062 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 11:19:55.079 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 11:19:55.129 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 11:19:55.146 +02:00 [DBG] Processing signout request for a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:19:55.160 +02:00 [DBG] Start end session request validation
2019-07-02 11:19:55.162 +02:00 [DBG] Start identity token validation
2019-07-02 11:19:55.234 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:19:55.236 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:19:55.244 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 11:19:55.264 +02:00 [WRN] No user found matching subject Id: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:19:55.275 +02:00 [ERR] User marked as not active: a7b2fd1c-2766-4de0-ae66-88b7ce411243
2019-07-02 11:19:55.290 +02:00 [INF] End session request validation failure: Error validating id token hint
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICZNEqzPOi8IEciSK2jW8uK8zvw9gL45acO1OD8wXacPrqyWbej5xEx6OnwS5eJ0-MP2sdEqeve4T0tHSJ8-X_37bnha12RRqpBhgmXIAwDOOBwUw4nj4o4SMtIbhj41uItzASuXeQXtS2Vz9Sa5_HB","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 11:19:55.306 +02:00 [ERR] Error processing end session request Invalid request
2019-07-02 11:20:01.243 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:20:01.264 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 11:20:01.265 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:20:01.269 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 11:20:01.310 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 11:20:01.316 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 11:20:01.318 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 11:20:01.321 +02:00 [DBG] Processing signout callback request
2019-07-02 11:20:01.335 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:20:01.336 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:20:01.339 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 11:20:01.340 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 11:20:01.342 +02:00 [INF] Successful signout callback.
2019-07-02 11:20:01.344 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 11:20:01.350 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 11:20:09.609 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 11:20:09.614 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 11:20:09.616 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 11:20:09.621 +02:00 [DBG] Start authorize request
2019-07-02 11:20:09.626 +02:00 [DBG] No user present in authorize request
2019-07-02 11:20:09.627 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:20:09.639 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:20:09.640 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:20:09.664 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:20:09.679 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:20:09.686 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:20:09.690 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:20:09.692 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:20:09.695 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","UiLocales":null,"Nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","state":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:20:09.725 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 11:20:09.738 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:20:09.745 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:20:09.745 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:20:09.753 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:20:09.760 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:20:09.767 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:20:09.772 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:20:09.774 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:20:09.790 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:20:09.791 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:20:11.275 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 11:20:12.280 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 11:28:33.340 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:28:33.341 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 11:28:33.347 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:28:33.349 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:28:33.359 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:28:33.367 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:28:33.369 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:28:33.373 +02:00 [DBG] Start authorize callback request
2019-07-02 11:28:33.376 +02:00 [DBG] User in authorize request: 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:28:33.381 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:28:33.416 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:33.417 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:33.436 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:33.445 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:33.452 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:33.456 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:33.458 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:28:33.461 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"6221fe65-8ba7-4140-971f-0068c811ca67","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","UiLocales":null,"Nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bd4c30e0a694cefa7b5e53ed243e6d79","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","state":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:28:33.492 +02:00 [DBG] M+SppWUhPpqA/LkaakW1b+i+4qYNt9Woe8Du6dO6Sik= found in database: false
2019-07-02 11:28:33.495 +02:00 [DBG] user_consent grant with value: SampleClient|6221fe65-8ba7-4140-971f-0068c811ca67 not found in store.
2019-07-02 11:28:33.500 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:28:33.502 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 11:28:33.525 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:28:33.539 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:33.544 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:33.553 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:33.556 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:33.581 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:33.588 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:33.591 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:28:33.610 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:33.611 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:33.618 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:33.622 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:37.021 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:28:37.027 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:28:37.036 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:37.037 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:37.041 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:37.048 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:37.052 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:37.056 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:37.059 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:28:37.067 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:37.068 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:37.085 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:28:37.088 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:28:37.089 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:28:37.094 +02:00 [DBG] Start authorize callback request
2019-07-02 11:28:37.096 +02:00 [DBG] User in authorize request: 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:28:37.100 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:28:37.110 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:28:37.111 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:28:37.116 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:37.119 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:37.125 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:28:37.128 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:28:37.131 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:28:37.134 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"6221fe65-8ba7-4140-971f-0068c811ca67","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","UiLocales":null,"Nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bd4c30e0a694cefa7b5e53ed243e6d79","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976560095800933.MmU1MGRhOTktYjYwNi00NmIzLWI4YWItMjRkMmRmMGM0MWUyYTllOTU2MWItYmM0MC00MTk3LWFkMzMtMDMzMzVhMzliOGYx","state":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:28:37.162 +02:00 [DBG] M+SppWUhPpqA/LkaakW1b+i+4qYNt9Woe8Du6dO6Sik= found in database: false
2019-07-02 11:28:37.163 +02:00 [DBG] user_consent grant with value: SampleClient|6221fe65-8ba7-4140-971f-0068c811ca67 not found in store.
2019-07-02 11:28:37.165 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:28:37.166 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-02 11:28:37.168 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-02 11:28:37.171 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:28:37.181 +02:00 [DBG] M+SppWUhPpqA/LkaakW1b+i+4qYNt9Woe8Du6dO6Sik= not found in database
2019-07-02 11:28:37.188 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 11:28:37.189 +02:00 [DBG] Getting claims for identity token for subject: 6221fe65-8ba7-4140-971f-0068c811ca67 and client: SampleClient
2019-07-02 11:28:37.202 +02:00 [INF] Authorize endpoint response
{"SubjectId":"6221fe65-8ba7-4140-971f-0068c811ca67","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDnKHsWQYEROi5I5EAfdmuAMCzaYlnJcGn3raQ8Ve4kXKVsLOePena-BgwXtqx1BJZrnPis4zRKt9YqIwohjc0x9lDR10fWUofNDL6ftXj4AB9TMt8wmlKl7FRs4WwoVtn9FyGhOLT6hcL0PUu_pRyYpd8ArD3E1Aal11ukg-crpyCU9muBHmM5iQ9Q2ExfZ19XLU3Fk_B09XAeS-IyiGuAaa-VlCcN4sA69m5TGce8-MxVTh1TVIMUPq3mLv1opNTa81F900gEy4RU8CFnScLnigW55KzHnS5EY5GU_Z-ZbA","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 11:28:37.208 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:28:37.209 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:47:26.600 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 11:47:26.603 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 11:47:26.605 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 11:47:26.607 +02:00 [DBG] Processing signout request for 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:47:26.609 +02:00 [DBG] Start end session request validation
2019-07-02 11:47:26.610 +02:00 [DBG] Start identity token validation
2019-07-02 11:47:26.651 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:47:26.652 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:47:26.655 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 11:47:26.670 +02:00 [WRN] No user found matching subject Id: 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:47:26.673 +02:00 [ERR] User marked as not active: 6221fe65-8ba7-4140-971f-0068c811ca67
2019-07-02 11:47:26.677 +02:00 [INF] End session request validation failure: Error validating id token hint
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIDjmmF5PUkgx_f13EDvtHQ751xOKerCZKtminZNi9C3YMVcJujIGju3aZhwdhxAkWNzG1U3C3ID43ONeT_6TyxB8_URM2yPtz1Vz8v9bwzt9i6wQgsmUAuH-jojalgK44FRJcQdCZRwrnaPKtmi0ZtW","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 11:47:26.683 +02:00 [ERR] Error processing end session request Invalid request
2019-07-02 11:47:29.727 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:47:29.737 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 11:47:29.744 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:47:29.748 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 11:47:29.833 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 11:47:29.880 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 11:47:29.895 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 11:47:29.898 +02:00 [DBG] Processing signout callback request
2019-07-02 11:47:29.932 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:47:29.933 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:47:29.944 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 11:47:29.950 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 11:47:29.952 +02:00 [INF] Successful signout callback.
2019-07-02 11:47:29.957 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 11:47:29.962 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 11:47:33.122 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 11:47:33.128 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 11:47:33.131 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 11:47:33.142 +02:00 [DBG] Start authorize request
2019-07-02 11:47:33.145 +02:00 [DBG] No user present in authorize request
2019-07-02 11:47:33.146 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:47:33.158 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:47:33.159 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:47:33.185 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:47:33.230 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:47:33.245 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:47:33.252 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:47:33.257 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:47:33.261 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","UiLocales":null,"Nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","state":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:47:33.316 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 11:47:33.334 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:47:33.345 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:47:33.345 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:47:33.357 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:47:33.362 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:47:33.372 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:47:33.380 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:47:33.385 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:47:33.407 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:47:33.409 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:47:34.884 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 11:47:38.400 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 11:50:46.011 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:50:46.029 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 11:50:46.057 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:50:46.068 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 11:50:46.140 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:50:46.143 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:50:46.148 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:50:46.157 +02:00 [DBG] Start authorize callback request
2019-07-02 11:50:46.161 +02:00 [DBG] User in authorize request: bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:50:46.172 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:50:46.263 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:46.265 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:46.303 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:46.327 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:46.340 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:46.347 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:46.353 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:50:46.356 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"bfb5c3d8-4a21-46bd-a165-2dc0287b0886","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","UiLocales":null,"Nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4c54213813a675bc0460522b5ec8d9ab","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","state":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:50:46.448 +02:00 [DBG] nd2V5hTl2ee9BV3k/vSUHxLVHrKrFR7Z4TW/nleRMI4= found in database: false
2019-07-02 11:50:46.454 +02:00 [DBG] user_consent grant with value: SampleClient|bfb5c3d8-4a21-46bd-a165-2dc0287b0886 not found in store.
2019-07-02 11:50:46.459 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:50:46.463 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 11:50:46.488 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:50:46.510 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:46.511 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:46.524 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:46.530 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:46.542 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:46.552 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:46.555 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:50:46.570 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:46.571 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:46.580 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:46.587 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:52.762 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 11:50:52.801 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:50:52.872 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:52.873 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:52.903 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:52.923 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:52.950 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:52.967 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:52.970 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:50:53.025 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:53.026 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:53.049 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 11:50:53.053 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 11:50:53.055 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 11:50:53.058 +02:00 [DBG] Start authorize callback request
2019-07-02 11:50:53.060 +02:00 [DBG] User in authorize request: bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:50:53.068 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 11:50:53.120 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:50:53.121 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:50:53.149 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:53.165 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:53.185 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 11:50:53.217 +02:00 [DBG] Found [] API scopes in database
2019-07-02 11:50:53.221 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 11:50:53.225 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"bfb5c3d8-4a21-46bd-a165-2dc0287b0886","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","UiLocales":null,"Nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4c54213813a675bc0460522b5ec8d9ab","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976576530949671.NDA0ZWNlNDktYTBmYS00YWZmLWIyYjEtMWI1MmFlODY1OWViMmI2MTcyOTctY2RmOC00OTQ1LWEwN2QtODMxZjY1ZjMxNWZi","state":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 11:50:53.272 +02:00 [DBG] nd2V5hTl2ee9BV3k/vSUHxLVHrKrFR7Z4TW/nleRMI4= found in database: false
2019-07-02 11:50:53.277 +02:00 [DBG] user_consent grant with value: SampleClient|bfb5c3d8-4a21-46bd-a165-2dc0287b0886 not found in store.
2019-07-02 11:50:53.280 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 11:50:53.283 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-02 11:50:53.288 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-02 11:50:53.291 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:50:53.298 +02:00 [DBG] nd2V5hTl2ee9BV3k/vSUHxLVHrKrFR7Z4TW/nleRMI4= not found in database
2019-07-02 11:50:53.304 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 11:50:53.305 +02:00 [DBG] Getting claims for identity token for subject: bfb5c3d8-4a21-46bd-a165-2dc0287b0886 and client: SampleClient
2019-07-02 11:50:53.325 +02:00 [INF] Authorize endpoint response
{"SubjectId":"bfb5c3d8-4a21-46bd-a165-2dc0287b0886","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDX4SbMiy2COruLHx6B5xqc7XgdDwGMrZevV1fjqTNsAClYEV8EzbfWSNOo_WNmp5tQKtKLBVUcATrgzUic_KikFC1ko00jnufRBVIXPEL8a4P3_HazVOCuyYcKtDA4DOZnX9FZMVs8L3LA8XRNFIVGXssYGn52KY3WZZdnnIGaNjmimOoOQV6ngp4JeEq4cpkMJGazHsBDA4g-xTelu4KdkKzRO9tuQKsQ8pMFQuVuNGAwgo0E4r0chK8rFap2fwfpUvaQSF0XibWCIloHi06fJ79mi8aukFLxKv2mxNgPKQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 11:50:53.335 +02:00 [DBG] Augmenting SignInContext
2019-07-02 11:50:53.336 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 11:56:38.328 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 11:56:38.429 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 11:56:38.431 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 11:56:38.432 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 11:56:38.434 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 11:56:38.435 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 11:56:38.436 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 11:56:39.073 +02:00 [DBG] Starting grant removal
2019-07-02 11:56:43.470 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 11:56:43.473 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 11:56:43.475 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 11:56:43.476 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 11:56:43.476 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 11:56:43.478 +02:00 [DBG] Error Url: /home/error
2019-07-02 11:56:43.480 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 11:59:54.841 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 11:59:54.860 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 11:59:54.871 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 11:59:54.878 +02:00 [DBG] Start discovery request
2019-07-02 11:59:56.035 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 11:59:56.601 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 11:59:56.606 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 11:59:56.609 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 11:59:56.616 +02:00 [DBG] Start key discovery request
2019-07-02 11:59:56.898 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 11:59:56.907 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 11:59:56.913 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 11:59:56.932 +02:00 [DBG] Processing signout request for bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:59:56.946 +02:00 [DBG] Start end session request validation
2019-07-02 11:59:56.957 +02:00 [DBG] Start identity token validation
2019-07-02 11:59:57.537 +02:00 [DBG] SampleClient found in database: true
2019-07-02 11:59:57.551 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 11:59:57.553 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 11:59:57.870 +02:00 [WRN] No user found matching subject Id: bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:59:57.876 +02:00 [ERR] User marked as not active: bfb5c3d8-4a21-46bd-a165-2dc0287b0886
2019-07-02 11:59:57.909 +02:00 [INF] End session request validation failure: Error validating id token hint
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIDqFmWVIlZQvxmS1AjaeovwTAqTs3a87NVc-MpgRqjRP_ai-o03kAPbgHCLpMPKuK7HZ01N_nELpeDsZAtOkVRCpGDs-XHgBnMeoslctF4S0CzXdsMFm58NJd3UgDGMY9oG5El8VnH8v-LAAkyZldJV","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 11:59:57.927 +02:00 [ERR] Error processing end session request Invalid request
2019-07-02 12:00:03.385 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 12:00:03.601 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 12:00:03.610 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:00:03.619 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 12:00:03.804 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 12:00:03.832 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 12:00:03.840 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 12:00:03.871 +02:00 [DBG] Processing signout callback request
2019-07-02 12:00:04.024 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:00:04.027 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:00:04.033 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 12:00:04.036 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 12:00:04.044 +02:00 [INF] Successful signout callback.
2019-07-02 12:00:04.047 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 12:00:04.049 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 12:01:26.336 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 12:01:26.415 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 12:01:26.416 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 12:01:26.417 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 12:01:26.417 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 12:01:26.418 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 12:01:26.419 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 12:01:27.298 +02:00 [DBG] Starting grant removal
2019-07-02 12:01:31.210 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 12:01:31.256 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 12:01:31.273 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 12:01:31.282 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 12:01:31.294 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 12:01:31.306 +02:00 [DBG] Error Url: /home/error
2019-07-02 12:01:31.353 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 12:01:55.127 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 12:01:55.164 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 12:01:55.167 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 12:01:55.172 +02:00 [DBG] Start discovery request
2019-07-02 12:01:56.035 +02:00 [DBG] Found ["openid","profile","sampleAPI"] as all scopes in database
2019-07-02 12:01:56.254 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 12:01:56.259 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 12:01:56.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 12:01:56.265 +02:00 [DBG] Start key discovery request
2019-07-02 12:01:56.384 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:01:56.479 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:01:56.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:01:56.501 +02:00 [DBG] Start authorize request
2019-07-02 12:01:56.538 +02:00 [DBG] No user present in authorize request
2019-07-02 12:01:56.560 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:01:57.097 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:01:57.105 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:01:57.194 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:01:57.251 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:01:57.263 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:01:57.266 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:01:57.275 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:01:57.295 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","UiLocales":null,"Nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","state":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:01:57.325 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:01:57.426 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:01:57.432 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:01:57.433 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:01:57.438 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:01:57.443 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:01:57.448 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:01:57.452 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:01:57.453 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:01:57.468 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:01:57.469 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:01:59.775 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 12:02:03.579 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 12:02:16.268 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:02:16.271 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 12:02:16.281 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:02:16.294 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:02:16.342 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:02:16.347 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:02:16.355 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:02:16.362 +02:00 [DBG] Start authorize callback request
2019-07-02 12:02:16.370 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:02:16.373 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:02:16.436 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:16.437 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:16.459 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:16.472 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:16.476 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:16.480 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:16.482 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:02:16.487 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","UiLocales":null,"Nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e02a5268e0344de04f880cbc14f1c86c","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","state":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:02:16.576 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: false
2019-07-02 12:02:16.579 +02:00 [DBG] user_consent grant with value: SampleClient|e8adf7ad-c928-4812-9a16-69ab712ae0e9 not found in store.
2019-07-02 12:02:16.581 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 12:02:16.582 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 12:02:16.623 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:02:16.635 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:16.636 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:16.641 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:16.647 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:16.653 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:16.661 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:16.663 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:02:16.676 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:16.677 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:16.686 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:16.692 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:19.693 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 12:02:19.784 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:02:19.795 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:19.796 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:19.807 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:19.812 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:19.817 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:19.824 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:19.826 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:02:19.861 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:19.862 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:19.883 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:02:19.887 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:02:19.889 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:02:19.892 +02:00 [DBG] Start authorize callback request
2019-07-02 12:02:19.904 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:02:19.908 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:02:19.926 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:02:19.927 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:02:19.935 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:19.941 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:19.956 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:02:19.962 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:02:19.966 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:02:19.978 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","UiLocales":null,"Nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e02a5268e0344de04f880cbc14f1c86c","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","state":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:02:20.035 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: false
2019-07-02 12:02:20.040 +02:00 [DBG] user_consent grant with value: SampleClient|e8adf7ad-c928-4812-9a16-69ab712ae0e9 not found in store.
2019-07-02 12:02:20.043 +02:00 [DBG] Found no prior consent from consent store, consent is required
2019-07-02 12:02:20.058 +02:00 [INF] User consented to scopes: ["openid","profile"]
2019-07-02 12:02:20.063 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2019-07-02 12:02:20.071 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:02:20.116 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= not found in database
2019-07-02 12:02:20.233 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 12:02:20.255 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-02 12:02:20.467 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIBTZ37qk0-Oj58HXwa26qk3W1727CZr0xcumhKyB3AKH6TQ8z8Ovy6guv1KXQzv6gHzlIm4ZlkxJbL6P393CBqZzH5tz3pXKVUEZvGbj_vRuTbrWMHluChrCX7Y-Tv5K2ZdSDaGP987EhRHDaSn0jOi5WQVtouoz0eTadl6XY-AQLYilawGtsVRMl4LS0V2EaXn9USHnq8flZuGmgM5scaE5KMy09gskmoklJgN_9iWPiA8lJDoHK1Vbx1uYA9DJQPpHp0_NVIHBm24LhpecnNR_Hf9NNN1PrLnh9rxOq6CXg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 12:02:20.499 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:02:20.500 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:09:55.064 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 12:09:55.128 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 12:09:55.129 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 12:09:55.129 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 12:09:55.130 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 12:09:55.131 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 12:09:55.132 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 12:09:55.493 +02:00 [DBG] Starting grant removal
2019-07-02 12:09:57.768 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 12:09:57.787 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 12:09:57.792 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 12:09:57.800 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 12:09:57.802 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 12:09:57.803 +02:00 [DBG] Error Url: /home/error
2019-07-02 12:09:57.805 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 12:12:40.227 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 12:12:40.239 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 12:12:40.242 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 12:12:40.253 +02:00 [DBG] Start discovery request
2019-07-02 12:12:40.877 +02:00 [DBG] Found ["openid","profile","email","sampleAPI"] as all scopes in database
2019-07-02 12:12:41.178 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 12:12:41.188 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 12:12:41.190 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 12:12:41.200 +02:00 [DBG] Start key discovery request
2019-07-02 12:12:41.299 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 12:12:41.320 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 12:12:41.322 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 12:12:41.342 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:12:41.355 +02:00 [DBG] Start end session request validation
2019-07-02 12:12:41.369 +02:00 [DBG] Start identity token validation
2019-07-02 12:12:41.887 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:12:41.918 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:12:41.930 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 12:12:42.447 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-02 12:12:42.481 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562061740,"exp":1562062040,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976585163187095.NDk4ZjljNjYtZjY2NC00OTdmLWFkYmEtMDg4YmRiZmVjMWEyMDA3NmJmNmEtOWMxZi00Y2UwLTgyNjYtOTRmN2JlMzg1YzRk","iat":1562061740,"sid":"e02a5268e0344de04f880cbc14f1c86c","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562061736,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-02 12:12:42.555 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDjnP8e1mEoGz5vsPiD4pBbw219hK2GKZBedPl-l_a0sars_w3MGpMWmIKEUCqjCDTSa68Rrs73QOi54Bg_L2Cq7tbiksWWKCx1dzXmGU3uAz8oqa77XodKvj5HyEUsYqpT-7umNSK4QDM4X8o7stuJ","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIDjnP8e1mEoGz5vsPiD4pBbw219hK2GKZBedPl-l_a0sars_w3MGpMWmIKEUCqjCDTSa68Rrs73QOi54Bg_L2Cq7tbiksWWKCx1dzXmGU3uAz8oqa77XodKvj5HyEUsYqpT-7umNSK4QDM4X8o7stuJ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 12:12:42.588 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-02 12:12:42.832 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 12:12:42.841 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:12:42.848 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 12:12:42.971 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 12:12:43.012 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 12:12:43.026 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 12:12:43.038 +02:00 [DBG] Processing signout callback request
2019-07-02 12:12:43.079 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:12:43.081 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:12:43.087 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 12:12:43.088 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 12:12:43.093 +02:00 [INF] Successful signout callback.
2019-07-02 12:12:43.095 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 12:12:43.097 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 12:12:50.131 +02:00 [ERR] Exception reading protected message
System.Security.Cryptography.CryptographicException: The payload was invalid.
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.DangerousUnprotect(Byte[] protectedData, Boolean ignoreRevocationErrors, Boolean& requiresMigration, Boolean& wasRevoked)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at IdentityServer4.Stores.ProtectedDataMessageStore`1.ReadAsync(String value) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\Default\ProtectedDataMessageStore.cs:line 37
2019-07-02 12:12:56.951 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:12:56.978 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:12:57.022 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:12:57.071 +02:00 [DBG] Start authorize request
2019-07-02 12:12:57.091 +02:00 [DBG] No user present in authorize request
2019-07-02 12:12:57.106 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:12:57.215 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:12:57.234 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:12:57.469 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:12:57.595 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:12:57.620 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:12:57.629 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:12:57.645 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:12:57.665 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDc_XUGyupeDdqtRTDoX0Anw0NJHuFHZuZyjTYqQQhmytZugLTWfca7KuJgTPXXUEDSepC_DzDd50EUU9ZPnzGaKOMd334hd2BUjGEVFPBO65fYY0bLrxh3yIUSYiszBhe-W7o1zWlE0WSluDNSSZMctiqfam2L33yosqCnlO4ArMy7vpJB2yt8UML0IeAgDHoWkYB9-hJK4ExTCNoe3div46X7gflm3kI62cwCbaYkQqrRe5NJFR4oPKMWRANHlkIsYRyJoVS6PxcGKl-ga3vD7eWCmcjtTmiEm7XNpGCncw","UiLocales":null,"Nonce":"636976591769152046.MThhNjhkMzQtNGM3NS00MGEyLWI0ZGEtNjNkMDZiYmMzMmYyMzc4MzA2YzEtNTVlMy00MWIxLWE1M2MtMWFlYzI3NjhlYjRj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976591769152046.MThhNjhkMzQtNGM3NS00MGEyLWI0ZGEtNjNkMDZiYmMzMmYyMzc4MzA2YzEtNTVlMy00MWIxLWE1M2MtMWFlYzI3NjhlYjRj","state":"CfDJ8BST-4sCksNFlez27BzseIDc_XUGyupeDdqtRTDoX0Anw0NJHuFHZuZyjTYqQQhmytZugLTWfca7KuJgTPXXUEDSepC_DzDd50EUU9ZPnzGaKOMd334hd2BUjGEVFPBO65fYY0bLrxh3yIUSYiszBhe-W7o1zWlE0WSluDNSSZMctiqfam2L33yosqCnlO4ArMy7vpJB2yt8UML0IeAgDHoWkYB9-hJK4ExTCNoe3div46X7gflm3kI62cwCbaYkQqrRe5NJFR4oPKMWRANHlkIsYRyJoVS6PxcGKl-ga3vD7eWCmcjtTmiEm7XNpGCncw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:12:57.723 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:12:57.781 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:12:57.801 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:12:57.803 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:12:57.818 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:12:57.829 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:12:57.838 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:12:57.844 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:12:57.847 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:12:57.872 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:12:57.873 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:12:59.959 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 12:13:03.153 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 12:13:09.535 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:13:09.537 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 12:13:09.547 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:13:09.555 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:13:09.590 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:13:09.598 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:13:09.599 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:13:09.618 +02:00 [DBG] Start authorize callback request
2019-07-02 12:13:09.625 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:13:09.630 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:13:09.668 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:09.668 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:13:09.690 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:09.701 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:09.707 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:09.712 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:09.714 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:13:09.718 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIDc_XUGyupeDdqtRTDoX0Anw0NJHuFHZuZyjTYqQQhmytZugLTWfca7KuJgTPXXUEDSepC_DzDd50EUU9ZPnzGaKOMd334hd2BUjGEVFPBO65fYY0bLrxh3yIUSYiszBhe-W7o1zWlE0WSluDNSSZMctiqfam2L33yosqCnlO4ArMy7vpJB2yt8UML0IeAgDHoWkYB9-hJK4ExTCNoe3div46X7gflm3kI62cwCbaYkQqrRe5NJFR4oPKMWRANHlkIsYRyJoVS6PxcGKl-ga3vD7eWCmcjtTmiEm7XNpGCncw","UiLocales":null,"Nonce":"636976591769152046.MThhNjhkMzQtNGM3NS00MGEyLWI0ZGEtNjNkMDZiYmMzMmYyMzc4MzA2YzEtNTVlMy00MWIxLWE1M2MtMWFlYzI3NjhlYjRj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"e2056ba69f085d8cbb45da342c6bce81","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976591769152046.MThhNjhkMzQtNGM3NS00MGEyLWI0ZGEtNjNkMDZiYmMzMmYyMzc4MzA2YzEtNTVlMy00MWIxLWE1M2MtMWFlYzI3NjhlYjRj","state":"CfDJ8BST-4sCksNFlez27BzseIDc_XUGyupeDdqtRTDoX0Anw0NJHuFHZuZyjTYqQQhmytZugLTWfca7KuJgTPXXUEDSepC_DzDd50EUU9ZPnzGaKOMd334hd2BUjGEVFPBO65fYY0bLrxh3yIUSYiszBhe-W7o1zWlE0WSluDNSSZMctiqfam2L33yosqCnlO4ArMy7vpJB2yt8UML0IeAgDHoWkYB9-hJK4ExTCNoe3div46X7gflm3kI62cwCbaYkQqrRe5NJFR4oPKMWRANHlkIsYRyJoVS6PxcGKl-ga3vD7eWCmcjtTmiEm7XNpGCncw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:13:09.793 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-02 12:13:09.806 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-02 12:13:09.818 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 12:13:09.828 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-02 12:13:09.901 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIDc_XUGyupeDdqtRTDoX0Anw0NJHuFHZuZyjTYqQQhmytZugLTWfca7KuJgTPXXUEDSepC_DzDd50EUU9ZPnzGaKOMd334hd2BUjGEVFPBO65fYY0bLrxh3yIUSYiszBhe-W7o1zWlE0WSluDNSSZMctiqfam2L33yosqCnlO4ArMy7vpJB2yt8UML0IeAgDHoWkYB9-hJK4ExTCNoe3div46X7gflm3kI62cwCbaYkQqrRe5NJFR4oPKMWRANHlkIsYRyJoVS6PxcGKl-ga3vD7eWCmcjtTmiEm7XNpGCncw","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 12:13:09.918 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:13:09.919 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:13:17.156 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 12:13:17.160 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 12:13:17.162 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 12:13:17.168 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:13:17.176 +02:00 [DBG] Start end session request validation
2019-07-02 12:13:17.178 +02:00 [DBG] Start identity token validation
2019-07-02 12:13:17.195 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:17.196 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:13:17.200 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 12:13:17.210 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-02 12:13:17.211 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562062389,"exp":1562062689,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976591769152046.MThhNjhkMzQtNGM3NS00MGEyLWI0ZGEtNjNkMDZiYmMzMmYyMzc4MzA2YzEtNTVlMy00MWIxLWE1M2MtMWFlYzI3NjhlYjRj","iat":1562062389,"sid":"e2056ba69f085d8cbb45da342c6bce81","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562062389,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-02 12:13:17.225 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAWY_9awxOwZvW7Wsz4SbIlsZ8dY8XXEf1p7TPOFr8oL0Lj_0R3NvVx6XemtK1lJuBWciNM7KQ6PJyli051mvVDsY350sXw7Z_VxQHzMSOjcDsv13b6YXyAdyp6uMw3wmYt7YALvVh6fFD4TkOR8eld","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIAWY_9awxOwZvW7Wsz4SbIlsZ8dY8XXEf1p7TPOFr8oL0Lj_0R3NvVx6XemtK1lJuBWciNM7KQ6PJyli051mvVDsY350sXw7Z_VxQHzMSOjcDsv13b6YXyAdyp6uMw3wmYt7YALvVh6fFD4TkOR8eld","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 12:13:17.236 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-02 12:13:17.246 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 12:13:17.248 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:13:17.253 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 12:13:17.333 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 12:13:17.342 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 12:13:17.371 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 12:13:17.385 +02:00 [DBG] Processing signout callback request
2019-07-02 12:13:17.443 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:17.445 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:13:17.453 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 12:13:17.455 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 12:13:17.460 +02:00 [INF] Successful signout callback.
2019-07-02 12:13:17.461 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 12:13:17.462 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 12:13:25.634 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:13:25.638 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:13:25.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:13:25.645 +02:00 [DBG] Start authorize request
2019-07-02 12:13:25.649 +02:00 [DBG] No user present in authorize request
2019-07-02 12:13:25.651 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:13:25.657 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:25.662 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:13:25.668 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:25.672 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:25.678 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:25.681 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:25.684 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:13:25.687 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIA7-lRrfW_JpE6aGVoO8X74m99KQgLKfE9_yrhhuNu1liLd9C_EUAkfhwFKd6roh4ut6FIxQh73JrrkSDJNkcJTinOw5RDrAYcj9np66milns7DmhPro7q2BoU9WlLIeEhuou26DQ9Z3D-a1cYT3ugZSAd4Q5TyVRZ7Z4THJYoQitYJWXRb8Cyoq6K_J6dgnDDPLH7gcjXijGwiDOpnQLqCpgPCXKUSStkEOi5LkjnZU_wq-kL2PLE0LK2J6_LaQWmJD8jg81RE_ipaqM8vE0cTHJ6mHLdktDSK0ChY4cmC8w","UiLocales":null,"Nonce":"636976592056190495.MzEwYWRlY2YtODU1OC00Nzk0LWEzZGEtMDcxMzczZjg2NWU2NGI4MmU2NTAtYmVhZC00YTAwLTgxM2EtMWM0ZmQ1NDJkNDgy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976592056190495.MzEwYWRlY2YtODU1OC00Nzk0LWEzZGEtMDcxMzczZjg2NWU2NGI4MmU2NTAtYmVhZC00YTAwLTgxM2EtMWM0ZmQ1NDJkNDgy","state":"CfDJ8BST-4sCksNFlez27BzseIA7-lRrfW_JpE6aGVoO8X74m99KQgLKfE9_yrhhuNu1liLd9C_EUAkfhwFKd6roh4ut6FIxQh73JrrkSDJNkcJTinOw5RDrAYcj9np66milns7DmhPro7q2BoU9WlLIeEhuou26DQ9Z3D-a1cYT3ugZSAd4Q5TyVRZ7Z4THJYoQitYJWXRb8Cyoq6K_J6dgnDDPLH7gcjXijGwiDOpnQLqCpgPCXKUSStkEOi5LkjnZU_wq-kL2PLE0LK2J6_LaQWmJD8jg81RE_ipaqM8vE0cTHJ6mHLdktDSK0ChY4cmC8w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:13:25.707 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:13:25.716 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:13:25.721 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:25.722 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:13:25.732 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:25.735 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:25.740 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:13:25.744 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:13:25.745 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:13:25.755 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:13:25.756 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:14:12.347 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 12:14:12.365 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 12:14:12.404 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 12:14:12.419 +02:00 [DBG] Start discovery request
2019-07-02 12:14:12.522 +02:00 [DBG] Found ["openid","profile","email","sampleAPI"] as all scopes in database
2019-07-02 12:14:41.532 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:14:41.541 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:14:41.547 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:14:41.552 +02:00 [DBG] Start authorize request
2019-07-02 12:14:41.554 +02:00 [DBG] No user present in authorize request
2019-07-02 12:14:41.555 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:14:41.724 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:14:41.732 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:14:41.757 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:14:41.783 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:14:41.820 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:14:41.837 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:14:41.845 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:14:41.850 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAwofUhOdOVjuCXk-cEhnMTtRWt2AQRSS0Gu3Ew4XBo876rSCzMa4oI5t-2WEfe8j-9qKgUusE8lWSw4zAGhhHAHbgX6s2vM11a3TLnSeAWan4_EWeHklIkzQUG1GeXrFZ1LcTsRPPd-fbwnzFBGK3lHQib76vdJIm4MMsT4jTGHpHjoUiDbL-pZiB-l15d1oY3uIsl5S8itvkrccoUVtaejnC8I0u6Z4rvjPP6HpK3a5EbV3_bmkp68JwXi8FHFK5OVD7ZsSgMx44iUB2CHsruChy6UvuYC8H3gcdI1wYKSg","UiLocales":null,"Nonce":"636976592811826911.NjliODQxNjAtMTg2OS00NjM1LTk5YTctYWM3N2M3ZDVlY2Y1ZTA3YjU1YjQtZWY1MC00MzU4LWIzNmEtODU4YTI5MTdhNDdk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976592811826911.NjliODQxNjAtMTg2OS00NjM1LTk5YTctYWM3N2M3ZDVlY2Y1ZTA3YjU1YjQtZWY1MC00MzU4LWIzNmEtODU4YTI5MTdhNDdk","state":"CfDJ8BST-4sCksNFlez27BzseIAwofUhOdOVjuCXk-cEhnMTtRWt2AQRSS0Gu3Ew4XBo876rSCzMa4oI5t-2WEfe8j-9qKgUusE8lWSw4zAGhhHAHbgX6s2vM11a3TLnSeAWan4_EWeHklIkzQUG1GeXrFZ1LcTsRPPd-fbwnzFBGK3lHQib76vdJIm4MMsT4jTGHpHjoUiDbL-pZiB-l15d1oY3uIsl5S8itvkrccoUVtaejnC8I0u6Z4rvjPP6HpK3a5EbV3_bmkp68JwXi8FHFK5OVD7ZsSgMx44iUB2CHsruChy6UvuYC8H3gcdI1wYKSg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:14:41.896 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:14:41.930 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:14:41.942 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:14:41.943 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:14:41.953 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:14:41.959 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:14:41.966 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:14:41.971 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:14:41.976 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:14:41.989 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:14:41.992 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:14:44.719 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 12:15:21.271 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 12:15:27.702 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:15:27.718 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 12:15:27.724 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:15:27.732 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:15:27.767 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:15:27.798 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:15:27.815 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:15:27.844 +02:00 [DBG] Start authorize callback request
2019-07-02 12:15:27.850 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:15:27.862 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:15:27.992 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:15:27.994 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:15:28.015 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:15:28.041 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:15:28.047 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:15:28.051 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:15:28.054 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:15:28.061 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseIAwofUhOdOVjuCXk-cEhnMTtRWt2AQRSS0Gu3Ew4XBo876rSCzMa4oI5t-2WEfe8j-9qKgUusE8lWSw4zAGhhHAHbgX6s2vM11a3TLnSeAWan4_EWeHklIkzQUG1GeXrFZ1LcTsRPPd-fbwnzFBGK3lHQib76vdJIm4MMsT4jTGHpHjoUiDbL-pZiB-l15d1oY3uIsl5S8itvkrccoUVtaejnC8I0u6Z4rvjPP6HpK3a5EbV3_bmkp68JwXi8FHFK5OVD7ZsSgMx44iUB2CHsruChy6UvuYC8H3gcdI1wYKSg","UiLocales":null,"Nonce":"636976592811826911.NjliODQxNjAtMTg2OS00NjM1LTk5YTctYWM3N2M3ZDVlY2Y1ZTA3YjU1YjQtZWY1MC00MzU4LWIzNmEtODU4YTI5MTdhNDdk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"a909199fd5a57d803557a059455c9258","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976592811826911.NjliODQxNjAtMTg2OS00NjM1LTk5YTctYWM3N2M3ZDVlY2Y1ZTA3YjU1YjQtZWY1MC00MzU4LWIzNmEtODU4YTI5MTdhNDdk","state":"CfDJ8BST-4sCksNFlez27BzseIAwofUhOdOVjuCXk-cEhnMTtRWt2AQRSS0Gu3Ew4XBo876rSCzMa4oI5t-2WEfe8j-9qKgUusE8lWSw4zAGhhHAHbgX6s2vM11a3TLnSeAWan4_EWeHklIkzQUG1GeXrFZ1LcTsRPPd-fbwnzFBGK3lHQib76vdJIm4MMsT4jTGHpHjoUiDbL-pZiB-l15d1oY3uIsl5S8itvkrccoUVtaejnC8I0u6Z4rvjPP6HpK3a5EbV3_bmkp68JwXi8FHFK5OVD7ZsSgMx44iUB2CHsruChy6UvuYC8H3gcdI1wYKSg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:15:28.100 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-02 12:15:28.102 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-02 12:15:28.111 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 12:15:28.112 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-02 12:15:28.143 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAwofUhOdOVjuCXk-cEhnMTtRWt2AQRSS0Gu3Ew4XBo876rSCzMa4oI5t-2WEfe8j-9qKgUusE8lWSw4zAGhhHAHbgX6s2vM11a3TLnSeAWan4_EWeHklIkzQUG1GeXrFZ1LcTsRPPd-fbwnzFBGK3lHQib76vdJIm4MMsT4jTGHpHjoUiDbL-pZiB-l15d1oY3uIsl5S8itvkrccoUVtaejnC8I0u6Z4rvjPP6HpK3a5EbV3_bmkp68JwXi8FHFK5OVD7ZsSgMx44iUB2CHsruChy6UvuYC8H3gcdI1wYKSg","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 12:15:28.159 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:15:28.165 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:18:24.165 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-02 12:18:24.180 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-02 12:18:24.185 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-02 12:18:24.193 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:18:24.201 +02:00 [DBG] Start end session request validation
2019-07-02 12:18:24.205 +02:00 [DBG] Start identity token validation
2019-07-02 12:18:24.328 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:18:24.331 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:18:24.335 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-02 12:18:24.358 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-02 12:18:24.363 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562062528,"exp":1562062828,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976592811826911.NjliODQxNjAtMTg2OS00NjM1LTk5YTctYWM3N2M3ZDVlY2Y1ZTA3YjU1YjQtZWY1MC00MzU4LWIzNmEtODU4YTI5MTdhNDdk","iat":1562062528,"sid":"a909199fd5a57d803557a059455c9258","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562062527,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-02 12:18:24.415 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIBE6RtvHEYDnoTVmn-vGNqBjcsZQeWQOyrymSbiSdAlRZoXZT82bIgPFcnNuXNS50AvKDxevdMeKQNIHeSSHaM4oPAQjH4ekRaOOdZAHokohH0i_lhHruLXTHHD2qHOfn7DQm9-v-RPRlYWrPYOdTJB","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIBE6RtvHEYDnoTVmn-vGNqBjcsZQeWQOyrymSbiSdAlRZoXZT82bIgPFcnNuXNS50AvKDxevdMeKQNIHeSSHaM4oPAQjH4ekRaOOdZAHokohH0i_lhHruLXTHHD2qHOfn7DQm9-v-RPRlYWrPYOdTJB","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-02 12:18:24.442 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-02 12:18:24.476 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 12:18:24.500 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:18:24.519 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 12:18:24.647 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 12:18:24.775 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 12:18:24.828 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 12:18:24.842 +02:00 [DBG] Processing signout callback request
2019-07-02 12:18:24.877 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:18:24.878 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:18:24.883 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 12:18:24.884 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 12:18:24.887 +02:00 [INF] Successful signout callback.
2019-07-02 12:18:24.890 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 12:18:24.896 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 12:18:31.406 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:18:31.416 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:18:31.422 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:18:31.425 +02:00 [DBG] Start authorize request
2019-07-02 12:18:31.426 +02:00 [DBG] No user present in authorize request
2019-07-02 12:18:31.427 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:18:31.437 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:18:31.438 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:18:31.456 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:18:31.488 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:18:31.510 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:18:31.525 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:18:31.528 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:18:31.534 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICzh55UuBNrFs67HVPmGiLBbezzHHfFj7O23PgFt3l8DFhjB5T0MCqP59noS5Iv4qKRriMUlmLL7RB7dZ32L2-hnGCBg1BbknZbdZX0Ko9fi6pPyZfDwTNNALwc8NqG0s-MGDc79uTWMRNcdnp1-IaXqtlHpgdt4ygX9EzOh6aysQMkDyJUdcRvXY-fzBgDq9Ddl3p6Kc73DenvyAUaVL8kkEXMs_cGh_DA7MD_JYAlsrs_wZkRawZdZnr45aijgMXfCiBel7QDly9u7rG1qGPTalH3EH1v5NjQZbl-YViLjQ","UiLocales":null,"Nonce":"636976595113851758.OGNjY2ZkYmItOGJkMy00NmQzLWI3YzMtODM2YWQ1OTlkMjQ5N2ZmOWQxZTgtMjIyMC00NGUyLThjZWUtZjdkZDcxMTE1YzJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976595113851758.OGNjY2ZkYmItOGJkMy00NmQzLWI3YzMtODM2YWQ1OTlkMjQ5N2ZmOWQxZTgtMjIyMC00NGUyLThjZWUtZjdkZDcxMTE1YzJl","state":"CfDJ8BST-4sCksNFlez27BzseICzh55UuBNrFs67HVPmGiLBbezzHHfFj7O23PgFt3l8DFhjB5T0MCqP59noS5Iv4qKRriMUlmLL7RB7dZ32L2-hnGCBg1BbknZbdZX0Ko9fi6pPyZfDwTNNALwc8NqG0s-MGDc79uTWMRNcdnp1-IaXqtlHpgdt4ygX9EzOh6aysQMkDyJUdcRvXY-fzBgDq9Ddl3p6Kc73DenvyAUaVL8kkEXMs_cGh_DA7MD_JYAlsrs_wZkRawZdZnr45aijgMXfCiBel7QDly9u7rG1qGPTalH3EH1v5NjQZbl-YViLjQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:18:31.583 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:18:31.606 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:18:31.614 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:18:31.616 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:18:31.624 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:18:31.629 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:18:31.635 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:18:31.641 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:18:31.645 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:18:31.685 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:18:31.687 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:18:33.650 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 12:18:36.508 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 12:19:48.656 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:19:48.658 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 12:19:48.663 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:19:49.529 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:20:17.271 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:20:17.283 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:20:17.287 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:20:17.299 +02:00 [DBG] Start authorize callback request
2019-07-02 12:20:17.313 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:20:17.319 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:20:17.427 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:20:17.431 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:20:17.484 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:20:17.534 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:20:17.549 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-07-02 12:20:17.556 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:20:17.562 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:20:17.566 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8BST-4sCksNFlez27BzseICzh55UuBNrFs67HVPmGiLBbezzHHfFj7O23PgFt3l8DFhjB5T0MCqP59noS5Iv4qKRriMUlmLL7RB7dZ32L2-hnGCBg1BbknZbdZX0Ko9fi6pPyZfDwTNNALwc8NqG0s-MGDc79uTWMRNcdnp1-IaXqtlHpgdt4ygX9EzOh6aysQMkDyJUdcRvXY-fzBgDq9Ddl3p6Kc73DenvyAUaVL8kkEXMs_cGh_DA7MD_JYAlsrs_wZkRawZdZnr45aijgMXfCiBel7QDly9u7rG1qGPTalH3EH1v5NjQZbl-YViLjQ","UiLocales":null,"Nonce":"636976595113851758.OGNjY2ZkYmItOGJkMy00NmQzLWI3YzMtODM2YWQ1OTlkMjQ5N2ZmOWQxZTgtMjIyMC00NGUyLThjZWUtZjdkZDcxMTE1YzJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"b9791a1e33f48cb600741823854e9e81","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636976595113851758.OGNjY2ZkYmItOGJkMy00NmQzLWI3YzMtODM2YWQ1OTlkMjQ5N2ZmOWQxZTgtMjIyMC00NGUyLThjZWUtZjdkZDcxMTE1YzJl","state":"CfDJ8BST-4sCksNFlez27BzseICzh55UuBNrFs67HVPmGiLBbezzHHfFj7O23PgFt3l8DFhjB5T0MCqP59noS5Iv4qKRriMUlmLL7RB7dZ32L2-hnGCBg1BbknZbdZX0Ko9fi6pPyZfDwTNNALwc8NqG0s-MGDc79uTWMRNcdnp1-IaXqtlHpgdt4ygX9EzOh6aysQMkDyJUdcRvXY-fzBgDq9Ddl3p6Kc73DenvyAUaVL8kkEXMs_cGh_DA7MD_JYAlsrs_wZkRawZdZnr45aijgMXfCiBel7QDly9u7rG1qGPTalH3EH1v5NjQZbl-YViLjQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:20:17.644 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-02 12:20:17.647 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-02 12:20:17.659 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 12:20:17.669 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-02 12:20:17.736 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICzh55UuBNrFs67HVPmGiLBbezzHHfFj7O23PgFt3l8DFhjB5T0MCqP59noS5Iv4qKRriMUlmLL7RB7dZ32L2-hnGCBg1BbknZbdZX0Ko9fi6pPyZfDwTNNALwc8NqG0s-MGDc79uTWMRNcdnp1-IaXqtlHpgdt4ygX9EzOh6aysQMkDyJUdcRvXY-fzBgDq9Ddl3p6Kc73DenvyAUaVL8kkEXMs_cGh_DA7MD_JYAlsrs_wZkRawZdZnr45aijgMXfCiBel7QDly9u7rG1qGPTalH3EH1v5NjQZbl-YViLjQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 12:20:17.755 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:20:17.760 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:34:26.932 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 12:34:26.993 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 12:34:26.994 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 12:34:26.995 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 12:34:26.995 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 12:34:26.996 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 12:34:26.997 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 12:34:27.199 +02:00 [DBG] Starting grant removal
2019-07-02 12:34:32.349 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 12:34:32.409 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 12:34:32.415 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 12:34:32.425 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 12:34:32.428 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 12:34:32.431 +02:00 [DBG] Error Url: /home/error
2019-07-02 12:34:32.436 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 12:35:49.708 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-02 12:35:49.763 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-02 12:35:49.770 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-02 12:35:49.781 +02:00 [DBG] Start discovery request
2019-07-02 12:35:51.371 +02:00 [DBG] Found ["openid","profile","email","sampleAPI"] as all scopes in database
2019-07-02 12:35:51.730 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-02 12:35:51.736 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-02 12:35:51.740 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-02 12:35:51.754 +02:00 [DBG] Start key discovery request
2019-07-02 12:35:52.085 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-02 12:35:52.134 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-02 12:35:52.146 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-02 12:35:52.203 +02:00 [DBG] Start authorize request
2019-07-02 12:35:52.263 +02:00 [DBG] No user present in authorize request
2019-07-02 12:35:52.288 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:35:53.140 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:35:53.161 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:35:53.339 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:35:53.456 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:35:53.478 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:35:53.487 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:35:53.499 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:35:53.531 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","UiLocales":null,"Nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","state":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:35:53.594 +02:00 [INF] Showing login: User is not authenticated
2019-07-02 12:35:53.752 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:35:53.767 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:35:53.768 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:35:53.776 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:35:53.781 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:35:53.791 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:35:53.802 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:35:53.806 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:35:53.825 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:35:53.826 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:35:59.176 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 12:36:02.510 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 12:36:10.913 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:36:10.920 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 12:36:10.932 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 12:36:10.950 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 12:36:11.021 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:36:11.024 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:36:11.026 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:36:11.035 +02:00 [DBG] Start authorize callback request
2019-07-02 12:36:11.039 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:36:11.041 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:36:11.082 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:11.083 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:11.101 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:11.120 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:11.125 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:11.135 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:11.140 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:36:11.146 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","UiLocales":null,"Nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ff00e9c18d525d126c453cf1bf5c42b0","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","state":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:36:11.252 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-02 12:36:11.269 +02:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-07-02 12:36:11.272 +02:00 [INF] Showing consent: User has not yet consented
2019-07-02 12:36:11.326 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:36:11.335 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:11.336 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:11.342 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:11.352 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:11.356 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:11.361 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:11.363 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:36:11.370 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:11.371 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:11.381 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:11.387 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:15.805 +02:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 12:36:15.908 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:36:15.918 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:15.920 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:15.945 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:15.970 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:16.018 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:16.041 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:16.046 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:36:16.081 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:16.083 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:16.102 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-02 12:36:16.111 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-02 12:36:16.118 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-02 12:36:16.125 +02:00 [DBG] Start authorize callback request
2019-07-02 12:36:16.135 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:36:16.141 +02:00 [DBG] Start authorize request protocol validation
2019-07-02 12:36:16.151 +02:00 [DBG] SampleClient found in database: true
2019-07-02 12:36:16.152 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 12:36:16.165 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:16.176 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:16.185 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 12:36:16.194 +02:00 [DBG] Found [] API scopes in database
2019-07-02 12:36:16.196 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-02 12:36:16.200 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","UiLocales":null,"Nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"ff00e9c18d525d126c453cf1bf5c42b0","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636976605518410799.MjEzNjQ5MzUtN2ZiZS00Y2FkLWI3NDEtODMyZmY1NGU3MjFiNmIwNDkwZDItNTVkYi00Yjk1LThkZDMtNDNiODc0MmM3MWMx","state":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-02 12:36:16.260 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-02 12:36:16.263 +02:00 [DBG] Consent found in consent store is different than current request, consent is required
2019-07-02 12:36:16.271 +02:00 [INF] User consented to scopes: ["openid","profile","email"]
2019-07-02 12:36:16.276 +02:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2019-07-02 12:36:16.285 +02:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 12:36:16.320 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database
2019-07-02 12:36:16.428 +02:00 [DBG] Creating Implicit Flow response.
2019-07-02 12:36:16.446 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-02 12:36:16.643 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIBWL9m7_aa36RZh253Dre-nepDpUFcYACbXEmaKftbo81VSXCZx2LsIKfPiuvCrSc5y5MCDzyBRXBqXPexbM9BG-sx1DLmZgl7M9ByLqn8Rnt877aMUJGBHhHKzDWATxPPm4pyB5B_0Ke0PUhfmq-0BIkkivawf1hxvyudFZjUFOqM0QHO0mo9oTNFmimnf8bCMGobWOQaWaN_MllXiAjk5IxXhIQ4S2njduGlKiiBec4FDNdgEo2hBs7LyFfZlvtsA-4eG8abwpQjMgeBmurmer7RJCtZBMyj3QIvWi6QRlg","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-02 12:36:16.691 +02:00 [DBG] Augmenting SignInContext
2019-07-02 12:36:16.693 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 13:04:10.281 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 13:04:10.400 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 13:04:10.403 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 13:04:10.405 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 13:04:10.406 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 13:04:10.407 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 13:04:10.408 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 13:04:10.631 +02:00 [DBG] Starting grant removal
2019-07-02 13:04:13.693 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 13:04:13.706 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 13:04:13.712 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 13:04:13.727 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 13:04:13.743 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 13:04:13.760 +02:00 [DBG] Error Url: /home/error
2019-07-02 13:04:13.777 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 13:39:47.923 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 13:39:48.989 +02:00 [DBG] SampleClient found in database: true
2019-07-02 13:39:49.015 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 13:39:49.105 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 13:39:49.249 +02:00 [DBG] Found [] API scopes in database
2019-07-02 13:42:11.431 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 13:42:11.502 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 13:42:11.504 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 13:42:11.505 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 13:42:11.505 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 13:42:11.506 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 13:42:11.507 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 13:42:11.988 +02:00 [DBG] Starting grant removal
2019-07-02 13:42:15.531 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 13:42:15.538 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 13:42:15.547 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 13:42:15.552 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 13:42:15.577 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 13:42:15.586 +02:00 [DBG] Error Url: /home/error
2019-07-02 13:42:15.597 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 13:44:28.691 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 13:44:29.826 +02:00 [DBG] SampleClient found in database: true
2019-07-02 13:44:29.841 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 13:44:29.971 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 13:44:30.222 +02:00 [DBG] Found [] API scopes in database
2019-07-02 13:45:40.455 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 13:45:40.498 +02:00 [DBG] SampleClient found in database: true
2019-07-02 13:45:40.499 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 13:45:40.520 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 13:45:40.543 +02:00 [DBG] Found [] API scopes in database
2019-07-02 13:45:44.149 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 13:45:44.169 +02:00 [DBG] SampleClient found in database: true
2019-07-02 13:45:44.170 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 13:45:44.186 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 13:45:44.203 +02:00 [DBG] Found [] API scopes in database
2019-07-02 13:46:15.084 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 13:46:15.142 +02:00 [DBG] SampleClient found in database: true
2019-07-02 13:46:15.143 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 13:46:15.172 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 13:46:15.233 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:09:22.998 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 14:09:23.081 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 14:09:23.082 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 14:09:23.084 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 14:09:23.086 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 14:09:23.089 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 14:09:23.090 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 14:09:23.551 +02:00 [DBG] Starting grant removal
2019-07-02 14:09:26.926 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 14:09:26.944 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 14:09:26.978 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 14:09:26.984 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 14:09:27.001 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 14:09:27.013 +02:00 [DBG] Error Url: /home/error
2019-07-02 14:09:27.017 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 14:09:40.131 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 14:09:40.261 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 14:09:40.266 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 14:09:40.271 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 14:09:40.529 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-02 14:09:40.537 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-02 14:09:40.543 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-02 14:09:40.552 +02:00 [DBG] Processing signout callback request
2019-07-02 14:09:41.582 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:09:41.601 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:09:41.605 +02:00 [DBG] No client front-channel logout URLs
2019-07-02 14:09:41.608 +02:00 [DBG] No client back-channel logout URLs
2019-07-02 14:09:41.612 +02:00 [INF] Successful signout callback.
2019-07-02 14:09:41.613 +02:00 [DBG] No client front-channel iframe urls
2019-07-02 14:09:41.616 +02:00 [DBG] No client back-channel iframe urls
2019-07-02 14:10:34.508 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 14:10:38.163 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 14:10:38.533 +02:00 [DBG] Augmenting SignInContext
2019-07-02 14:10:38.536 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 14:10:38.542 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 14:10:38.544 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 14:15:13.096 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 14:15:13.206 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 14:15:13.209 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 14:15:13.215 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 14:15:13.217 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 14:15:13.219 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 14:15:13.220 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 14:15:13.537 +02:00 [DBG] Starting grant removal
2019-07-02 14:15:16.286 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 14:15:16.314 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 14:15:16.322 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 14:15:16.328 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 14:15:16.331 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 14:15:16.334 +02:00 [DBG] Error Url: /home/error
2019-07-02 14:15:16.337 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 14:15:24.461 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-02 14:15:24.635 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-02 14:15:24.654 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 14:15:24.663 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-02 14:15:29.433 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:20:53.535 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 14:20:53.597 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 14:20:53.598 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 14:20:53.599 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 14:20:53.600 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 14:20:53.600 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 14:20:53.601 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 14:20:53.802 +02:00 [DBG] Starting grant removal
2019-07-02 14:20:57.270 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 14:20:57.278 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 14:20:57.284 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 14:20:57.292 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 14:20:57.297 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 14:20:57.299 +02:00 [DBG] Error Url: /home/error
2019-07-02 14:20:57.301 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 14:20:58.344 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:21:13.319 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:21:15.113 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:21:16.076 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:21:17.240 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:22:00.914 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-02 14:22:02.369 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-02 14:22:06.011 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-02 14:22:06.651 +02:00 [DBG] Augmenting SignInContext
2019-07-02 14:22:06.654 +02:00 [DBG] Adding amr claim with value: external
2019-07-02 14:22:06.665 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-02 14:22:06.680 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-02 14:22:06.737 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:22:07.564 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:22:07.573 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:22:07.773 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:22:08.040 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:22:29.327 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:22:29.380 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:22:29.381 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:22:29.401 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:22:29.415 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:22:51.251 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:22:51.269 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:22:51.290 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:22:51.318 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:22:51.334 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:24:53.632 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:24:53.724 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:24:53.726 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:24:53.759 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:24:53.784 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:25:34.818 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:25:34.939 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:25:34.943 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:25:34.969 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:25:34.986 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:26:03.736 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:26:03.819 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:26:03.820 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:26:03.852 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:26:03.895 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:27:34.819 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:27:34.925 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:27:34.927 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:27:35.031 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:27:35.065 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:28:48.984 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:28:49.034 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:28:49.055 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:28:49.121 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:28:49.146 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:39:17.954 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:39:18.030 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:39:18.031 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:39:18.050 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:39:18.066 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:39:25.094 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at AspNetCore.Views_Clients_Index.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Index.cshtml:line 42
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:39:51.511 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:39:51.647 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:39:51.649 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:39:51.687 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:39:51.709 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:39:53.758 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Index.cshtml(42,40): error CS0119: 'HtmlHelperValueExtensions.Value(IHtmlHelper, string)' is a method, which is not valid in the given context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:40:36.014 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:40:36.038 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:40:36.039 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:40:36.046 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:40:36.069 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:40:40.175 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at AspNetCore.Views_Clients_Index.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Index.cshtml:line 42
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:41:43.792 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:41:43.951 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:41:43.953 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:41:43.990 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:41:44.018 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:41:45.862 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Index.cshtml(42,50): Error RZ1008: Expected a "{" but found a "@".  Block statements must be enclosed in "{" and "}".  You cannot use single-statement control-flow statements in CSHTML pages. For example, the following is not allowed:

@if(isLoggedIn)
    <p>Hello, @user</p>

Instead, wrap the contents of the block in "{}":

@if(isLoggedIn) {
    <p>Hello, @user</p>
}
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:42:25.288 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:42:25.339 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:42:25.344 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:42:25.375 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:42:25.401 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:42:27.123 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Index.cshtml(42,97): error CS1002: ; expected
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:42:34.900 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:42:34.963 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:42:34.984 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:42:35.009 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:42:35.026 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:44:13.031 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:44:13.110 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:44:13.122 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:44:13.161 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:44:13.188 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:44:28.057 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:44:28.104 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:44:28.108 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:44:28.126 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:44:28.140 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:45:30.822 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:45:30.937 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:45:30.939 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:45:30.992 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:45:31.027 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:46:29.144 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:46:29.211 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:46:29.212 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:46:29.237 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:46:29.256 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:47:11.649 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:47:11.664 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:47:11.666 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:47:11.678 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:47:11.690 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:48:01.964 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:48:02.037 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:48:02.039 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:48:02.066 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:48:02.084 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:48:40.007 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:48:40.052 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:48:40.065 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:48:40.112 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:48:40.127 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:54:56.291 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 14:54:56.348 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 14:54:56.348 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 14:54:56.349 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 14:54:56.350 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 14:54:56.350 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 14:54:56.351 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 14:54:56.552 +02:00 [DBG] Starting grant removal
2019-07-02 14:54:59.873 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 14:54:59.880 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 14:54:59.889 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 14:54:59.894 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 14:54:59.899 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 14:54:59.907 +02:00 [DBG] Error Url: /home/error
2019-07-02 14:54:59.909 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 14:55:09.017 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:55:10.168 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:55:10.180 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:55:10.268 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:55:10.509 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:55:12.493 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: RenderBody has not been called for the page at '/Views/Shared/_ClientsLayout.cshtml'. To ignore call IgnoreBody().
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-02 14:55:42.780 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:55:42.986 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:55:43.000 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:55:43.094 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:55:43.221 +02:00 [DBG] Found [] API scopes in database
2019-07-02 14:56:41.704 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 14:56:41.950 +02:00 [DBG] SampleClient found in database: true
2019-07-02 14:56:41.959 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 14:56:42.021 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 14:56:42.043 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:02:01.672 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:02:01.767 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:02:01.779 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:02:01.824 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:02:01.850 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:03:28.684 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:03:28.810 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:03:28.814 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:03:28.866 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:03:28.890 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:03:46.153 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:03:46.176 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:03:46.178 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:03:46.193 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:03:46.199 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:03:46.846 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:03:46.862 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:03:46.864 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:03:46.875 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:03:46.881 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:04:04.674 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:04:04.720 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:04:04.720 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:04:04.734 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:04:04.757 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:04:28.121 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:04:28.162 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:04:28.164 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:04:28.205 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:04:28.220 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:04:40.524 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:04:40.542 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:04:40.543 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:04:40.554 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:04:40.558 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:04:54.937 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:04:54.984 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:04:54.986 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:04:55.021 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:04:55.087 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:06:26.062 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:06:26.239 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:06:26.244 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:06:26.278 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:06:26.301 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:07:03.646 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:07:03.675 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:07:03.676 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:07:03.694 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:07:03.705 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:09:23.598 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:09:23.859 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:09:23.860 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:09:23.892 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:09:23.929 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:11:00.841 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:11:00.979 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:11:00.981 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:11:01.021 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:11:01.053 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:17:04.789 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:17:04.879 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:17:04.881 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:17:04.902 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:17:04.923 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:17:41.665 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:17:41.917 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:17:41.926 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:17:42.027 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:17:42.042 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:18:22.039 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:18:22.108 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:18:22.111 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:18:22.152 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:18:22.186 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:18:36.604 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:18:36.633 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:18:36.635 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:18:36.655 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:18:36.672 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:27:36.460 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 15:27:36.512 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 15:27:36.513 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 15:27:36.514 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 15:27:36.514 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 15:27:36.515 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 15:27:36.516 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 15:27:36.698 +02:00 [DBG] Starting grant removal
2019-07-02 15:27:40.387 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 15:27:40.398 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 15:27:40.409 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 15:27:40.416 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 15:27:40.419 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 15:27:40.420 +02:00 [DBG] Error Url: /home/error
2019-07-02 15:27:40.422 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 15:28:57.709 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 15:28:57.787 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 15:28:57.789 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 15:28:57.790 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 15:28:57.791 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 15:28:57.791 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 15:28:57.792 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 15:28:57.994 +02:00 [DBG] Starting grant removal
2019-07-02 15:29:01.588 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 15:29:01.602 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 15:29:01.606 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 15:29:01.609 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 15:29:01.611 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 15:29:01.621 +02:00 [DBG] Error Url: /home/error
2019-07-02 15:29:01.626 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 15:29:09.330 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:29:11.449 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:29:11.463 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:29:11.569 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:29:11.784 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:31:41.687 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:31:41.753 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:31:41.773 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:31:41.803 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:31:41.826 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:32:13.249 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:32:13.270 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:32:13.271 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:32:13.282 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:32:13.306 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:33:00.637 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:33:01.176 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:33:01.190 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:33:01.465 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:33:01.726 +02:00 [DBG] Found [] API scopes in database
2019-07-02 15:34:26.299 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 15:34:26.689 +02:00 [DBG] SampleClient found in database: true
2019-07-02 15:34:26.699 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 15:34:26.762 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 15:34:26.796 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:03:42.694 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:03:42.728 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:03:42.728 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:03:42.742 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:03:42.753 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:03:45.832 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:03:45.855 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:03:45.856 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:03:45.868 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:03:45.877 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:03:58.396 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:03:58.438 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:03:58.439 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:03:58.461 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:03:58.473 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:04:12.067 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:04:12.116 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:04:12.117 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:04:12.139 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:04:12.159 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:05:21.939 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 16:05:22.013 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 16:05:22.014 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 16:05:22.015 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 16:05:22.015 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 16:05:22.016 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 16:05:22.016 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 16:05:22.245 +02:00 [DBG] Starting grant removal
2019-07-02 16:05:25.957 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 16:05:25.979 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 16:05:25.994 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 16:05:25.997 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 16:05:26.002 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 16:05:26.004 +02:00 [DBG] Error Url: /home/error
2019-07-02 16:05:26.011 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 16:05:32.890 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:05:34.150 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:05:34.162 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:05:34.284 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:05:34.664 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:10:32.436 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 16:10:32.605 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 16:10:32.626 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 16:10:32.673 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 16:10:32.689 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 16:10:32.754 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 16:10:32.801 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 16:10:33.549 +02:00 [DBG] Starting grant removal
2019-07-02 16:10:37.903 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 16:10:37.931 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 16:10:37.955 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 16:10:37.988 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 16:10:38.004 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 16:10:38.038 +02:00 [DBG] Error Url: /home/error
2019-07-02 16:10:38.111 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 16:10:45.480 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:10:46.969 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:10:46.985 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:10:47.088 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:10:47.363 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:13:01.639 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 16:13:01.729 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 16:13:01.731 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 16:13:01.732 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 16:13:01.733 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 16:13:01.734 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 16:13:01.735 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 16:13:01.987 +02:00 [DBG] Starting grant removal
2019-07-02 16:13:05.406 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 16:13:05.413 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 16:13:05.417 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 16:13:05.418 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 16:13:05.420 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 16:13:05.421 +02:00 [DBG] Error Url: /home/error
2019-07-02 16:13:05.423 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 16:13:13.953 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:13:15.104 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:13:15.115 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:13:15.240 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:13:15.425 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:20:23.428 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-02 16:20:23.991 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-02 16:20:24.002 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-02 16:20:24.008 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-02 16:20:24.014 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-02 16:20:24.017 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-02 16:20:24.025 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-02 16:20:28.394 +02:00 [DBG] Starting grant removal
2019-07-02 16:20:31.153 +02:00 [DBG] Login Url: /Account/Login
2019-07-02 16:20:31.163 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-02 16:20:31.176 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-02 16:20:31.194 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-02 16:20:31.208 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-02 16:20:31.210 +02:00 [DBG] Error Url: /home/error
2019-07-02 16:20:31.212 +02:00 [DBG] Error Id Parameter: errorId
2019-07-02 16:20:33.960 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:20:35.356 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:20:35.364 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:20:35.459 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:20:35.637 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:23:06.540 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:23:06.621 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:23:06.641 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:23:06.685 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:23:06.706 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:24:08.018 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:24:08.204 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:24:08.207 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:24:08.241 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:24:08.269 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:24:32.575 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:24:32.584 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:24:32.585 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:24:32.592 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:24:32.595 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:25:02.098 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:25:02.151 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:25:02.152 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:25:02.171 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:25:02.182 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:27:02.043 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:27:02.132 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:27:02.133 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:27:02.167 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:27:02.191 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:37:47.722 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:37:47.798 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:37:47.799 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:37:47.823 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:37:47.839 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:37:59.887 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:38:00.260 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:38:00.267 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:38:00.324 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:38:00.356 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:39:37.075 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:39:37.264 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:39:37.266 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:39:37.343 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:39:37.388 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:40:17.576 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:40:17.791 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:40:17.800 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:40:17.840 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:40:17.878 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:42:24.592 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:42:25.109 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:42:25.121 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:42:25.188 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:42:25.276 +02:00 [DBG] Found [] API scopes in database
2019-07-02 16:42:48.783 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-02 16:42:48.883 +02:00 [DBG] SampleClient found in database: true
2019-07-02 16:42:48.890 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-02 16:42:48.918 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-02 16:42:48.944 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:12:48.580 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 09:12:48.895 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 09:12:48.898 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 09:12:48.898 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 09:12:48.899 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 09:12:48.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 09:12:48.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 09:12:50.143 +02:00 [DBG] Starting grant removal
2019-07-03 09:13:19.076 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 09:13:19.079 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 09:13:19.083 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 09:13:19.085 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 09:13:19.087 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 09:13:19.089 +02:00 [DBG] Error Url: /home/error
2019-07-03 09:13:19.091 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 09:13:21.172 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 09:13:52.497 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:14:11.183 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 09:14:11.890 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:14:11.893 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 09:14:11.906 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:14:11.916 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:14:26.199 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:14:27.324 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:14:27.331 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:14:27.410 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:14:27.606 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:22:46.216 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 09:22:46.314 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 09:22:46.315 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 09:22:46.316 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 09:22:46.317 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 09:22:46.318 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 09:22:46.319 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 09:22:46.689 +02:00 [DBG] Starting grant removal
2019-07-03 09:22:53.564 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 09:22:53.583 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 09:22:53.588 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 09:22:53.600 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 09:22:53.602 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 09:22:53.620 +02:00 [DBG] Error Url: /home/error
2019-07-03 09:22:53.631 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 09:22:54.565 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 09:24:29.923 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-03 09:24:29.936 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-03 09:24:29.953 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-03 09:24:29.965 +02:00 [DBG] Start discovery request
2019-07-03 09:24:30.469 +02:00 [DBG] Found ["openid","profile","email","sampleAPI"] as all scopes in database
2019-07-03 09:24:31.412 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-03 09:24:31.418 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-03 09:24:31.424 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-03 09:24:31.432 +02:00 [DBG] Start key discovery request
2019-07-03 09:24:31.773 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-03 09:24:31.789 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-03 09:24:31.792 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-03 09:24:31.806 +02:00 [DBG] Start authorize request
2019-07-03 09:24:31.820 +02:00 [DBG] No user present in authorize request
2019-07-03 09:24:31.827 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:24:32.064 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:24:32.073 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:24:32.161 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:32.246 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:32.258 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:32.262 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:32.272 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:24:32.289 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIAMv5MJ07cWSvDjOK54OPOLZofDoZ46qZPlXqrM-TPwxoUyr9DZJDvf5attnJv31GrcT-xHL6egWTjlMfHjUPFtFC3W3IEpDivVIr3B8ThtRMrFxfVsXVwfI5TyswrPeReSOM0iZ6HF6QoP7qjlpqKm2igIs_Vtc8AI-nyRkVUVgDAPx2JLkfK3nihjsh7uKmTl2S62ruxguZmDdrKrrJQS6o5kni_UWIHSh1SvN_frKfQZFUb2AqkgK2AWbYUvP4eAm-0B5y5IZgxRbORxmEw9nRT28EvCQ8tbfN0UDQT4pw","UiLocales":null,"Nonce":"636977354714827515.NDAxMzU2ZTItNzY1Mi00Mjg1LThhZjUtN2Y2N2M5OTYwM2Q1YzM2M2ExNGYtNjZlNi00OGE4LTg0NDQtZWNlODc4ZGUxOTE5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636977354714827515.NDAxMzU2ZTItNzY1Mi00Mjg1LThhZjUtN2Y2N2M5OTYwM2Q1YzM2M2ExNGYtNjZlNi00OGE4LTg0NDQtZWNlODc4ZGUxOTE5","state":"CfDJ8BST-4sCksNFlez27BzseIAMv5MJ07cWSvDjOK54OPOLZofDoZ46qZPlXqrM-TPwxoUyr9DZJDvf5attnJv31GrcT-xHL6egWTjlMfHjUPFtFC3W3IEpDivVIr3B8ThtRMrFxfVsXVwfI5TyswrPeReSOM0iZ6HF6QoP7qjlpqKm2igIs_Vtc8AI-nyRkVUVgDAPx2JLkfK3nihjsh7uKmTl2S62ruxguZmDdrKrrJQS6o5kni_UWIHSh1SvN_frKfQZFUb2AqkgK2AWbYUvP4eAm-0B5y5IZgxRbORxmEw9nRT28EvCQ8tbfN0UDQT4pw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-03 09:24:32.331 +02:00 [INF] Showing login: User is not authenticated
2019-07-03 09:24:32.409 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:24:32.442 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:24:32.443 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:24:32.454 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:32.459 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:32.464 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:32.471 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:32.474 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:24:32.489 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:24:32.490 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:24:32.554 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:24:36.894 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 09:24:37.401 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:24:37.405 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 09:24:37.412 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:24:37.426 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:24:37.812 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-03 09:24:37.816 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-03 09:24:37.819 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-03 09:24:37.829 +02:00 [DBG] Start authorize callback request
2019-07-03 09:24:37.837 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:24:37.839 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:24:37.848 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:24:37.849 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:24:37.856 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:37.862 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:37.868 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:24:37.872 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:24:37.875 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:24:37.881 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIAMv5MJ07cWSvDjOK54OPOLZofDoZ46qZPlXqrM-TPwxoUyr9DZJDvf5attnJv31GrcT-xHL6egWTjlMfHjUPFtFC3W3IEpDivVIr3B8ThtRMrFxfVsXVwfI5TyswrPeReSOM0iZ6HF6QoP7qjlpqKm2igIs_Vtc8AI-nyRkVUVgDAPx2JLkfK3nihjsh7uKmTl2S62ruxguZmDdrKrrJQS6o5kni_UWIHSh1SvN_frKfQZFUb2AqkgK2AWbYUvP4eAm-0B5y5IZgxRbORxmEw9nRT28EvCQ8tbfN0UDQT4pw","UiLocales":null,"Nonce":"636977354714827515.NDAxMzU2ZTItNzY1Mi00Mjg1LThhZjUtN2Y2N2M5OTYwM2Q1YzM2M2ExNGYtNjZlNi00OGE4LTg0NDQtZWNlODc4ZGUxOTE5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"6c98920bafc2dd4fc4547b98480978a1","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636977354714827515.NDAxMzU2ZTItNzY1Mi00Mjg1LThhZjUtN2Y2N2M5OTYwM2Q1YzM2M2ExNGYtNjZlNi00OGE4LTg0NDQtZWNlODc4ZGUxOTE5","state":"CfDJ8BST-4sCksNFlez27BzseIAMv5MJ07cWSvDjOK54OPOLZofDoZ46qZPlXqrM-TPwxoUyr9DZJDvf5attnJv31GrcT-xHL6egWTjlMfHjUPFtFC3W3IEpDivVIr3B8ThtRMrFxfVsXVwfI5TyswrPeReSOM0iZ6HF6QoP7qjlpqKm2igIs_Vtc8AI-nyRkVUVgDAPx2JLkfK3nihjsh7uKmTl2S62ruxguZmDdrKrrJQS6o5kni_UWIHSh1SvN_frKfQZFUb2AqkgK2AWbYUvP4eAm-0B5y5IZgxRbORxmEw9nRT28EvCQ8tbfN0UDQT4pw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-03 09:24:38.029 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-03 09:24:38.046 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-03 09:24:38.059 +02:00 [DBG] Creating Implicit Flow response.
2019-07-03 09:24:38.072 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-03 09:24:38.699 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAMv5MJ07cWSvDjOK54OPOLZofDoZ46qZPlXqrM-TPwxoUyr9DZJDvf5attnJv31GrcT-xHL6egWTjlMfHjUPFtFC3W3IEpDivVIr3B8ThtRMrFxfVsXVwfI5TyswrPeReSOM0iZ6HF6QoP7qjlpqKm2igIs_Vtc8AI-nyRkVUVgDAPx2JLkfK3nihjsh7uKmTl2S62ruxguZmDdrKrrJQS6o5kni_UWIHSh1SvN_frKfQZFUb2AqkgK2AWbYUvP4eAm-0B5y5IZgxRbORxmEw9nRT28EvCQ8tbfN0UDQT4pw","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-03 09:24:38.740 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:24:38.741 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:26:07.039 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-03 09:26:07.056 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-03 09:26:07.062 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-03 09:26:07.081 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:26:07.103 +02:00 [DBG] Start end session request validation
2019-07-03 09:26:07.122 +02:00 [DBG] Start identity token validation
2019-07-03 09:26:07.244 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:07.245 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:07.252 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-03 09:26:07.325 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-03 09:26:07.334 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562062817,"exp":1562063117,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636976595113851758.OGNjY2ZkYmItOGJkMy00NmQzLWI3YzMtODM2YWQ1OTlkMjQ5N2ZmOWQxZTgtMjIyMC00NGUyLThjZWUtZjdkZDcxMTE1YzJl","iat":1562062817,"sid":"b9791a1e33f48cb600741823854e9e81","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562062788,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-03 09:26:07.370 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICFGSXAABGZs80RCHR1fMnJkN2_vXtOYVXC7GWSoi5zZEpf2WnpaYx8tc4Yumyv-tAWi7gPVdk3R75_CY7yW0RzIYGWSDX0hSy2GcEIgByVHGloPA8jH2JZECDiblCrmrg38JmW54RoBb4dq9g2rCoU","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICFGSXAABGZs80RCHR1fMnJkN2_vXtOYVXC7GWSoi5zZEpf2WnpaYx8tc4Yumyv-tAWi7gPVdk3R75_CY7yW0RzIYGWSDX0hSy2GcEIgByVHGloPA8jH2JZECDiblCrmrg38JmW54RoBb4dq9g2rCoU","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-03 09:26:07.390 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-03 09:26:07.628 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-03 09:26:07.634 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:26:07.641 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-03 09:26:07.851 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-03 09:26:07.910 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-03 09:26:07.946 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-03 09:26:07.970 +02:00 [DBG] Processing signout callback request
2019-07-03 09:26:08.081 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:08.085 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:08.090 +02:00 [DBG] No client front-channel logout URLs
2019-07-03 09:26:08.092 +02:00 [DBG] No client back-channel logout URLs
2019-07-03 09:26:08.099 +02:00 [INF] Successful signout callback.
2019-07-03 09:26:08.101 +02:00 [DBG] No client front-channel iframe urls
2019-07-03 09:26:08.103 +02:00 [DBG] No client back-channel iframe urls
2019-07-03 09:26:30.551 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-03 09:26:30.559 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-03 09:26:30.566 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-03 09:26:30.571 +02:00 [DBG] Start authorize request
2019-07-03 09:26:30.573 +02:00 [DBG] No user present in authorize request
2019-07-03 09:26:30.576 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:26:30.593 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:30.594 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:30.616 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:30.632 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:30.641 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:30.645 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:30.648 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:26:30.655 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIAvkC8zCr9sHZBe657ynfMg2I9Oiofdi-weTF-IM4TvZWFVwTgmdzvwpL2g1n0SX980jjTLJ2peXwXTYh20c1bg-wd587_uEtI_shHK93GQawPymkTBPAXUd46-9n9yX0SOCjsgECkNQ8wMYyaMnIBDychQH1Ty2dX8D4kq2Cq7OEFWDv4gGT4WEYzd-UvQIYfUDhqMvNxm8F31vdesP9JFOqh1rozXnjhP1AP3Jr8Wq4rmIInX1vEfQoI1dosUbBMeBJ2EtzmUk2LIT_HdVObZbstYAYCtv-VuvRyaZL8D4Q","UiLocales":null,"Nonce":"636977355905320733.MDY2Njk5NWEtY2VlNC00NzlhLTk5NTUtNGVkYjNhMTk3ZTRkYzc2NTAwMzUtZDVjYS00OGRmLWEzZTMtNTcyOTVjZTY4MTEw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636977355905320733.MDY2Njk5NWEtY2VlNC00NzlhLTk5NTUtNGVkYjNhMTk3ZTRkYzc2NTAwMzUtZDVjYS00OGRmLWEzZTMtNTcyOTVjZTY4MTEw","state":"CfDJ8BST-4sCksNFlez27BzseIAvkC8zCr9sHZBe657ynfMg2I9Oiofdi-weTF-IM4TvZWFVwTgmdzvwpL2g1n0SX980jjTLJ2peXwXTYh20c1bg-wd587_uEtI_shHK93GQawPymkTBPAXUd46-9n9yX0SOCjsgECkNQ8wMYyaMnIBDychQH1Ty2dX8D4kq2Cq7OEFWDv4gGT4WEYzd-UvQIYfUDhqMvNxm8F31vdesP9JFOqh1rozXnjhP1AP3Jr8Wq4rmIInX1vEfQoI1dosUbBMeBJ2EtzmUk2LIT_HdVObZbstYAYCtv-VuvRyaZL8D4Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-03 09:26:30.693 +02:00 [INF] Showing login: User is not authenticated
2019-07-03 09:26:30.732 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:26:30.741 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:30.742 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:30.751 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:30.759 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:30.765 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:30.773 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:30.775 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:26:30.788 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:30.789 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:30.851 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:26:46.018 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-03 09:26:46.024 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-03 09:26:46.026 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-03 09:26:46.029 +02:00 [DBG] Start authorize request
2019-07-03 09:26:46.030 +02:00 [DBG] No user present in authorize request
2019-07-03 09:26:46.034 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:26:46.066 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:46.068 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:46.081 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:46.091 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:46.097 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:46.101 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:46.103 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:26:46.106 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIBxNV7UziQfFAmS3Ho80rnnsb7EvO42KYcQv12TOM0u_ay5-I28VZeuTFXfKi4b_UcvNQYrGte_VyqG8Gca2tKlWx176KZzj4Y-_boOk1b1ipxdYUQ7kEgIYccOkDdv6o9kh6kpQJUczWTkjpzwngJYLiRuhot0j7R6-4lFgX2GLt1gfYMpTpyYpgHZtuacdexpv8KKFvgEF6bUZSoKI-wBCPAyov92KBtruwq_85dG2ltMbb0uKDDqrIUuHqKe9SSzKoKF3moZDoUHfy71drWUEqhVdptB-tJ_Xbs-2knSpw","UiLocales":null,"Nonce":"636977356058282254.NmYwOWM2NGMtNjNjZS00ZGE3LWFhMDktZDFmYjgwYzRmOWI5NjIzMGU3NDctYjYxNC00MDhhLWJiZGUtNGQxNDliOTY3M2Mz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636977356058282254.NmYwOWM2NGMtNjNjZS00ZGE3LWFhMDktZDFmYjgwYzRmOWI5NjIzMGU3NDctYjYxNC00MDhhLWJiZGUtNGQxNDliOTY3M2Mz","state":"CfDJ8BST-4sCksNFlez27BzseIBxNV7UziQfFAmS3Ho80rnnsb7EvO42KYcQv12TOM0u_ay5-I28VZeuTFXfKi4b_UcvNQYrGte_VyqG8Gca2tKlWx176KZzj4Y-_boOk1b1ipxdYUQ7kEgIYccOkDdv6o9kh6kpQJUczWTkjpzwngJYLiRuhot0j7R6-4lFgX2GLt1gfYMpTpyYpgHZtuacdexpv8KKFvgEF6bUZSoKI-wBCPAyov92KBtruwq_85dG2ltMbb0uKDDqrIUuHqKe9SSzKoKF3moZDoUHfy71drWUEqhVdptB-tJ_Xbs-2knSpw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-03 09:26:46.141 +02:00 [INF] Showing login: User is not authenticated
2019-07-03 09:26:46.279 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:26:46.285 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:46.286 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:46.292 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:46.296 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:46.304 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:26:46.308 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:26:46.310 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:26:46.321 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:26:46.322 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:26:46.489 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:27:44.555 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 09:27:44.692 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:27:44.695 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 09:27:44.698 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:27:44.704 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:27:44.759 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-03 09:27:44.763 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-03 09:27:44.766 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-03 09:27:44.771 +02:00 [DBG] Start authorize callback request
2019-07-03 09:27:44.773 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:27:44.777 +02:00 [DBG] Start authorize request protocol validation
2019-07-03 09:27:44.815 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:27:44.816 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:27:44.839 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:27:44.858 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:27:44.895 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:27:44.915 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:27:44.917 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-03 09:27:44.926 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIBxNV7UziQfFAmS3Ho80rnnsb7EvO42KYcQv12TOM0u_ay5-I28VZeuTFXfKi4b_UcvNQYrGte_VyqG8Gca2tKlWx176KZzj4Y-_boOk1b1ipxdYUQ7kEgIYccOkDdv6o9kh6kpQJUczWTkjpzwngJYLiRuhot0j7R6-4lFgX2GLt1gfYMpTpyYpgHZtuacdexpv8KKFvgEF6bUZSoKI-wBCPAyov92KBtruwq_85dG2ltMbb0uKDDqrIUuHqKe9SSzKoKF3moZDoUHfy71drWUEqhVdptB-tJ_Xbs-2knSpw","UiLocales":null,"Nonce":"636977356058282254.NmYwOWM2NGMtNjNjZS00ZGE3LWFhMDktZDFmYjgwYzRmOWI5NjIzMGU3NDctYjYxNC00MDhhLWJiZGUtNGQxNDliOTY3M2Mz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"4bd7c675bad68269ce514bd406b525aa","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636977356058282254.NmYwOWM2NGMtNjNjZS00ZGE3LWFhMDktZDFmYjgwYzRmOWI5NjIzMGU3NDctYjYxNC00MDhhLWJiZGUtNGQxNDliOTY3M2Mz","state":"CfDJ8BST-4sCksNFlez27BzseIBxNV7UziQfFAmS3Ho80rnnsb7EvO42KYcQv12TOM0u_ay5-I28VZeuTFXfKi4b_UcvNQYrGte_VyqG8Gca2tKlWx176KZzj4Y-_boOk1b1ipxdYUQ7kEgIYccOkDdv6o9kh6kpQJUczWTkjpzwngJYLiRuhot0j7R6-4lFgX2GLt1gfYMpTpyYpgHZtuacdexpv8KKFvgEF6bUZSoKI-wBCPAyov92KBtruwq_85dG2ltMbb0uKDDqrIUuHqKe9SSzKoKF3moZDoUHfy71drWUEqhVdptB-tJ_Xbs-2knSpw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-03 09:27:44.982 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-03 09:27:44.988 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-03 09:27:44.992 +02:00 [DBG] Creating Implicit Flow response.
2019-07-03 09:27:44.994 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-03 09:27:45.021 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIBxNV7UziQfFAmS3Ho80rnnsb7EvO42KYcQv12TOM0u_ay5-I28VZeuTFXfKi4b_UcvNQYrGte_VyqG8Gca2tKlWx176KZzj4Y-_boOk1b1ipxdYUQ7kEgIYccOkDdv6o9kh6kpQJUczWTkjpzwngJYLiRuhot0j7R6-4lFgX2GLt1gfYMpTpyYpgHZtuacdexpv8KKFvgEF6bUZSoKI-wBCPAyov92KBtruwq_85dG2ltMbb0uKDDqrIUuHqKe9SSzKoKF3moZDoUHfy71drWUEqhVdptB-tJ_Xbs-2knSpw","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-03 09:27:45.037 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:27:45.041 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:27:56.966 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-03 09:27:56.974 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-03 09:27:56.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-03 09:27:56.988 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:27:56.994 +02:00 [DBG] Start end session request validation
2019-07-03 09:27:57.000 +02:00 [DBG] Start identity token validation
2019-07-03 09:27:57.075 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:27:57.076 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:27:57.081 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-03 09:27:57.108 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-03 09:27:57.138 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562138865,"exp":1562139165,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636977356058282254.NmYwOWM2NGMtNjNjZS00ZGE3LWFhMDktZDFmYjgwYzRmOWI5NjIzMGU3NDctYjYxNC00MDhhLWJiZGUtNGQxNDliOTY3M2Mz","iat":1562138864,"sid":"4bd7c675bad68269ce514bd406b525aa","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562138864,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","email":"Fungai.Mashozhera@liquidtelecom.com","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-03 09:27:57.167 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAVp7p0J3559F9WucLXKwNeafhHJRoPMjFxBkexT5sz4BdGgHsa9BunMk9SG5fd1OBmHMrs6ETQyhMdjASfa4expCwJsYca0JAhmx6oyzUwdjo-0rXufvGYkxe0w9bYsRjtbtsgoKGEmBj9voyTWMrQ","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIAVp7p0J3559F9WucLXKwNeafhHJRoPMjFxBkexT5sz4BdGgHsa9BunMk9SG5fd1OBmHMrs6ETQyhMdjASfa4expCwJsYca0JAhmx6oyzUwdjo-0rXufvGYkxe0w9bYsRjtbtsgoKGEmBj9voyTWMrQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-03 09:27:57.189 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-03 09:27:57.215 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-03 09:27:57.219 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:27:57.225 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-03 09:27:57.319 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-03 09:27:57.391 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-03 09:27:57.468 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-03 09:27:57.522 +02:00 [DBG] Processing signout callback request
2019-07-03 09:27:57.583 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:27:57.590 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:27:57.596 +02:00 [DBG] No client front-channel logout URLs
2019-07-03 09:27:57.598 +02:00 [DBG] No client back-channel logout URLs
2019-07-03 09:27:57.599 +02:00 [INF] Successful signout callback.
2019-07-03 09:27:57.601 +02:00 [DBG] No client front-channel iframe urls
2019-07-03 09:27:57.608 +02:00 [DBG] No client back-channel iframe urls
2019-07-03 09:31:52.158 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 09:31:52.219 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-03 09:31:52.223 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:31:52.226 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-03 09:31:52.265 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-03 09:31:52.271 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-03 09:31:52.274 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-03 09:31:52.280 +02:00 [DBG] Processing signout callback request
2019-07-03 09:31:52.335 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:31:52.336 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:31:52.341 +02:00 [DBG] No client front-channel logout URLs
2019-07-03 09:31:52.343 +02:00 [DBG] No client back-channel logout URLs
2019-07-03 09:31:52.345 +02:00 [INF] Successful signout callback.
2019-07-03 09:31:52.349 +02:00 [DBG] No client front-channel iframe urls
2019-07-03 09:31:52.351 +02:00 [DBG] No client back-channel iframe urls
2019-07-03 09:34:40.743 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:34:44.248 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 09:34:44.283 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:34:44.284 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 09:34:44.287 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:34:44.291 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:34:49.852 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:34:49.907 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:34:49.908 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:34:49.930 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:34:49.946 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:35:14.252 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:35:14.266 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:35:14.267 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:35:14.277 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:35:14.282 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:58:23.256 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 09:58:23.352 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 09:58:23.354 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 09:58:23.355 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 09:58:23.356 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 09:58:23.357 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 09:58:23.357 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 09:58:23.639 +02:00 [DBG] Starting grant removal
2019-07-03 09:58:31.004 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 09:58:31.021 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 09:58:31.025 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 09:58:31.029 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 09:58:31.032 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 09:58:31.037 +02:00 [DBG] Error Url: /home/error
2019-07-03 09:58:31.046 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 09:58:32.284 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 09:58:44.542 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 09:58:48.606 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 09:58:49.233 +02:00 [DBG] Augmenting SignInContext
2019-07-03 09:58:49.238 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 09:58:49.250 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 09:58:49.264 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 09:58:55.185 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:58:55.973 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:58:55.989 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:58:56.101 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:58:56.312 +02:00 [DBG] Found [] API scopes in database
2019-07-03 09:58:59.383 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 09:58:59.396 +02:00 [DBG] SampleClient found in database: true
2019-07-03 09:58:59.397 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 09:58:59.404 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 09:58:59.415 +02:00 [DBG] Found [] API scopes in database
2019-07-03 10:17:30.003 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 10:20:12.801 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 10:20:12.864 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 10:20:12.865 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 10:20:12.866 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 10:20:12.866 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 10:20:12.867 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 10:20:12.868 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 10:20:13.083 +02:00 [DBG] Starting grant removal
2019-07-03 10:20:23.868 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 10:20:23.942 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 10:20:23.977 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 10:20:24.036 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 10:20:24.098 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 10:20:24.159 +02:00 [DBG] Error Url: /home/error
2019-07-03 10:20:24.192 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 10:20:28.347 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 10:20:45.451 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 10:20:49.553 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 10:20:50.083 +02:00 [DBG] Augmenting SignInContext
2019-07-03 10:20:50.087 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 10:20:50.093 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 10:20:50.106 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 10:20:52.909 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 10:20:54.300 +02:00 [DBG] SampleClient found in database: true
2019-07-03 10:20:54.311 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 10:20:54.398 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 10:20:54.567 +02:00 [DBG] Found [] API scopes in database
2019-07-03 10:20:57.558 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 10:20:57.570 +02:00 [DBG] SampleClient found in database: true
2019-07-03 10:20:57.571 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 10:20:57.580 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 10:20:57.584 +02:00 [DBG] Found [] API scopes in database
2019-07-03 10:21:03.853 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 10:21:38.418 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 10:22:14.818 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 10:25:38.396 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 10:25:38.436 +02:00 [DBG] SampleClient found in database: true
2019-07-03 10:25:38.437 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 10:25:38.456 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 10:25:38.470 +02:00 [DBG] Found [] API scopes in database
2019-07-03 10:25:53.593 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 10:32:09.614 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 10:32:09.732 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 10:32:09.734 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 10:32:09.736 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 10:32:09.738 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 10:32:09.740 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 10:32:09.741 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 10:32:10.120 +02:00 [DBG] Starting grant removal
2019-07-03 10:32:17.007 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 10:32:17.013 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 10:32:17.017 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 10:32:17.019 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 10:32:17.021 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 10:32:17.022 +02:00 [DBG] Error Url: /home/error
2019-07-03 10:32:17.025 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 10:32:17.853 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 10:32:26.534 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 10:32:30.876 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 10:32:31.640 +02:00 [DBG] Augmenting SignInContext
2019-07-03 10:32:31.646 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 10:32:31.661 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 10:32:31.680 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 10:32:34.445 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 10:32:35.833 +02:00 [DBG] SampleClient found in database: true
2019-07-03 10:32:35.851 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 10:32:35.996 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 10:32:36.275 +02:00 [DBG] Found [] API scopes in database
2019-07-03 10:32:42.075 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 12:51:05.817 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 12:51:05.895 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 12:51:05.897 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 12:51:05.898 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 12:51:05.899 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 12:51:05.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 12:51:05.901 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 12:51:06.891 +02:00 [DBG] Starting grant removal
2019-07-03 12:51:18.395 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 12:51:18.402 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 12:51:18.409 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 12:51:18.412 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 12:51:18.414 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 12:51:18.419 +02:00 [DBG] Error Url: /home/error
2019-07-03 12:51:18.427 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 12:51:22.498 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 12:51:29.571 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 12:51:34.734 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 12:51:35.539 +02:00 [DBG] Augmenting SignInContext
2019-07-03 12:51:35.541 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 12:51:35.553 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 12:51:35.576 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 12:51:40.765 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 12:51:44.112 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.TypeInitializationException: The type initializer for 'IdentityServer4.EntityFramework.Mappers.ClientMappers' threw an exception. ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.MissingMethodException: Method not found: 'AutoMapper.IMappingExpression`2<!0,!1> AutoMapper.IMappingExpression`2.ConstructUsing(System.Linq.Expressions.Expression`1<System.Func`2<!0,!1>>)'.
   at IdentityServer4.EntityFramework.Mappers.ClientMapperProfile..ctor()
   --- End of inner exception stack trace ---
   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean wrapExceptions, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean wrapExceptions, Boolean skipCheckThis, Boolean fillCache)
   at System.Activator.CreateInstance[T]()
   at AutoMapper.Configuration.MapperConfigurationExpression.AddProfile[TProfile]() in C:\projects\automapper\src\AutoMapper\Configuration\MapperConfigurationExpression.cs:line 49
   at IdentityServer4.EntityFramework.Mappers.ClientMappers.<>c.<.cctor>b__0_0(IMapperConfigurationExpression cfg) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Mappers\ClientMappers.cs:line 16
   at AutoMapper.MapperConfiguration.Build(Action`1 configure) in C:\projects\automapper\src\AutoMapper\MapperConfiguration.cs:line 322
   at AutoMapper.MapperConfiguration..ctor(Action`1 configure) in C:\projects\automapper\src\AutoMapper\MapperConfiguration.cs:line 60
   at IdentityServer4.EntityFramework.Mappers.ClientMappers..cctor() in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Mappers\ClientMappers.cs:line 16
   --- End of inner exception stack trace ---
   at IdentityServer4.EntityFramework.Mappers.ClientMappers.ToModel(Client entity) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Mappers\ClientMappers.cs:line 29
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\ClientStore.cs:line 59
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at SecurityServer.Controllers.ClientsController.BuildViewModelAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 96
   at SecurityServer.Controllers.ClientsController.Index() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-03 13:58:20.150 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-03 13:58:20.230 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-03 13:58:20.232 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-03 13:58:20.233 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-03 13:58:20.234 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-03 13:58:20.235 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-03 13:58:20.236 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-03 13:58:20.607 +02:00 [DBG] Starting grant removal
2019-07-03 13:58:23.454 +02:00 [DBG] Login Url: /Account/Login
2019-07-03 13:58:23.461 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-03 13:58:23.466 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-03 13:58:23.468 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-03 13:58:23.470 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-03 13:58:23.473 +02:00 [DBG] Error Url: /home/error
2019-07-03 13:58:23.479 +02:00 [DBG] Error Id Parameter: errorId
2019-07-03 13:58:24.052 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-03 13:58:38.888 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-03 13:58:43.109 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-03 13:58:43.777 +02:00 [DBG] Augmenting SignInContext
2019-07-03 13:58:43.780 +02:00 [DBG] Adding amr claim with value: external
2019-07-03 13:58:43.793 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-03 13:58:43.807 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-03 13:58:48.007 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-03 13:58:48.806 +02:00 [DBG] SampleClient found in database: true
2019-07-03 13:58:48.817 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-03 13:58:48.905 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-03 13:58:49.043 +02:00 [DBG] Found [] API scopes in database
2019-07-03 14:00:31.598 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-03 14:00:32.794 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Mapper not initialized. Call Initialize with appropriate configuration. If you are trying to use mapper instances through a container or otherwise, make sure you do not have any calls to the static Mapper.Map methods, and if you're using ProjectTo or UseAsDataSource extension methods, make sure you pass in the appropriate IConfigurationProvider instance.
   at AutoMapper.Mapper.get_Instance() in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 36
   at AutoMapper.Mapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 76
   at SecurityServer.Controllers.ClientsController.Register(RegisterClientViewModel registerClientViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 11:11:41.476 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 11:11:41.606 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 11:11:41.607 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 11:11:41.608 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 11:11:41.609 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 11:11:41.611 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 11:11:41.613 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 11:11:42.593 +02:00 [DBG] Starting grant removal
2019-07-04 11:11:53.975 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 11:11:53.986 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 11:11:53.989 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 11:11:53.992 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 11:11:53.999 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 11:11:54.001 +02:00 [DBG] Error Url: /home/error
2019-07-04 11:11:54.004 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 11:17:48.430 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-07-04 11:17:48.444 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-07-04 11:17:48.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-07-04 11:17:48.454 +02:00 [DBG] Start discovery request
2019-07-04 11:17:49.434 +02:00 [DBG] Found ["openid","profile","email","sampleAPI"] as all scopes in database
2019-07-04 11:17:50.317 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-07-04 11:17:50.322 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-07-04 11:17:50.327 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-07-04 11:17:50.336 +02:00 [DBG] Start key discovery request
2019-07-04 11:17:50.527 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-04 11:17:50.537 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-04 11:17:50.544 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-04 11:17:50.551 +02:00 [DBG] Start authorize request
2019-07-04 11:17:50.565 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:17:50.574 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:17:51.352 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:17:51.383 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:17:51.718 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:17:52.026 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:17:52.057 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:17:52.063 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:17:52.076 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:17:52.106 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseICvlNeiNoAuXmc7t3mA5zcKF_GkI7UK7QpVLnNNqR8gnuQd8zTfcf38Jp0m7uox_Kavo9oOEXx4HWyE7WGHGOCmFG26cflzeoYWtREkzwAPLaD71rUOQ8jzaBDBHonZCbnFn1A3Cyef_9zYfaWCUuk0-bcVN12t-c0MJJzotBmRc-hrygqJbxs7SbjfvVDB0fBmMSr3imvcoGS8NHVL9AT7sNNxswRpBUpX99JQK_cwp86jWM4u0jT6IDNAXmJqTIGLSVQo5Iv9zrk4_Dlg24mKYtEzEdmGQb59Wxvu_JoGIw","UiLocales":null,"Nonce":"636978286703756190.YjJiMzQ2MmUtYTdiZS00YzZlLWI4M2EtZGVkMmVmYTM0OGYwNWJiNDg3NDQtOTczMS00OTRjLThkYjUtYTRiMmMzZGQzODU2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c0113415ffc6e5f331453e971dd4d92e","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978286703756190.YjJiMzQ2MmUtYTdiZS00YzZlLWI4M2EtZGVkMmVmYTM0OGYwNWJiNDg3NDQtOTczMS00OTRjLThkYjUtYTRiMmMzZGQzODU2","state":"CfDJ8BST-4sCksNFlez27BzseICvlNeiNoAuXmc7t3mA5zcKF_GkI7UK7QpVLnNNqR8gnuQd8zTfcf38Jp0m7uox_Kavo9oOEXx4HWyE7WGHGOCmFG26cflzeoYWtREkzwAPLaD71rUOQ8jzaBDBHonZCbnFn1A3Cyef_9zYfaWCUuk0-bcVN12t-c0MJJzotBmRc-hrygqJbxs7SbjfvVDB0fBmMSr3imvcoGS8NHVL9AT7sNNxswRpBUpX99JQK_cwp86jWM4u0jT6IDNAXmJqTIGLSVQo5Iv9zrk4_Dlg24mKYtEzEdmGQb59Wxvu_JoGIw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:17:52.294 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-04 11:17:52.312 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-04 11:17:52.332 +02:00 [DBG] Creating Implicit Flow response.
2019-07-04 11:17:52.398 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-04 11:17:52.647 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICvlNeiNoAuXmc7t3mA5zcKF_GkI7UK7QpVLnNNqR8gnuQd8zTfcf38Jp0m7uox_Kavo9oOEXx4HWyE7WGHGOCmFG26cflzeoYWtREkzwAPLaD71rUOQ8jzaBDBHonZCbnFn1A3Cyef_9zYfaWCUuk0-bcVN12t-c0MJJzotBmRc-hrygqJbxs7SbjfvVDB0fBmMSr3imvcoGS8NHVL9AT7sNNxswRpBUpX99JQK_cwp86jWM4u0jT6IDNAXmJqTIGLSVQo5Iv9zrk4_Dlg24mKYtEzEdmGQb59Wxvu_JoGIw","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-04 11:17:52.686 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:17:52.700 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:18:24.422 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-04 11:18:24.429 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-04 11:18:24.431 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-04 11:18:24.444 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:18:24.453 +02:00 [DBG] Start end session request validation
2019-07-04 11:18:24.459 +02:00 [DBG] Start identity token validation
2019-07-04 11:18:24.525 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:24.526 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:24.530 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-04 11:18:24.608 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-04 11:18:24.628 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562231872,"exp":1562232172,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636978286703756190.YjJiMzQ2MmUtYTdiZS00YzZlLWI4M2EtZGVkMmVmYTM0OGYwNWJiNDg3NDQtOTczMS00OTRjLThkYjUtYTRiMmMzZGQzODU2","iat":1562231872,"sid":"c0113415ffc6e5f331453e971dd4d92e","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562155123,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","email":"Fungai.Mashozhera@liquidtelecom.com","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-04 11:18:24.671 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICeLDM2jlty1av5hT4mmddj3vDtI3rX7UIfBYJTH9Lww4UL5vO1ZIFJpFZpSkf_Mrzl_jeVK3nPUPdv5B7V8_XUgFoDVzjyy9eRcw9rmE91UQ97TDBQ0EwUB8oJ4Qi8AERXD_XueZwtwD_xs1xgsLJ-","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICeLDM2jlty1av5hT4mmddj3vDtI3rX7UIfBYJTH9Lww4UL5vO1ZIFJpFZpSkf_Mrzl_jeVK3nPUPdv5B7V8_XUgFoDVzjyy9eRcw9rmE91UQ97TDBQ0EwUB8oJ4Qi8AERXD_XueZwtwD_xs1xgsLJ-","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-04 11:18:24.690 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-04 11:18:24.782 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-04 11:18:24.794 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:18:24.798 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-04 11:18:24.917 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-04 11:18:24.938 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-04 11:18:24.959 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-04 11:18:24.973 +02:00 [DBG] Processing signout callback request
2019-07-04 11:18:25.011 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:25.012 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:25.024 +02:00 [DBG] No client front-channel logout URLs
2019-07-04 11:18:25.028 +02:00 [DBG] No client back-channel logout URLs
2019-07-04 11:18:25.036 +02:00 [INF] Successful signout callback.
2019-07-04 11:18:25.041 +02:00 [DBG] No client front-channel iframe urls
2019-07-04 11:18:25.044 +02:00 [DBG] No client back-channel iframe urls
2019-07-04 11:18:46.132 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-04 11:18:46.145 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-04 11:18:46.147 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-04 11:18:46.151 +02:00 [DBG] Start authorize request
2019-07-04 11:18:46.154 +02:00 [DBG] No user present in authorize request
2019-07-04 11:18:46.157 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:18:46.206 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:46.211 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:46.255 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:46.272 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:46.280 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:46.284 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:46.286 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:18:46.291 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseICkAu4Wt2M3TLBKUhbdhCCuvIGHOi7mWZMjwNS3JNQEuIQ-xvlizjxM5m9vyhGH5BxIDN2Uh3f2ZEPg6xdMwg-NsBew4jN6q2d54hG23-D2ryBCzPzydyc2AiJrG4NYjxeLxsopmxwWzS6SI-HPMiUq-ZcOUc3kT76fgwBVBuC9wrmtzg7-eACwWN6VzfTG-SRkwzO5GayW_MNETGFzD7Xa7W_F3DTQLlJ65Kiljq8RWNL2m2GGjNfRgMHQIzSnKzwE5qXAMO7LGsozZfpwUkr37Hzhb62LUZpVuVvVv4Dadg","UiLocales":null,"Nonce":"636978287260662601.OWZjNzllMmUtMzI4Yy00OWRkLWEzM2UtNTY1ZDJlY2I5ODM4NjdmMDE1NmQtMmYzYS00OTZlLTg5MzUtMmNmNGE3YjliMGQ5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978287260662601.OWZjNzllMmUtMzI4Yy00OWRkLWEzM2UtNTY1ZDJlY2I5ODM4NjdmMDE1NmQtMmYzYS00OTZlLTg5MzUtMmNmNGE3YjliMGQ5","state":"CfDJ8BST-4sCksNFlez27BzseICkAu4Wt2M3TLBKUhbdhCCuvIGHOi7mWZMjwNS3JNQEuIQ-xvlizjxM5m9vyhGH5BxIDN2Uh3f2ZEPg6xdMwg-NsBew4jN6q2d54hG23-D2ryBCzPzydyc2AiJrG4NYjxeLxsopmxwWzS6SI-HPMiUq-ZcOUc3kT76fgwBVBuC9wrmtzg7-eACwWN6VzfTG-SRkwzO5GayW_MNETGFzD7Xa7W_F3DTQLlJ65Kiljq8RWNL2m2GGjNfRgMHQIzSnKzwE5qXAMO7LGsozZfpwUkr37Hzhb62LUZpVuVvVv4Dadg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:18:46.324 +02:00 [INF] Showing login: User is not authenticated
2019-07-04 11:18:46.362 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:18:46.409 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:46.410 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:46.429 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:46.441 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:46.457 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:46.472 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:46.474 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:18:46.521 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:46.522 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:46.551 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-04 11:18:50.029 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-04 11:18:50.151 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:18:50.152 +02:00 [DBG] Adding amr claim with value: external
2019-07-04 11:18:50.155 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:18:50.158 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:18:50.181 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-04 11:18:50.189 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-04 11:18:50.194 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-04 11:18:50.207 +02:00 [DBG] Start authorize callback request
2019-07-04 11:18:50.216 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:18:50.218 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:18:50.261 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:50.263 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:50.296 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:50.324 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:50.352 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:18:50.358 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:18:50.361 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:18:50.366 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseICkAu4Wt2M3TLBKUhbdhCCuvIGHOi7mWZMjwNS3JNQEuIQ-xvlizjxM5m9vyhGH5BxIDN2Uh3f2ZEPg6xdMwg-NsBew4jN6q2d54hG23-D2ryBCzPzydyc2AiJrG4NYjxeLxsopmxwWzS6SI-HPMiUq-ZcOUc3kT76fgwBVBuC9wrmtzg7-eACwWN6VzfTG-SRkwzO5GayW_MNETGFzD7Xa7W_F3DTQLlJ65Kiljq8RWNL2m2GGjNfRgMHQIzSnKzwE5qXAMO7LGsozZfpwUkr37Hzhb62LUZpVuVvVv4Dadg","UiLocales":null,"Nonce":"636978287260662601.OWZjNzllMmUtMzI4Yy00OWRkLWEzM2UtNTY1ZDJlY2I5ODM4NjdmMDE1NmQtMmYzYS00OTZlLTg5MzUtMmNmNGE3YjliMGQ5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"01bc5781cf038ea5cfe421ab08246b18","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978287260662601.OWZjNzllMmUtMzI4Yy00OWRkLWEzM2UtNTY1ZDJlY2I5ODM4NjdmMDE1NmQtMmYzYS00OTZlLTg5MzUtMmNmNGE3YjliMGQ5","state":"CfDJ8BST-4sCksNFlez27BzseICkAu4Wt2M3TLBKUhbdhCCuvIGHOi7mWZMjwNS3JNQEuIQ-xvlizjxM5m9vyhGH5BxIDN2Uh3f2ZEPg6xdMwg-NsBew4jN6q2d54hG23-D2ryBCzPzydyc2AiJrG4NYjxeLxsopmxwWzS6SI-HPMiUq-ZcOUc3kT76fgwBVBuC9wrmtzg7-eACwWN6VzfTG-SRkwzO5GayW_MNETGFzD7Xa7W_F3DTQLlJ65Kiljq8RWNL2m2GGjNfRgMHQIzSnKzwE5qXAMO7LGsozZfpwUkr37Hzhb62LUZpVuVvVv4Dadg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:18:50.463 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-04 11:18:50.466 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-04 11:18:50.470 +02:00 [DBG] Creating Implicit Flow response.
2019-07-04 11:18:50.472 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-04 11:18:50.487 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICkAu4Wt2M3TLBKUhbdhCCuvIGHOi7mWZMjwNS3JNQEuIQ-xvlizjxM5m9vyhGH5BxIDN2Uh3f2ZEPg6xdMwg-NsBew4jN6q2d54hG23-D2ryBCzPzydyc2AiJrG4NYjxeLxsopmxwWzS6SI-HPMiUq-ZcOUc3kT76fgwBVBuC9wrmtzg7-eACwWN6VzfTG-SRkwzO5GayW_MNETGFzD7Xa7W_F3DTQLlJ65Kiljq8RWNL2m2GGjNfRgMHQIzSnKzwE5qXAMO7LGsozZfpwUkr37Hzhb62LUZpVuVvVv4Dadg","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-04 11:18:50.500 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:18:50.501 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:18:55.065 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-04 11:18:55.071 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-04 11:18:55.074 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-04 11:18:55.089 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:18:55.106 +02:00 [DBG] Start end session request validation
2019-07-04 11:18:55.107 +02:00 [DBG] Start identity token validation
2019-07-04 11:18:55.141 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:55.142 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:55.147 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-04 11:18:55.157 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-04 11:18:55.159 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562231930,"exp":1562232230,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636978287260662601.OWZjNzllMmUtMzI4Yy00OWRkLWEzM2UtNTY1ZDJlY2I5ODM4NjdmMDE1NmQtMmYzYS00OTZlLTg5MzUtMmNmNGE3YjliMGQ5","iat":1562231930,"sid":"01bc5781cf038ea5cfe421ab08246b18","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562231930,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","email":"Fungai.Mashozhera@liquidtelecom.com","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-04 11:18:55.176 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIBVP2t5ePjvUecmpE7fcwThNRYYcZTON6ZyZBZXTvSyWLmYCeQiYe3F4UpuuMUTct5fHCJrco1QceKTa2Umd6mbezyB1JFh-l_1K-WYC9ixmbhg4HL9hIwGOiH92l3E1QWp1-SOkCbmZFImRgFOAqIc","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIBVP2t5ePjvUecmpE7fcwThNRYYcZTON6ZyZBZXTvSyWLmYCeQiYe3F4UpuuMUTct5fHCJrco1QceKTa2Umd6mbezyB1JFh-l_1K-WYC9ixmbhg4HL9hIwGOiH92l3E1QWp1-SOkCbmZFImRgFOAqIc","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-04 11:18:55.221 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-04 11:18:55.259 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-04 11:18:55.262 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:18:55.272 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-04 11:18:55.335 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-04 11:18:55.341 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-04 11:18:55.361 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-04 11:18:55.369 +02:00 [DBG] Processing signout callback request
2019-07-04 11:18:55.386 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:18:55.387 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:18:55.392 +02:00 [DBG] No client front-channel logout URLs
2019-07-04 11:18:55.393 +02:00 [DBG] No client back-channel logout URLs
2019-07-04 11:18:55.395 +02:00 [INF] Successful signout callback.
2019-07-04 11:18:55.397 +02:00 [DBG] No client front-channel iframe urls
2019-07-04 11:18:55.400 +02:00 [DBG] No client back-channel iframe urls
2019-07-04 11:19:17.846 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-04 11:19:17.853 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-04 11:19:17.856 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-04 11:19:17.861 +02:00 [DBG] Start authorize request
2019-07-04 11:19:17.862 +02:00 [DBG] No user present in authorize request
2019-07-04 11:19:17.864 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:19:17.932 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:17.934 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:17.958 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:17.976 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:17.985 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:17.995 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:17.997 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:19:18.001 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIAIGmdYCNX54ekwZZGj8C-gfGOxbkl09fRJrKGIyTvu7UxFl3DNCaIBKRJBohEuVZGA27OTPG_PDKala-X2eJFam6aY6EoaNkI82JIZV9SgMw57cdV-KLWER8D1av377iJstnQIPb4z9BD3dft5Z2EEE6I9acagbtrVCLCDcmLref0iLx_sABWW7HjXlmorPCFsJ-wZwJnxJfn0sb8TNI7sK7wsAy0BIFxlBG7t5gzRE6r9ji5igwRl7B04khhVSxSedWaKziBd8QWvt2vGelQv5IAqU9Z_EfsIu-ayJgCVvg","UiLocales":null,"Nonce":"636978287578106612.NWE5NGI5ZmMtMDM0Mi00NmJkLWFiOWItMDJkMDE1N2VlZjQ2MmExZmE4NDMtMTM4NC00MDdlLWI1YjItMjEyNWUzYWQ2Y2Fl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978287578106612.NWE5NGI5ZmMtMDM0Mi00NmJkLWFiOWItMDJkMDE1N2VlZjQ2MmExZmE4NDMtMTM4NC00MDdlLWI1YjItMjEyNWUzYWQ2Y2Fl","state":"CfDJ8BST-4sCksNFlez27BzseIAIGmdYCNX54ekwZZGj8C-gfGOxbkl09fRJrKGIyTvu7UxFl3DNCaIBKRJBohEuVZGA27OTPG_PDKala-X2eJFam6aY6EoaNkI82JIZV9SgMw57cdV-KLWER8D1av377iJstnQIPb4z9BD3dft5Z2EEE6I9acagbtrVCLCDcmLref0iLx_sABWW7HjXlmorPCFsJ-wZwJnxJfn0sb8TNI7sK7wsAy0BIFxlBG7t5gzRE6r9ji5igwRl7B04khhVSxSedWaKziBd8QWvt2vGelQv5IAqU9Z_EfsIu-ayJgCVvg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:19:18.034 +02:00 [INF] Showing login: User is not authenticated
2019-07-04 11:19:18.057 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:19:18.065 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:18.066 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:18.074 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:18.078 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:18.086 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:18.091 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:18.095 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:19:18.105 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:18.107 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:18.118 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-04 11:19:19.667 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-04 11:19:19.696 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:19:19.697 +02:00 [DBG] Adding amr claim with value: external
2019-07-04 11:19:19.703 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:19:19.709 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:19:19.750 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-04 11:19:19.753 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-04 11:19:19.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-04 11:19:19.759 +02:00 [DBG] Start authorize callback request
2019-07-04 11:19:19.760 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:19:19.765 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:19:19.774 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:19.775 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:19.781 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:19.789 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:19.794 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:19:19.799 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:19:19.801 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:19:19.807 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseIAIGmdYCNX54ekwZZGj8C-gfGOxbkl09fRJrKGIyTvu7UxFl3DNCaIBKRJBohEuVZGA27OTPG_PDKala-X2eJFam6aY6EoaNkI82JIZV9SgMw57cdV-KLWER8D1av377iJstnQIPb4z9BD3dft5Z2EEE6I9acagbtrVCLCDcmLref0iLx_sABWW7HjXlmorPCFsJ-wZwJnxJfn0sb8TNI7sK7wsAy0BIFxlBG7t5gzRE6r9ji5igwRl7B04khhVSxSedWaKziBd8QWvt2vGelQv5IAqU9Z_EfsIu-ayJgCVvg","UiLocales":null,"Nonce":"636978287578106612.NWE5NGI5ZmMtMDM0Mi00NmJkLWFiOWItMDJkMDE1N2VlZjQ2MmExZmE4NDMtMTM4NC00MDdlLWI1YjItMjEyNWUzYWQ2Y2Fl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1a59cfde68510992cdeb5da481db2a8c","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978287578106612.NWE5NGI5ZmMtMDM0Mi00NmJkLWFiOWItMDJkMDE1N2VlZjQ2MmExZmE4NDMtMTM4NC00MDdlLWI1YjItMjEyNWUzYWQ2Y2Fl","state":"CfDJ8BST-4sCksNFlez27BzseIAIGmdYCNX54ekwZZGj8C-gfGOxbkl09fRJrKGIyTvu7UxFl3DNCaIBKRJBohEuVZGA27OTPG_PDKala-X2eJFam6aY6EoaNkI82JIZV9SgMw57cdV-KLWER8D1av377iJstnQIPb4z9BD3dft5Z2EEE6I9acagbtrVCLCDcmLref0iLx_sABWW7HjXlmorPCFsJ-wZwJnxJfn0sb8TNI7sK7wsAy0BIFxlBG7t5gzRE6r9ji5igwRl7B04khhVSxSedWaKziBd8QWvt2vGelQv5IAqU9Z_EfsIu-ayJgCVvg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:19:19.846 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-04 11:19:19.848 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-04 11:19:19.851 +02:00 [DBG] Creating Implicit Flow response.
2019-07-04 11:19:19.854 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-04 11:19:19.863 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAIGmdYCNX54ekwZZGj8C-gfGOxbkl09fRJrKGIyTvu7UxFl3DNCaIBKRJBohEuVZGA27OTPG_PDKala-X2eJFam6aY6EoaNkI82JIZV9SgMw57cdV-KLWER8D1av377iJstnQIPb4z9BD3dft5Z2EEE6I9acagbtrVCLCDcmLref0iLx_sABWW7HjXlmorPCFsJ-wZwJnxJfn0sb8TNI7sK7wsAy0BIFxlBG7t5gzRE6r9ji5igwRl7B04khhVSxSedWaKziBd8QWvt2vGelQv5IAqU9Z_EfsIu-ayJgCVvg","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-04 11:19:19.870 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:19:19.873 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:19:23.447 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-04 11:19:23.454 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-04 11:19:23.457 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-04 11:19:23.462 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:19:23.464 +02:00 [DBG] Start end session request validation
2019-07-04 11:19:23.467 +02:00 [DBG] Start identity token validation
2019-07-04 11:19:23.478 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:23.479 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:23.487 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-04 11:19:23.502 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-04 11:19:23.504 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562231959,"exp":1562232259,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636978287578106612.NWE5NGI5ZmMtMDM0Mi00NmJkLWFiOWItMDJkMDE1N2VlZjQ2MmExZmE4NDMtMTM4NC00MDdlLWI1YjItMjEyNWUzYWQ2Y2Fl","iat":1562231959,"sid":"1a59cfde68510992cdeb5da481db2a8c","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562231959,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","email":"Fungai.Mashozhera@liquidtelecom.com","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-04 11:19:23.528 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICNr8UgAxmFLemjclaEH90Zhp5x_2uIWrEvvaxS9IkMa9lhWVTyRxEvPJSxli37OGTuirv6qhvFhQ_8F4LSpCA7kk8IywadtNp4ER4dtCBEBArTtl25A6pZjPplKms7gNH_eaGGBl9Qlq9lmeWPUGTb","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseICNr8UgAxmFLemjclaEH90Zhp5x_2uIWrEvvaxS9IkMa9lhWVTyRxEvPJSxli37OGTuirv6qhvFhQ_8F4LSpCA7kk8IywadtNp4ER4dtCBEBArTtl25A6pZjPplKms7gNH_eaGGBl9Qlq9lmeWPUGTb","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-04 11:19:23.542 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-04 11:19:23.553 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-04 11:19:23.556 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:19:23.561 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-04 11:19:23.741 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-04 11:19:23.759 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-04 11:19:23.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-04 11:19:23.774 +02:00 [DBG] Processing signout callback request
2019-07-04 11:19:23.790 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:19:23.792 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:19:23.798 +02:00 [DBG] No client front-channel logout URLs
2019-07-04 11:19:23.803 +02:00 [DBG] No client back-channel logout URLs
2019-07-04 11:19:23.805 +02:00 [INF] Successful signout callback.
2019-07-04 11:19:23.812 +02:00 [DBG] No client front-channel iframe urls
2019-07-04 11:19:23.826 +02:00 [DBG] No client back-channel iframe urls
2019-07-04 11:21:52.001 +02:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-07-04 11:21:52.005 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-07-04 11:21:52.010 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-07-04 11:21:52.025 +02:00 [DBG] Start authorize request
2019-07-04 11:21:52.034 +02:00 [DBG] No user present in authorize request
2019-07-04 11:21:52.048 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:21:52.107 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:21:52.109 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:21:52.130 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:21:52.145 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:21:52.154 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:21:52.158 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:21:52.161 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:21:52.165 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseICSQaiFo7yNvs15EdGliZRNw71akUgQSqzGbxMfhyvP1y1Lb5Zro_Jzp7IJXtzALr4C64ZHrtd2QsmLx06nSmxLonINK-OHwwrmSiq3EaCXckgTABfZSOiOKr2lHjKkZ2s7PNKP-lwlVGuouuF2k-n9X4hLi47hNaf8MiuQe7_vr6C0ag47egan645sxhWi2Q7EY7v4tTzwEjKS2o-S0H9g8fAu-bIkfIPN3hMGE7pdVBd6Jy4KMGN7wHl78S7WRjBBSSg_9NV83wRCgecyf8_YQBV7lZyuiXzWuTYpSSH9iA","UiLocales":null,"Nonce":"636978289119759443.MjliNjM5YmMtMDZjMC00YTk3LWI1ZmMtYmRiMTIyYzhhZDEzNDI0ODMwMzgtZjc0ZC00NmI5LTgwOTYtMjcyOTE1M2VlMTZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978289119759443.MjliNjM5YmMtMDZjMC00YTk3LWI1ZmMtYmRiMTIyYzhhZDEzNDI0ODMwMzgtZjc0ZC00NmI5LTgwOTYtMjcyOTE1M2VlMTZi","state":"CfDJ8BST-4sCksNFlez27BzseICSQaiFo7yNvs15EdGliZRNw71akUgQSqzGbxMfhyvP1y1Lb5Zro_Jzp7IJXtzALr4C64ZHrtd2QsmLx06nSmxLonINK-OHwwrmSiq3EaCXckgTABfZSOiOKr2lHjKkZ2s7PNKP-lwlVGuouuF2k-n9X4hLi47hNaf8MiuQe7_vr6C0ag47egan645sxhWi2Q7EY7v4tTzwEjKS2o-S0H9g8fAu-bIkfIPN3hMGE7pdVBd6Jy4KMGN7wHl78S7WRjBBSSg_9NV83wRCgecyf8_YQBV7lZyuiXzWuTYpSSH9iA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:21:52.240 +02:00 [INF] Showing login: User is not authenticated
2019-07-04 11:21:52.254 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:21:52.266 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:21:52.268 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:21:52.279 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:21:52.285 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:21:52.290 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:21:52.295 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:21:52.300 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:21:52.311 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:21:52.312 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:21:52.324 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-04 11:22:05.355 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-04 11:22:05.423 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:22:05.424 +02:00 [DBG] Adding amr claim with value: external
2019-07-04 11:22:05.427 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:22:05.429 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:22:05.442 +02:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-07-04 11:22:05.445 +02:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-07-04 11:22:05.452 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-07-04 11:22:05.455 +02:00 [DBG] Start authorize callback request
2019-07-04 11:22:05.457 +02:00 [DBG] User in authorize request: e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:22:05.462 +02:00 [DBG] Start authorize request protocol validation
2019-07-04 11:22:05.498 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:22:05.500 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:22:05.519 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:22:05.529 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:22:05.535 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:22:05.539 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:22:05.542 +02:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-07-04 11:22:05.545 +02:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"SampleClient","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile email","State":"CfDJ8BST-4sCksNFlez27BzseICSQaiFo7yNvs15EdGliZRNw71akUgQSqzGbxMfhyvP1y1Lb5Zro_Jzp7IJXtzALr4C64ZHrtd2QsmLx06nSmxLonINK-OHwwrmSiq3EaCXckgTABfZSOiOKr2lHjKkZ2s7PNKP-lwlVGuouuF2k-n9X4hLi47hNaf8MiuQe7_vr6C0ag47egan645sxhWi2Q7EY7v4tTzwEjKS2o-S0H9g8fAu-bIkfIPN3hMGE7pdVBd6Jy4KMGN7wHl78S7WRjBBSSg_9NV83wRCgecyf8_YQBV7lZyuiXzWuTYpSSH9iA","UiLocales":null,"Nonce":"636978289119759443.MjliNjM5YmMtMDZjMC00YTk3LWI1ZmMtYmRiMTIyYzhhZDEzNDI0ODMwMzgtZjc0ZC00NmI5LTgwOTYtMjcyOTE1M2VlMTZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"95d91045af66c069bc03fed618607db0","Raw":{"client_id":"SampleClient","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile email","response_mode":"form_post","nonce":"636978289119759443.MjliNjM5YmMtMDZjMC00YTk3LWI1ZmMtYmRiMTIyYzhhZDEzNDI0ODMwMzgtZjc0ZC00NmI5LTgwOTYtMjcyOTE1M2VlMTZi","state":"CfDJ8BST-4sCksNFlez27BzseICSQaiFo7yNvs15EdGliZRNw71akUgQSqzGbxMfhyvP1y1Lb5Zro_Jzp7IJXtzALr4C64ZHrtd2QsmLx06nSmxLonINK-OHwwrmSiq3EaCXckgTABfZSOiOKr2lHjKkZ2s7PNKP-lwlVGuouuF2k-n9X4hLi47hNaf8MiuQe7_vr6C0ag47egan645sxhWi2Q7EY7v4tTzwEjKS2o-S0H9g8fAu-bIkfIPN3hMGE7pdVBd6Jy4KMGN7wHl78S7WRjBBSSg_9NV83wRCgecyf8_YQBV7lZyuiXzWuTYpSSH9iA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-07-04 11:22:05.580 +02:00 [DBG] GNGmPOsU172w7nBZc+woTwkrs9WsLnLr4V/LifAlRTg= found in database: true
2019-07-04 11:22:05.584 +02:00 [DBG] Consent found in consent store is same as current request, consent is not required
2019-07-04 11:22:05.586 +02:00 [DBG] Creating Implicit Flow response.
2019-07-04 11:22:05.587 +02:00 [DBG] Getting claims for identity token for subject: e8adf7ad-c928-4812-9a16-69ab712ae0e9 and client: SampleClient
2019-07-04 11:22:05.604 +02:00 [INF] Authorize endpoint response
{"SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","ClientId":"SampleClient","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8BST-4sCksNFlez27BzseICSQaiFo7yNvs15EdGliZRNw71akUgQSqzGbxMfhyvP1y1Lb5Zro_Jzp7IJXtzALr4C64ZHrtd2QsmLx06nSmxLonINK-OHwwrmSiq3EaCXckgTABfZSOiOKr2lHjKkZ2s7PNKP-lwlVGuouuF2k-n9X4hLi47hNaf8MiuQe7_vr6C0ag47egan645sxhWi2Q7EY7v4tTzwEjKS2o-S0H9g8fAu-bIkfIPN3hMGE7pdVBd6Jy4KMGN7wHl78S7WRjBBSSg_9NV83wRCgecyf8_YQBV7lZyuiXzWuTYpSSH9iA","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-07-04 11:22:05.612 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:22:05.614 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:22:19.430 +02:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-07-04 11:22:19.441 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-07-04 11:22:19.446 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-07-04 11:22:19.454 +02:00 [DBG] Processing signout request for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:22:19.457 +02:00 [DBG] Start end session request validation
2019-07-04 11:22:19.458 +02:00 [DBG] Start identity token validation
2019-07-04 11:22:19.507 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:22:19.508 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:22:19.515 +02:00 [DBG] Client found: SampleClient / MVC Client
2019-07-04 11:22:19.528 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-07-04 11:22:19.532 +02:00 [DBG] Token validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1562232125,"exp":1562232425,"iss":"http://localhost:5000","aud":"SampleClient","nonce":"636978289119759443.MjliNjM5YmMtMDZjMC00YTk3LWI1ZmMtYmRiMTIyYzhhZDEzNDI0ODMwMzgtZjc0ZC00NmI5LTgwOTYtMjcyOTE1M2VlMTZi","iat":1562232125,"sid":"95d91045af66c069bc03fed618607db0","sub":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","auth_time":1562232125,"idp":"Microsoft","name":"Fungai Mashozhera","given_name":"Fungai","family_name":"Mashozhera","email":"Fungai.Mashozhera@liquidtelecom.com","preferred_username":"cd375e33-00fa-45f7-9858-2eb7a32be1d1","amr":"external"},"$type":"TokenValidationLog"}
2019-07-04 11:22:19.556 +02:00 [INF] End session request validation success
{"ClientId":"SampleClient","ClientName":"MVC Client","SubjectId":"e8adf7ad-c928-4812-9a16-69ab712ae0e9","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8BST-4sCksNFlez27BzseIAJ0wbqG3ZLaNwlenQODneqIlV-FGqiB8rw7LtwNHR1F1jqgUOw586KVA6wifjrG0RxWIETHEC0K_VSAx4wNMBbqfUkW06qpZB77BSBtELdsgaR05JykQDdokejOadtxLQH-iNdhFucc-2YVtTKsmdd","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8BST-4sCksNFlez27BzseIAJ0wbqG3ZLaNwlenQODneqIlV-FGqiB8rw7LtwNHR1F1jqgUOw586KVA6wifjrG0RxWIETHEC0K_VSAx4wNMBbqfUkW06qpZB77BSBtELdsgaR05JykQDdokejOadtxLQH-iNdhFucc-2YVtTKsmdd","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-07-04 11:22:19.578 +02:00 [DBG] Success validating end session request from SampleClient
2019-07-04 11:22:19.590 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-04 11:22:19.597 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:22:19.604 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-04 11:22:19.673 +02:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-07-04 11:22:19.692 +02:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-07-04 11:22:19.699 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-07-04 11:22:19.706 +02:00 [DBG] Processing signout callback request
2019-07-04 11:22:19.792 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:22:19.795 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:22:19.808 +02:00 [DBG] No client front-channel logout URLs
2019-07-04 11:22:19.811 +02:00 [DBG] No client back-channel logout URLs
2019-07-04 11:22:19.813 +02:00 [INF] Successful signout callback.
2019-07-04 11:22:19.824 +02:00 [DBG] No client front-channel iframe urls
2019-07-04 11:22:19.830 +02:00 [DBG] No client back-channel iframe urls
2019-07-04 11:22:34.493 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-04 11:22:36.637 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-04 11:22:38.436 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-04 11:22:38.460 +02:00 [DBG] Augmenting SignInContext
2019-07-04 11:22:38.462 +02:00 [DBG] Adding amr claim with value: external
2019-07-04 11:22:38.466 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 11:22:38.469 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 11:22:38.607 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:22:38.622 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:22:38.623 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:22:38.639 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:22:38.655 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:22:41.510 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:22:41.521 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:22:41.522 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:22:41.532 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:22:41.537 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:22:54.272 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 11:22:55.654 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Mapper not initialized. Call Initialize with appropriate configuration. If you are trying to use mapper instances through a container or otherwise, make sure you do not have any calls to the static Mapper.Map methods, and if you're using ProjectTo or UseAsDataSource extension methods, make sure you pass in the appropriate IConfigurationProvider instance.
   at AutoMapper.Mapper.get_Instance() in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 36
   at AutoMapper.Mapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 76
   at SecurityServer.Controllers.ClientsController.Register(RegisterClientViewModel registerClientViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 11:56:18.205 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 11:56:18.304 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 11:56:18.309 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 11:56:18.313 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 11:56:18.316 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 11:56:18.317 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 11:56:18.318 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 11:56:18.692 +02:00 [DBG] Starting grant removal
2019-07-04 11:56:21.509 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 11:56:21.521 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 11:56:21.523 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 11:56:21.524 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 11:56:21.527 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 11:56:21.533 +02:00 [DBG] Error Url: /home/error
2019-07-04 11:56:21.538 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 11:56:45.010 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 11:56:45.484 +02:00 [DBG] SampleClient found in database: true
2019-07-04 11:56:45.492 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 11:56:45.568 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 11:56:45.679 +02:00 [DBG] Found [] API scopes in database
2019-07-04 11:56:54.543 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 11:56:55.721 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Mapper not initialized. Call Initialize with appropriate configuration. If you are trying to use mapper instances through a container or otherwise, make sure you do not have any calls to the static Mapper.Map methods, and if you're using ProjectTo or UseAsDataSource extension methods, make sure you pass in the appropriate IConfigurationProvider instance.
   at AutoMapper.Mapper.get_Instance() in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 36
   at AutoMapper.Mapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 76
   at SecurityServer.Controllers.ClientsController.Register(RegisterClientViewModel registerClientViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 12:49:42.167 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 12:49:42.225 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 12:49:42.226 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 12:49:42.227 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 12:49:42.227 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 12:49:42.228 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 12:49:42.228 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 12:49:42.410 +02:00 [DBG] Starting grant removal
2019-07-04 12:49:46.367 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 12:49:46.374 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 12:49:46.378 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 12:49:46.379 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 12:49:46.382 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 12:49:46.391 +02:00 [DBG] Error Url: /home/error
2019-07-04 12:49:46.396 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 12:49:52.797 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 12:49:53.670 +02:00 [DBG] SampleClient found in database: true
2019-07-04 12:49:53.683 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 12:49:53.804 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 12:49:53.994 +02:00 [DBG] Found [] API scopes in database
2019-07-04 12:50:03.227 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 12:50:21.368 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
RegisterClientViewModel -> Client
SecureTokenServer.Models.RegisterClientViewModel -> IdentityServer4.EntityFramework.Entities.Client

Type Map configuration:
RegisterClientViewModel -> Client
SecureTokenServer.Models.RegisterClientViewModel -> IdentityServer4.EntityFramework.Entities.Client

Destination Member:
RedirectUris
 ---> AutoMapper.AutoMapperConfigurationException: 
Unmapped members were found. Review the types and members below.
Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type
For no matching constructor, add a no-arg ctor, add optional arguments, or map all of the constructor parameters
============================================================================
AutoMapper created this type map for you, but your types cannot be mapped using the current configuration.
String -> ClientRedirectUri (Destination member list)
System.String -> IdentityServer4.EntityFramework.Entities.ClientRedirectUri (Destination member list)

Unmapped properties:
Id
RedirectUri
ClientId
Client

   at AutoMapper.ConfigurationValidator.AssertConfigurationIsValid(IEnumerable`1 typeMaps) in C:\projects\automapper\src\AutoMapper\ConfigurationValidator.cs:line 28
   at AutoMapper.MapperConfiguration.AssertConfigurationIsValid(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\MapperConfiguration.cs:line 282
   at AutoMapper.ResolutionContext.ValidateMap(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\ResolutionContext.cs:line 120
   at lambda_method(Closure , RegisterClientViewModel , Client , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method(Closure , RegisterClientViewModel , Client , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecurityServer.Controllers.ClientsController.Register(RegisterClientViewModel registerClientViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 13:11:58.191 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 13:21:09.469 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 13:21:24.962 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 13:21:24.964 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 13:21:24.965 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 13:21:24.966 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 13:21:24.966 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 13:21:24.967 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 13:21:25.399 +02:00 [DBG] Starting grant removal
2019-07-04 13:21:30.023 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 13:21:30.036 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 13:21:30.044 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 13:21:30.074 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 13:21:30.076 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 13:21:30.079 +02:00 [DBG] Error Url: /home/error
2019-07-04 13:21:30.094 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 13:21:35.872 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 13:21:37.003 +02:00 [DBG] SampleClient found in database: true
2019-07-04 13:21:37.022 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 13:21:37.219 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 13:21:37.641 +02:00 [DBG] Found [] API scopes in database
2019-07-04 13:21:46.526 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 13:22:48.159 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 13:22:48.187 +02:00 [DBG] SampleClient found in database: true
2019-07-04 13:22:48.188 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 13:22:48.200 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 13:22:48.208 +02:00 [DBG] Found [] API scopes in database
2019-07-04 13:23:49.404 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 13:23:58.879 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 13:23:58.911 +02:00 [DBG] SampleClient found in database: true
2019-07-04 13:23:58.912 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 13:23:58.926 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 13:23:58.935 +02:00 [DBG] Found [] API scopes in database
2019-07-04 13:26:20.197 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 13:26:20.303 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-04 13:26:20.310 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 13:26:20.316 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-04 13:26:24.105 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-04 13:26:25.364 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-04 13:26:28.619 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-04 13:26:28.725 +02:00 [DBG] Augmenting SignInContext
2019-07-04 13:26:28.728 +02:00 [DBG] Adding amr claim with value: external
2019-07-04 13:26:28.732 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-04 13:26:28.735 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-04 13:26:28.785 +02:00 [DBG] 1 persisted grants found for e8adf7ad-c928-4812-9a16-69ab712ae0e9
2019-07-04 13:26:28.816 +02:00 [DBG] SampleClient found in database: true
2019-07-04 13:26:28.817 +02:00 [DBG] client configuration validation for client SampleClient succeeded.
2019-07-04 13:26:28.830 +02:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2019-07-04 13:26:28.838 +02:00 [DBG] Found [] API scopes in database
2019-07-04 14:31:50.372 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 14:31:50.494 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 14:31:50.498 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 14:31:50.499 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 14:31:50.500 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 14:31:50.501 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 14:31:50.502 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 14:31:50.923 +02:00 [DBG] Starting grant removal
2019-07-04 14:31:54.077 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 14:31:54.087 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 14:31:54.089 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 14:31:54.101 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 14:31:54.102 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 14:31:54.103 +02:00 [DBG] Error Url: /home/error
2019-07-04 14:31:54.105 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 14:44:59.564 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 14:44:59.647 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 14:44:59.651 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 14:44:59.652 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 14:44:59.653 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 14:44:59.654 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 14:44:59.655 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 14:44:59.915 +02:00 [DBG] Starting grant removal
2019-07-04 14:45:03.826 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 14:45:03.841 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 14:45:03.858 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 14:45:03.883 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 14:45:03.908 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 14:45:04.010 +02:00 [DBG] Error Url: /home/error
2019-07-04 14:45:04.076 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 14:48:11.768 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 14:48:11.835 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 14:48:11.837 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 14:48:11.838 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 14:48:11.839 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 14:48:11.840 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 14:48:11.840 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 14:48:12.051 +02:00 [DBG] Starting grant removal
2019-07-04 14:48:14.688 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 14:48:14.698 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 14:48:14.701 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 14:48:14.731 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 14:48:14.751 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 14:48:14.760 +02:00 [DBG] Error Url: /home/error
2019-07-04 14:48:14.765 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:05:56.988 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:05:57.075 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:05:57.076 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:05:57.077 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:05:57.078 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:05:57.078 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:05:57.079 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:05:57.341 +02:00 [DBG] Starting grant removal
2019-07-04 16:06:01.135 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:06:01.204 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:06:01.255 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:06:01.304 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:06:01.353 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:06:01.422 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:06:01.467 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:06:16.036 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 26
   at SecurityServer.Controllers.ClientsController.Edit(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 86
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:07:03.211 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 26
   at SecurityServer.Controllers.ClientsController.Edit(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 86
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:07:18.914 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 26
   at SecurityServer.Controllers.ClientsController.Edit(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 86
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:08:21.641 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 26
   at SecurityServer.Controllers.ClientsController.Edit(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 86
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:09:50.580 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:09:50.699 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:09:50.701 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:09:50.702 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:09:50.703 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:09:50.704 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:09:50.705 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:09:50.922 +02:00 [DBG] Starting grant removal
2019-07-04 16:09:53.701 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:09:53.716 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:09:53.724 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:09:53.726 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:09:53.728 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:09:53.733 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:09:53.736 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:10:09.185 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 27
   at SecurityServer.Controllers.ClientsController.Edit(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 86
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:12:18.320 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
   at SecureTokenServer.Services.ClientService.Get(String clientId)
   at SecurityServer.Controllers.ClientsController.Edit(String clientId)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-04 16:15:30.513 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:15:30.566 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:15:30.567 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:15:30.568 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:15:30.569 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:15:30.569 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:15:30.570 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:15:30.799 +02:00 [DBG] Starting grant removal
2019-07-04 16:15:33.978 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:15:33.984 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:15:33.992 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:15:33.999 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:15:34.007 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:15:34.022 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:15:34.029 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:15:53.370 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.391 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.401 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.421 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.429 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.442 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.449 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.477 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.484 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.508 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.518 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.528 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.537 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:15:53.557 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-04 16:17:07.184 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:17:07.247 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:17:07.248 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:17:07.248 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:17:07.249 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:17:07.250 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:17:07.251 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:17:07.408 +02:00 [DBG] Starting grant removal
2019-07-04 16:17:10.444 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:17:10.452 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:17:10.456 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:17:10.459 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:17:10.460 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:17:10.464 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:17:10.471 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:17:22.971 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:17:22.981 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:17:22.987 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:22.996 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.004 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.010 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.014 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.027 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.030 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.040 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.044 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.050 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.057 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:17:23.067 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-04 16:20:38.336 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:20:38.438 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:20:38.441 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:20:38.442 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:20:38.443 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:20:38.444 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:20:38.446 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:20:38.843 +02:00 [DBG] Starting grant removal
2019-07-04 16:20:42.748 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:20:42.778 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:20:42.799 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:20:42.868 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:20:42.938 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:20:42.955 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:20:42.984 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:21:29.902 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 16:27:28.864 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:27:28.931 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:27:28.934 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:27:28.935 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:27:28.935 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:27:28.936 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:27:28.937 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:27:29.151 +02:00 [DBG] Starting grant removal
2019-07-04 16:27:32.053 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:27:32.061 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:27:32.063 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:27:32.064 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:27:32.069 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:27:32.073 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:27:32.074 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:27:42.874 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.887 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.892 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.900 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.903 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.906 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.910 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.919 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.921 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.927 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.929 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.934 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.939 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:27:42.944 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-04 16:27:50.621 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 16:34:42.717 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:34:42.806 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:34:42.807 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:34:42.808 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:34:42.809 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:34:42.810 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:34:42.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:34:43.228 +02:00 [DBG] Starting grant removal
2019-07-04 16:34:45.922 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:34:45.928 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:34:45.933 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:34:45.937 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:34:45.939 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:34:45.943 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:34:45.945 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:34:54.000 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.019 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.030 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.043 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.047 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.056 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.062 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.081 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.088 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.104 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.111 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.120 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.127 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:34:54.139 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-04 16:35:03.925 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 16:35:47.672 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 16:49:55.014 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-04 16:49:55.122 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-04 16:49:55.124 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-04 16:49:55.125 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-04 16:49:55.126 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-04 16:49:55.127 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-04 16:49:55.129 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-04 16:49:55.590 +02:00 [DBG] Starting grant removal
2019-07-04 16:49:59.186 +02:00 [DBG] Login Url: /Account/Login
2019-07-04 16:49:59.191 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-04 16:49:59.194 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-04 16:49:59.200 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-04 16:49:59.203 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-04 16:49:59.205 +02:00 [DBG] Error Url: /home/error
2019-07-04 16:49:59.206 +02:00 [DBG] Error Id Parameter: errorId
2019-07-04 16:50:07.091 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.103 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.109 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.116 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.118 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.125 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.129 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.138 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.141 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.149 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.151 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.155 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.159 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-04 16:50:07.164 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-04 16:50:35.332 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 16:51:37.707 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-04 17:49:56.112 +02:00 [INF] Removing 0 grants
2019-07-04 17:50:22.888 +02:00 [DBG] TaskCanceledException. Exiting.
2019-07-04 17:50:23.520 +02:00 [DBG] Stopping grant removal
2019-07-05 08:42:16.800 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 08:42:16.930 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 08:42:16.932 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 08:42:16.932 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 08:42:16.933 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 08:42:16.933 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 08:42:16.935 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 08:42:17.642 +02:00 [DBG] Starting grant removal
2019-07-05 08:42:22.437 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 08:42:22.443 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 08:42:22.447 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 08:42:22.453 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 08:42:22.456 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 08:42:22.458 +02:00 [DBG] Error Url: /home/error
2019-07-05 08:42:22.459 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 08:42:25.090 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-05 08:42:30.031 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-05 08:42:36.151 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-05 08:42:37.026 +02:00 [DBG] Augmenting SignInContext
2019-07-05 08:42:37.028 +02:00 [DBG] Adding amr claim with value: external
2019-07-05 08:42:37.043 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-05 08:42:37.063 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-05 08:42:46.676 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.699 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.715 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.728 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.732 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.744 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.751 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.767 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.774 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.791 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.795 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.810 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.818 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-05 08:42:46.826 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-05 08:42:50.512 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:43:12.360 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:43:36.234 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:43:57.315 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:44:17.452 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:44:27.816 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 08:45:02.928 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-05 10:30:19.398 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 10:30:19.471 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 10:30:19.476 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 10:30:19.477 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 10:30:19.478 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 10:30:19.479 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 10:30:19.480 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 10:30:19.828 +02:00 [DBG] Starting grant removal
2019-07-05 10:30:22.960 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 10:30:22.970 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 10:30:22.974 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 10:30:22.976 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 10:30:22.978 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 10:30:22.983 +02:00 [DBG] Error Url: /home/error
2019-07-05 10:30:22.986 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 10:48:46.769 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 10:48:46.846 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 10:48:46.849 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 10:48:46.850 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 10:48:46.851 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 10:48:46.852 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 10:48:46.853 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 10:48:47.112 +02:00 [DBG] Starting grant removal
2019-07-05 10:48:50.459 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 10:48:50.484 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 10:48:50.491 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 10:48:50.499 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 10:48:50.502 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 10:48:50.508 +02:00 [DBG] Error Url: /home/error
2019-07-05 10:48:50.515 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 11:13:16.245 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 11:13:16.321 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 11:13:16.323 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 11:13:16.324 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 11:13:16.326 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 11:13:16.327 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 11:13:16.328 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 11:13:16.601 +02:00 [DBG] Starting grant removal
2019-07-05 11:13:20.087 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 11:13:20.098 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 11:13:20.111 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 11:13:20.114 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 11:13:20.117 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 11:13:20.126 +02:00 [DBG] Error Url: /home/error
2019-07-05 11:13:20.129 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 11:13:46.395 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'SecureTokenServer.Models.RegisterApiResourceViewModel', but this ViewDataDictionary instance requires a model item of type 'System.Collections.Generic.IEnumerable`1[IdentityServer4.Models.Resource]'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-05 11:16:50.829 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 11:16:50.903 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 11:16:50.904 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 11:16:50.905 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 11:16:50.905 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 11:16:50.906 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 11:16:50.907 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 11:16:51.099 +02:00 [DBG] Starting grant removal
2019-07-05 11:16:53.505 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 11:16:53.518 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 11:16:53.525 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 11:16:53.526 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 11:16:53.532 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 11:16:53.540 +02:00 [DBG] Error Url: /home/error
2019-07-05 11:16:53.548 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 11:17:32.880 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'SecureTokenServer.Models.RegisterApiResourceViewModel', but this ViewDataDictionary instance requires a model item of type 'System.Collections.Generic.IEnumerable`1[IdentityServer4.Models.Resource]'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-05 11:20:41.018 +02:00 [ERR] Failed executing DbCommand (784ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiResources] ([Created], [Description], [DisplayName], [Enabled], [LastAccessed], [Name], [NonEditable], [Updated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [ApiResources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (testAPI).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:1302a74e-9851-4b9a-824b-2193ed4c4af8
Error Number:2601,State:1,Class:14
2019-07-05 11:20:41.631 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (testAPI).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (testAPI).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-05 11:20:43.218 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (testAPI).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at SecureTokenServer.Services.ResourceService.Commit() in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 24
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 50
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-05 11:40:12.117 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 11:40:12.322 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 11:40:12.340 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 11:40:12.349 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 11:40:12.350 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 11:40:12.351 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 11:40:12.363 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 11:40:12.879 +02:00 [DBG] Starting grant removal
2019-07-05 11:40:16.560 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 11:40:16.580 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 11:40:16.592 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 11:40:16.604 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 11:40:16.609 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 11:40:16.610 +02:00 [DBG] Error Url: /home/error
2019-07-05 11:40:16.620 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 11:41:17.756 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotImplementedException: The method or operation is not implemented.
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 30
   at SecureTokenServer.Controllers.ResourcesController.Edit(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 59
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-05 11:44:26.845 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 11:44:26.935 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 11:44:26.937 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 11:44:26.939 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 11:44:26.940 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 11:44:26.941 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 11:44:26.942 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 11:44:27.217 +02:00 [DBG] Starting grant removal
2019-07-05 11:44:29.651 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 11:44:29.668 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 11:44:29.685 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 11:44:29.702 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 11:44:29.732 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 11:44:29.739 +02:00 [DBG] Error Url: /home/error
2019-07-05 11:44:29.753 +02:00 [DBG] Error Id Parameter: errorId
2019-07-05 11:48:54.077 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-05 11:48:54.138 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-05 11:48:54.140 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-05 11:48:54.141 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-05 11:48:54.142 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-05 11:48:54.143 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-05 11:48:54.145 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-05 11:48:54.586 +02:00 [DBG] Starting grant removal
2019-07-05 11:48:57.468 +02:00 [DBG] Login Url: /Account/Login
2019-07-05 11:48:57.477 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-05 11:48:57.485 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-05 11:48:57.492 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-05 11:48:57.496 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-05 11:48:57.498 +02:00 [DBG] Error Url: /home/error
2019-07-05 11:48:57.503 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 08:31:44.508 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2019-07-08 08:37:03.813 +02:00 [ERR] Failed executing DbCommand (327ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [SecurityServer];
System.Data.SqlClient.SqlException (0x80131904): Database 'SecurityServer' already exists. Choose a different database name.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:78caece9-48b6-4618-a26b-a4eeaa826d7e
Error Number:1801,State:3,Class:16
2019-07-08 08:37:04.309 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Database 'SecurityServer' already exists. Choose a different database name.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Create()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:78caece9-48b6-4618-a26b-a4eeaa826d7e
Error Number:1801,State:3,Class:16
2019-07-08 08:42:24.766 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 08:42:24.820 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 08:42:24.821 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 08:42:24.822 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 08:42:24.822 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 08:42:24.823 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 08:42:24.823 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 08:42:25.698 +02:00 [DBG] Starting grant removal
2019-07-08 08:42:43.094 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 08:42:43.098 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 08:42:43.101 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 08:42:43.102 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 08:42:43.103 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 08:42:43.105 +02:00 [DBG] Error Url: /home/error
2019-07-08 08:42:43.106 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 08:42:49.089 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 08:42:56.204 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 08:43:03.909 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 08:43:05.882 +02:00 [DBG] Augmenting SignInContext
2019-07-08 08:43:05.885 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 08:43:05.901 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 08:43:05.911 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 08:43:20.130 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.149 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.159 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.165 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.168 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.174 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.178 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.188 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.192 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.200 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.202 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.205 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.211 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:43:20.216 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-08 08:43:48.137 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:44:24.751 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:44:50.068 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:44:52.461 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:45:37.428 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:45:41.433 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:45:41.802 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:45:42.157 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:48:01.692 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 08:48:01.779 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 08:48:01.782 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 08:48:01.783 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 08:48:01.793 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 08:48:01.794 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 08:48:01.795 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 08:48:02.056 +02:00 [DBG] Starting grant removal
2019-07-08 08:48:06.901 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 08:48:06.908 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 08:48:06.920 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 08:48:06.922 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 08:48:06.925 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 08:48:06.935 +02:00 [DBG] Error Url: /home/error
2019-07-08 08:48:06.940 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 08:48:09.408 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 08:49:27.824 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 08:49:31.746 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 08:49:32.107 +02:00 [DBG] Augmenting SignInContext
2019-07-08 08:49:32.109 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 08:49:32.119 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 08:49:32.128 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 08:51:41.563 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.578 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.583 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.602 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.611 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.623 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.631 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.658 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.669 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.699 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.708 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.713 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.721 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:51:41.728 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-08 08:54:15.414 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:55:10.196 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:55:32.815 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:55:52.076 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:57:43.877 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 08:57:43.961 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 08:57:43.962 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 08:57:43.962 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 08:57:43.963 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 08:57:43.963 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 08:57:43.964 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 08:57:44.620 +02:00 [DBG] Starting grant removal
2019-07-08 08:57:52.037 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 08:57:52.043 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 08:57:52.046 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 08:57:52.049 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 08:57:52.050 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 08:57:52.052 +02:00 [DBG] Error Url: /home/error
2019-07-08 08:57:52.057 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 08:57:53.830 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 08:58:42.300 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 08:58:46.316 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 08:58:46.748 +02:00 [DBG] Augmenting SignInContext
2019-07-08 08:58:46.750 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 08:58:46.758 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 08:58:46.766 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 08:59:04.879 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.895 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.903 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.909 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.912 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.919 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.924 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.940 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.944 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.958 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.968 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.978 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-08 08:59:04.988 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-08 08:59:05.002 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-08 08:59:15.474 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-08 08:59:33.099 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 30
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:38:56.401 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 10:38:56.513 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 10:38:56.516 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 10:38:56.517 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 10:38:56.518 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 10:38:56.519 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 10:38:56.520 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 10:38:57.640 +02:00 [DBG] Starting grant removal
2019-07-08 10:39:31.441 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 10:39:31.563 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 10:39:31.566 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 10:39:31.567 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 10:39:31.569 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 10:39:31.571 +02:00 [DBG] Error Url: /home/error
2019-07-08 10:39:31.572 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 10:39:38.722 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 10:41:54.855 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 10:42:02.743 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 10:42:05.006 +02:00 [DBG] Augmenting SignInContext
2019-07-08 10:42:05.008 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 10:42:05.019 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 10:42:05.029 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 10:44:08.131 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 32
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:44:34.566 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 32
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:45:08.841 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 32
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:45:24.428 +02:00 [ERR] The view 'Manage' was not found. Searched locations: ["/Views/Resources/Manage.cshtml","/Views/Shared/Manage.cshtml","/Pages/Shared/Manage.cshtml"]
2019-07-08 10:45:25.578 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Manage' was not found. The following locations were searched:
/Views/Resources/Manage.cshtml
/Views/Shared/Manage.cshtml
/Pages/Shared/Manage.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:46:16.891 +02:00 [ERR] The view 'Manage' was not found. Searched locations: ["/Views/Resources/Manage.cshtml","/Views/Shared/Manage.cshtml","/Pages/Shared/Manage.cshtml"]
2019-07-08 10:46:18.619 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Manage' was not found. The following locations were searched:
/Views/Resources/Manage.cshtml
/Views/Shared/Manage.cshtml
/Pages/Shared/Manage.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:47:04.045 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'SecureTokenServer.Models.RegisterApiResourceViewModel', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 10:53:31.465 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml(19,95): error CS0103: The name 'ModelDescription' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 11:22:46.088 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 11:22:46.267 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 11:22:46.270 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 11:22:46.271 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 11:22:46.272 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 11:22:46.274 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 11:22:46.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 11:22:46.608 +02:00 [DBG] Starting grant removal
2019-07-08 11:22:54.035 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 11:22:54.081 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 11:22:54.102 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 11:22:54.146 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 11:22:54.217 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 11:22:54.354 +02:00 [DBG] Error Url: /home/error
2019-07-08 11:22:54.416 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 11:22:56.996 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 11:23:00.313 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 11:23:04.814 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 11:23:05.765 +02:00 [DBG] Augmenting SignInContext
2019-07-08 11:23:05.770 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 11:23:05.798 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 11:23:05.819 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 11:23:59.326 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ApiResource -> ManageApiResourceViewModel
IdentityServer4.Models.ApiResource -> SecureTokenServer.Models.ManageApiResourceViewModel

Type Map configuration:
ApiResource -> ManageApiResourceViewModel
IdentityServer4.Models.ApiResource -> SecureTokenServer.Models.ManageApiResourceViewModel

Destination Member:
Scopes
 ---> AutoMapper.AutoMapperConfigurationException: 
Unmapped members were found. Review the types and members below.
Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type
For no matching constructor, add a no-arg ctor, add optional arguments, or map all of the constructor parameters
===================================================================================
AutoMapper created this type map for you, but your types cannot be mapped using the current configuration.
Scope -> ApiResourceScopeViewModel (Destination member list)
IdentityServer4.Models.Scope -> SecureTokenServer.Models.ApiResourceScopeViewModel (Destination member list)

Unmapped properties:
Id
ApiResourceId
Claims

   at AutoMapper.ConfigurationValidator.AssertConfigurationIsValid(IEnumerable`1 typeMaps) in C:\projects\automapper\src\AutoMapper\ConfigurationValidator.cs:line 28
   at AutoMapper.MapperConfiguration.AssertConfigurationIsValid(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\MapperConfiguration.cs:line 282
   at AutoMapper.ResolutionContext.ValidateMap(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\ResolutionContext.cs:line 120
   at lambda_method(Closure , ApiResource , ManageApiResourceViewModel , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method(Closure , ApiResource , ManageApiResourceViewModel , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 11:25:48.695 +02:00 [DBG] TaskCanceledException. Exiting.
2019-07-08 11:25:48.926 +02:00 [DBG] Stopping grant removal
2019-07-08 11:29:32.893 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 11:29:32.954 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 11:29:32.956 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 11:29:32.956 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 11:29:32.957 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 11:29:32.958 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 11:29:32.959 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 11:29:33.238 +02:00 [DBG] Starting grant removal
2019-07-08 11:29:39.816 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 11:29:39.864 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 11:29:39.892 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 11:29:39.909 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 11:29:39.937 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 11:29:39.955 +02:00 [DBG] Error Url: /home/error
2019-07-08 11:29:39.960 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 11:29:40.938 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 11:29:43.835 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 11:29:47.636 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 11:29:48.255 +02:00 [DBG] Augmenting SignInContext
2019-07-08 11:29:48.262 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 11:29:48.278 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 11:29:48.302 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 11:29:54.718 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ApiResource -> ManageApiResourceViewModel
IdentityServer4.Models.ApiResource -> SecureTokenServer.Models.ManageApiResourceViewModel

Type Map configuration:
ApiResource -> ManageApiResourceViewModel
IdentityServer4.Models.ApiResource -> SecureTokenServer.Models.ManageApiResourceViewModel

Destination Member:
Scopes
 ---> AutoMapper.AutoMapperConfigurationException: 
Unmapped members were found. Review the types and members below.
Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type
For no matching constructor, add a no-arg ctor, add optional arguments, or map all of the constructor parameters
===================================================================================
AutoMapper created this type map for you, but your types cannot be mapped using the current configuration.
Scope -> ApiResourceScopeViewModel (Destination member list)
IdentityServer4.Models.Scope -> SecureTokenServer.Models.ApiResourceScopeViewModel (Destination member list)

Unmapped properties:
Id
ApiResourceId
Claims

   at AutoMapper.ConfigurationValidator.AssertConfigurationIsValid(IEnumerable`1 typeMaps) in C:\projects\automapper\src\AutoMapper\ConfigurationValidator.cs:line 28
   at AutoMapper.MapperConfiguration.AssertConfigurationIsValid(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\MapperConfiguration.cs:line 282
   at AutoMapper.ResolutionContext.ValidateMap(TypeMap typeMap) in C:\projects\automapper\src\AutoMapper\ResolutionContext.cs:line 120
   at lambda_method(Closure , ApiResource , ManageApiResourceViewModel , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method(Closure , ApiResource , ManageApiResourceViewModel , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 77
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 11:35:51.636 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 11:35:51.745 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 11:35:51.748 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 11:35:51.749 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 11:35:51.750 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 11:35:51.751 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 11:35:51.752 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 11:35:52.112 +02:00 [DBG] Starting grant removal
2019-07-08 11:35:57.960 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 11:35:57.988 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 11:35:58.003 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 11:35:58.024 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 11:35:58.059 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 11:35:58.074 +02:00 [DBG] Error Url: /home/error
2019-07-08 11:35:58.084 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 11:35:59.009 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 11:36:02.595 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 11:36:06.732 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 11:36:07.510 +02:00 [DBG] Augmenting SignInContext
2019-07-08 11:36:07.515 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 11:36:07.527 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 11:36:07.552 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 12:05:55.049 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 12:05:55.099 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 12:05:55.101 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 12:05:55.101 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 12:05:55.102 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 12:05:55.102 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 12:05:55.103 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 12:05:55.373 +02:00 [DBG] Starting grant removal
2019-07-08 12:06:02.920 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 12:06:02.929 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 12:06:02.937 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 12:06:02.940 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 12:06:02.949 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 12:06:02.953 +02:00 [DBG] Error Url: /home/error
2019-07-08 12:06:02.962 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 12:06:04.025 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-08 12:06:49.078 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-08 12:06:53.068 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-08 12:06:53.776 +02:00 [DBG] Augmenting SignInContext
2019-07-08 12:06:53.780 +02:00 [DBG] Adding amr claim with value: external
2019-07-08 12:06:53.793 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-08 12:06:53.811 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-08 12:08:52.107 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 12:11:10.344 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 12:11:32.174 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 12:12:21.191 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 12:20:35.782 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 13:05:55.584 +02:00 [INF] Removing 0 grants
2019-07-08 14:05:55.633 +02:00 [INF] Removing 0 grants
2019-07-08 14:38:45.125 +02:00 [DBG] TaskCanceledException. Exiting.
2019-07-08 14:38:45.285 +02:00 [DBG] Stopping grant removal
2019-07-08 14:39:27.170 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 14:39:27.290 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 14:39:27.292 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 14:39:27.293 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 14:39:27.294 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 14:39:27.295 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 14:39:27.296 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 14:39:27.588 +02:00 [DBG] Starting grant removal
2019-07-08 14:39:30.754 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 14:39:30.767 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 14:39:30.776 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 14:39:30.778 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 14:39:30.784 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 14:39:30.786 +02:00 [DBG] Error Url: /home/error
2019-07-08 14:39:30.788 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 14:40:22.237 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type '<>f__AnonymousType2`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 14:48:10.803 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 14:48:10.903 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 14:48:10.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 14:48:10.906 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 14:48:10.907 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 14:48:10.908 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 14:48:10.909 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 14:48:11.169 +02:00 [DBG] Starting grant removal
2019-07-08 14:48:14.025 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 14:48:14.036 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 14:48:14.041 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 14:48:14.043 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 14:48:14.046 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 14:48:14.056 +02:00 [DBG] Error Url: /home/error
2019-07-08 14:48:14.059 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 14:48:58.564 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 78
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 14:49:59.165 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 78
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 14:53:19.885 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 14:53:19.943 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 14:53:19.944 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 14:53:19.945 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 14:53:19.946 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 14:53:19.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 14:53:19.948 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 14:53:20.208 +02:00 [DBG] Starting grant removal
2019-07-08 14:53:22.812 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 14:53:22.821 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 14:53:22.825 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 14:53:22.828 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 14:53:22.832 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 14:53:22.838 +02:00 [DBG] Error Url: /home/error
2019-07-08 14:53:22.843 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 14:55:42.749 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 14:55:42.806 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 14:55:42.808 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 14:55:42.808 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 14:55:42.809 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 14:55:42.809 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 14:55:42.810 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 14:55:43.006 +02:00 [DBG] Starting grant removal
2019-07-08 14:55:45.990 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 14:55:46.004 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 14:55:46.011 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 14:55:46.026 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 14:55:46.078 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 14:55:46.112 +02:00 [DBG] Error Url: /home/error
2019-07-08 14:55:46.165 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 15:07:31.756 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-08 15:07:31.808 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-08 15:07:31.809 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-08 15:07:31.810 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-08 15:07:31.810 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-08 15:07:31.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-08 15:07:31.812 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-08 15:07:32.002 +02:00 [DBG] Starting grant removal
2019-07-08 15:07:34.623 +02:00 [DBG] Login Url: /Account/Login
2019-07-08 15:07:34.635 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-08 15:07:34.640 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-08 15:07:34.642 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-08 15:07:34.644 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-08 15:07:34.653 +02:00 [DBG] Error Url: /home/error
2019-07-08 15:07:34.658 +02:00 [DBG] Error Id Parameter: errorId
2019-07-08 15:08:05.673 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddScope(Scope scope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 169
   at SecureTokenServer.Controllers.ResourcesController.AddScope(ManageApiResourceViewModel manageApiResourceViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 101
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 15:10:10.156 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddScope(Scope scope, String resourceName)
   at SecureTokenServer.Controllers.ResourcesController.AddScope(ManageApiResourceViewModel manageApiResourceViewModel)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-08 15:21:37.223 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml(79,141): error CS0103: The name 'resource' does not exist in the current context
D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml(80,140): error CS0103: The name 'resource' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 07:52:16.246 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 07:52:16.556 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 07:52:16.562 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 07:52:16.564 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 07:52:16.565 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 07:52:16.566 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 07:52:16.567 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 07:52:17.833 +02:00 [DBG] Starting grant removal
2019-07-09 07:52:24.901 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 07:52:24.978 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 07:52:24.986 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 07:52:24.992 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 07:52:24.993 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 07:52:24.995 +02:00 [DBG] Error Url: /home/error
2019-07-09 07:52:24.998 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 07:52:29.844 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-09 07:52:40.168 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-09 07:52:48.149 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-09 07:52:50.685 +02:00 [DBG] Augmenting SignInContext
2019-07-09 07:52:50.687 +02:00 [DBG] Adding amr claim with value: external
2019-07-09 07:52:50.695 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-09 07:52:50.702 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-09 08:52:17.901 +02:00 [INF] Removing 0 grants
2019-07-09 09:05:07.871 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-09 09:05:07.903 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-09 09:05:07.906 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-09 09:05:07.911 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-09 09:05:19.086 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-09 09:05:21.791 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-09 09:05:25.031 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-09 09:05:25.076 +02:00 [DBG] Augmenting SignInContext
2019-07-09 09:05:25.078 +02:00 [DBG] Adding amr claim with value: external
2019-07-09 09:05:25.082 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-09 09:05:25.085 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-09 09:06:02.006 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-07-09 09:06:02.022 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-07-09 09:06:02.026 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-09 09:06:02.037 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-07-09 09:06:06.655 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-09 09:07:15.640 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-09 09:07:16.824 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-09 09:07:16.850 +02:00 [DBG] Augmenting SignInContext
2019-07-09 09:07:16.851 +02:00 [DBG] Adding amr claim with value: external
2019-07-09 09:07:16.855 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-09 09:07:16.858 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-09 09:09:57.072 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 09:09:57.144 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 09:09:57.147 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 09:09:57.148 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 09:09:57.148 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 09:09:57.149 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 09:09:57.150 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 09:09:57.638 +02:00 [DBG] Starting grant removal
2019-07-09 09:10:00.818 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 09:10:00.825 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 09:10:00.831 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 09:10:00.833 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 09:10:00.835 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 09:10:00.841 +02:00 [DBG] Error Url: /home/error
2019-07-09 09:10:00.850 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 09:43:54.125 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 09:43:54.264 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 09:43:54.265 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 09:43:54.267 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 09:43:54.268 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 09:43:54.272 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 09:43:54.274 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 09:43:54.898 +02:00 [DBG] Starting grant removal
2019-07-09 09:43:59.154 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 09:43:59.164 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 09:43:59.175 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 09:43:59.179 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 09:43:59.188 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 09:43:59.191 +02:00 [DBG] Error Url: /home/error
2019-07-09 09:43:59.194 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 10:02:39.498 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 10:02:39.665 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 10:02:39.667 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 10:02:39.669 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 10:02:39.670 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 10:02:39.671 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 10:02:39.672 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 10:02:40.064 +02:00 [DBG] Starting grant removal
2019-07-09 10:02:43.003 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 10:02:43.016 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 10:02:43.030 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 10:02:43.035 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 10:02:43.044 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 10:02:43.049 +02:00 [DBG] Error Url: /home/error
2019-07-09 10:02:43.062 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 10:15:37.906 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 10:15:38.048 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 10:15:38.051 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 10:15:38.053 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 10:15:38.053 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 10:15:38.054 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 10:15:38.056 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 10:15:38.424 +02:00 [DBG] Starting grant removal
2019-07-09 10:15:42.750 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 10:15:42.756 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 10:15:42.762 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 10:15:42.766 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 10:15:42.768 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 10:15:42.773 +02:00 [DBG] Error Url: /home/error
2019-07-09 10:15:42.777 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:07:11.813 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 118
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 11:10:10.730 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:10:10.809 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:10:10.810 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:10:10.811 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:10:10.811 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:10:10.812 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:10:10.812 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:10:11.052 +02:00 [DBG] Starting grant removal
2019-07-09 11:10:13.995 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:10:14.014 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:10:14.027 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:10:14.074 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:10:14.093 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:10:14.110 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:10:14.114 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:10:43.419 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 118
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 11:12:52.046 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:12:52.168 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:12:52.171 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:12:52.172 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:12:52.172 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:12:52.173 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:12:52.174 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:12:52.438 +02:00 [DBG] Starting grant removal
2019-07-09 11:12:54.162 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:12:54.170 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:12:54.174 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:12:54.178 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:12:54.181 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:12:54.187 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:12:54.191 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:13:02.560 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 118
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 11:30:37.349 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:30:37.415 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:30:37.417 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:30:37.417 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:30:37.418 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:30:37.418 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:30:37.419 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:30:37.606 +02:00 [DBG] Starting grant removal
2019-07-09 11:30:42.667 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:30:42.675 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:30:42.679 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:30:42.682 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:30:42.684 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:30:42.687 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:30:42.694 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:34:33.360 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:34:33.440 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:34:33.441 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:34:33.442 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:34:33.442 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:34:33.443 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:34:33.443 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:34:33.612 +02:00 [DBG] Starting grant removal
2019-07-09 11:34:35.972 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:34:35.986 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:34:36.026 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:34:36.042 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:34:36.045 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:34:36.057 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:34:36.060 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:36:01.641 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:36:01.699 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:36:01.701 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:36:01.702 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:36:01.703 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:36:01.704 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:36:01.704 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:36:01.880 +02:00 [DBG] Starting grant removal
2019-07-09 11:36:03.705 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:36:03.711 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:36:03.723 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:36:03.726 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:36:03.730 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:36:03.737 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:36:03.739 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:40:26.385 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:40:26.437 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:40:26.438 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:40:26.439 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:40:26.440 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:40:26.441 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:40:26.441 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:40:26.633 +02:00 [DBG] Starting grant removal
2019-07-09 11:40:28.806 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:40:28.815 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:40:28.817 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:40:28.820 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:40:28.821 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:40:28.825 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:40:28.828 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:46:33.310 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:46:33.369 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:46:33.370 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:46:33.371 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:46:33.372 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:46:33.373 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:46:33.374 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:46:33.537 +02:00 [DBG] Starting grant removal
2019-07-09 11:46:35.453 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:46:35.470 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:46:35.474 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:46:35.475 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:46:35.486 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:46:35.492 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:46:35.494 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:48:02.429 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:48:02.503 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:48:02.504 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:48:02.505 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:48:02.506 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:48:02.506 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:48:02.507 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:48:02.681 +02:00 [DBG] Starting grant removal
2019-07-09 11:48:05.049 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:48:05.055 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:48:05.069 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:48:05.073 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:48:05.082 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:48:05.084 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:48:05.086 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 11:57:08.037 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 11:57:08.102 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 11:57:08.103 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 11:57:08.104 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 11:57:08.105 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 11:57:08.106 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 11:57:08.107 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 11:57:08.319 +02:00 [DBG] Starting grant removal
2019-07-09 11:57:10.919 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 11:57:10.929 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 11:57:10.934 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 11:57:10.935 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 11:57:10.937 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 11:57:10.941 +02:00 [DBG] Error Url: /home/error
2019-07-09 11:57:10.948 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 12:49:55.381 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 12:49:55.466 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 12:49:55.467 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 12:49:55.468 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 12:49:55.469 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 12:49:55.470 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 12:49:55.471 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 12:49:55.917 +02:00 [DBG] Starting grant removal
2019-07-09 12:49:58.926 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 12:49:58.931 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 12:49:58.938 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 12:49:58.940 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 12:49:58.941 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 12:49:58.946 +02:00 [DBG] Error Url: /home/error
2019-07-09 12:49:58.948 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 12:52:21.660 +02:00 [ERR] The view 'AddScope' was not found. Searched locations: ["/Views/Resources/AddScope.cshtml","/Views/Shared/AddScope.cshtml","/Pages/Shared/AddScope.cshtml"]
2019-07-09 12:52:23.391 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'AddScope' was not found. The following locations were searched:
/Views/Resources/AddScope.cshtml
/Views/Shared/AddScope.cshtml
/Pages/Shared/AddScope.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 13:11:57.900 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 13:11:58.102 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 13:11:58.104 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 13:11:58.106 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 13:11:58.108 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 13:11:58.109 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 13:11:58.110 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 13:11:58.458 +02:00 [DBG] Starting grant removal
2019-07-09 13:12:06.300 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 13:12:06.340 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 13:12:06.359 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 13:12:06.366 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 13:12:06.383 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 13:12:06.397 +02:00 [DBG] Error Url: /home/error
2019-07-09 13:12:06.419 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 14:11:58.587 +02:00 [INF] Removing 0 grants
2019-07-09 15:11:58.699 +02:00 [INF] Removing 0 grants
2019-07-09 15:42:47.384 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The relative page path 'Create' can only be used while executing a Razor Page. Specify a root relative path with a leading '/' to generate a URL outside of a Razor Page.
   at Microsoft.AspNetCore.Mvc.UrlHelperExtensions.CalculatePageName(ActionContext actionContext, String pageName)
   at Microsoft.AspNetCore.Mvc.UrlHelperExtensions.Page(IUrlHelper urlHelper, String pageName, String pageHandler, Object values, String protocol, String host, String fragment)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.DefaultHtmlGenerator.GeneratePageLink(ViewContext viewContext, String linkText, String pageName, String pageHandler, String protocol, String hostname, String fragment, Object routeValues, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 13
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 16:05:46.280 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 16:05:46.392 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 16:05:46.396 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 16:05:46.397 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 16:05:46.397 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 16:05:46.398 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 16:05:46.399 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 16:05:46.661 +02:00 [DBG] Starting grant removal
2019-07-09 16:05:50.090 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 16:05:50.098 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 16:05:50.104 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 16:05:50.107 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 16:05:50.118 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 16:05:50.121 +02:00 [DBG] Error Url: /home/error
2019-07-09 16:05:50.124 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 16:34:39.109 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 16:34:39.207 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 16:34:39.211 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 16:34:39.214 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 16:34:39.215 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 16:34:39.216 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 16:34:39.218 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 16:34:39.478 +02:00 [DBG] Starting grant removal
2019-07-09 16:34:41.580 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 16:34:41.586 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 16:34:41.588 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 16:34:41.595 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 16:34:41.597 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 16:34:41.599 +02:00 [DBG] Error Url: /home/error
2019-07-09 16:34:41.600 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 16:34:54.262 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The following sections have been defined but have not been rendered by the page at '/Views/Shared/_ResourcesLayout.cshtml': 'scripts'. To ignore an unrendered section call IgnoreSection("sectionName").
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 16:39:38.365 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 13
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 16:40:50.604 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Resources_ManageResource.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml:line 13
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 16:58:32.415 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 16:58:32.471 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 16:58:32.472 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 16:58:32.473 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 16:58:32.474 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 16:58:32.474 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 16:58:32.475 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 16:58:32.644 +02:00 [DBG] Starting grant removal
2019-07-09 16:58:35.547 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 16:58:35.556 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 16:58:35.561 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 16:58:35.563 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 16:58:35.565 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 16:58:35.569 +02:00 [DBG] Error Url: /home/error
2019-07-09 16:58:35.572 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 17:04:05.164 +02:00 [ERR] Failed executing DbCommand (938ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (qwewqew).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:3ec78e0a-17d9-4bef-a0a9-91a9e6429c25
Error Number:2601,State:1,Class:14
2019-07-09 17:04:05.499 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (qwewqew).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (qwewqew).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-09 17:07:07.497 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:07:12.450 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:07:15.124 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:07:16.784 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:09:16.572 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:10:50.531 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 17:10:50.609 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 17:10:50.610 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 17:10:50.611 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 17:10:50.612 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 17:10:50.613 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 17:10:50.614 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 17:10:50.851 +02:00 [DBG] Starting grant removal
2019-07-09 17:10:53.609 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 17:10:53.615 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 17:10:53.618 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 17:10:53.620 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 17:10:53.629 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 17:10:53.634 +02:00 [DBG] Error Url: /home/error
2019-07-09 17:10:53.637 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 17:11:33.163 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:22:37.501 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 17:22:37.624 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 17:22:37.635 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 17:22:37.641 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 17:22:37.655 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 17:22:37.676 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 17:22:37.678 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 17:22:37.989 +02:00 [DBG] Starting grant removal
2019-07-09 17:22:40.776 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 17:22:40.789 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 17:22:40.791 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 17:22:40.793 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 17:22:40.801 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 17:22:40.806 +02:00 [DBG] Error Url: /home/error
2019-07-09 17:22:40.808 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 17:22:57.807 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:25:23.709 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:26:12.094 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 17:26:12.209 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 17:26:12.211 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 17:26:12.212 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 17:26:12.213 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 17:26:12.214 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 17:26:12.215 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 17:26:12.577 +02:00 [DBG] Starting grant removal
2019-07-09 17:26:15.444 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 17:26:15.457 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 17:26:15.459 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 17:26:15.461 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 17:26:15.463 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 17:26:15.465 +02:00 [DBG] Error Url: /home/error
2019-07-09 17:26:15.466 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 17:26:30.038 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:26:59.185 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.ManageApiResourceViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-09 17:30:45.182 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 17:30:45.279 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 17:30:45.280 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 17:30:45.281 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 17:30:45.282 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 17:30:45.283 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 17:30:45.284 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 17:30:45.496 +02:00 [DBG] Starting grant removal
2019-07-09 17:30:47.836 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 17:30:47.844 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 17:30:47.861 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 17:30:47.863 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 17:30:47.866 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 17:30:47.868 +02:00 [DBG] Error Url: /home/error
2019-07-09 17:30:47.870 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 17:42:10.315 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 17:42:10.458 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 17:42:10.460 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 17:42:10.461 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 17:42:10.462 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 17:42:10.463 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 17:42:10.465 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 17:42:10.880 +02:00 [DBG] Starting grant removal
2019-07-09 17:42:14.651 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 17:42:14.656 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 17:42:14.658 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 17:42:14.659 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 17:42:14.662 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 17:42:14.666 +02:00 [DBG] Error Url: /home/error
2019-07-09 17:42:14.667 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 18:23:02.823 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 18:23:02.908 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 18:23:02.911 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 18:23:02.912 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 18:23:02.913 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 18:23:02.914 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 18:23:02.915 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 18:23:03.109 +02:00 [DBG] Starting grant removal
2019-07-09 18:23:05.497 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 18:23:05.508 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 18:23:05.511 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 18:23:05.513 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 18:23:05.515 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 18:23:05.516 +02:00 [DBG] Error Url: /home/error
2019-07-09 18:23:05.519 +02:00 [DBG] Error Id Parameter: errorId
2019-07-09 18:32:47.951 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-09 18:32:48.046 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-09 18:32:48.047 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-09 18:32:48.048 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-09 18:32:48.049 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-09 18:32:48.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-09 18:32:48.051 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-09 18:32:48.353 +02:00 [DBG] Starting grant removal
2019-07-09 18:32:50.280 +02:00 [DBG] Login Url: /Account/Login
2019-07-09 18:32:50.291 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-09 18:32:50.296 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-09 18:32:50.316 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-09 18:32:50.331 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-09 18:32:50.333 +02:00 [DBG] Error Url: /home/error
2019-07-09 18:32:50.339 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 07:44:49.221 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-10 07:44:49.641 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-10 07:44:49.642 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-10 07:44:49.643 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-10 07:44:49.644 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-10 07:44:49.644 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-10 07:44:49.645 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-10 07:45:07.636 +02:00 [DBG] Starting grant removal
2019-07-10 07:45:19.421 +02:00 [DBG] Login Url: /Account/Login
2019-07-10 07:45:19.428 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-10 07:45:19.430 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-10 07:45:19.431 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-10 07:45:19.432 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-10 07:45:19.433 +02:00 [DBG] Error Url: /home/error
2019-07-10 07:45:19.435 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 07:45:25.648 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-10 07:45:34.583 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-10 07:45:40.140 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-10 07:45:41.343 +02:00 [DBG] Augmenting SignInContext
2019-07-10 07:45:41.345 +02:00 [DBG] Adding amr claim with value: external
2019-07-10 07:45:41.354 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-10 07:45:41.366 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-10 07:47:32.030 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-10 07:47:32.157 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-10 07:47:32.159 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-10 07:47:32.161 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-10 07:47:32.162 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-10 07:47:32.163 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-10 07:47:32.163 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-10 07:47:32.584 +02:00 [DBG] Starting grant removal
2019-07-10 07:47:34.670 +02:00 [DBG] Login Url: /Account/Login
2019-07-10 07:47:34.677 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-10 07:47:34.679 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-10 07:47:34.680 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-10 07:47:34.682 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-10 07:47:34.683 +02:00 [DBG] Error Url: /home/error
2019-07-10 07:47:34.684 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 08:13:47.055 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-10 08:13:47.148 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-10 08:13:47.150 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-10 08:13:47.150 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-10 08:13:47.151 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-10 08:13:47.152 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-10 08:13:47.153 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-10 08:13:47.559 +02:00 [DBG] Starting grant removal
2019-07-10 08:13:54.887 +02:00 [DBG] Login Url: /Account/Login
2019-07-10 08:13:54.960 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-10 08:13:54.999 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-10 08:13:55.067 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-10 08:13:55.103 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-10 08:13:55.133 +02:00 [DBG] Error Url: /home/error
2019-07-10 08:13:55.151 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 08:13:59.744 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-10 08:14:03.003 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-10 08:14:07.494 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-10 08:14:08.370 +02:00 [DBG] Augmenting SignInContext
2019-07-10 08:14:08.376 +02:00 [DBG] Adding amr claim with value: external
2019-07-10 08:14:08.392 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-10 08:14:08.417 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-10 08:14:22.938 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddClaim(String resourceName, String scopeName, String claimType) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 191
   at SecureTokenServer.Controllers.ResourcesController.AddClaim(ApiResourceScopeViewModel apiResourceScopeViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 148
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-10 08:15:03.117 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddClaim(String resourceName, String scopeName, String claimType) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 191
   at SecureTokenServer.Controllers.ResourcesController.AddClaim(ApiResourceScopeViewModel apiResourceScopeViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 148
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-10 08:15:03.155 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddClaim(String resourceName, String scopeName, String claimType) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 191
   at SecureTokenServer.Controllers.ResourcesController.AddClaim(ApiResourceScopeViewModel apiResourceScopeViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 148
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-10 08:16:02.450 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-10 08:16:02.511 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-10 08:16:02.513 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-10 08:16:02.513 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-10 08:16:02.514 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-10 08:16:02.514 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-10 08:16:02.515 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-10 08:16:02.667 +02:00 [DBG] Starting grant removal
2019-07-10 08:16:06.621 +02:00 [DBG] Login Url: /Account/Login
2019-07-10 08:16:06.709 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-10 08:16:06.733 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-10 08:16:06.771 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-10 08:16:06.840 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-10 08:16:06.917 +02:00 [DBG] Error Url: /home/error
2019-07-10 08:16:06.975 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 08:16:07.542 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-10 08:16:10.165 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-10 08:16:14.109 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-10 08:16:14.922 +02:00 [DBG] Augmenting SignInContext
2019-07-10 08:16:14.925 +02:00 [DBG] Adding amr claim with value: external
2019-07-10 08:16:14.937 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-10 08:16:14.950 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-10 08:16:42.895 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddClaim(String resourceName, String scopeName, String claimType) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 191
   at SecureTokenServer.Controllers.ResourcesController.AddClaim(ApiResourceScopeViewModel apiResourceScopeViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 148
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-10 08:20:08.067 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ResourceService.AddClaim(String resourceName, String scopeName, String claimType) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 191
   at SecureTokenServer.Controllers.ResourcesController.AddClaim(ApiResourceScopeViewModel apiResourceScopeViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 148
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-10 08:25:23.039 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-10 08:25:23.092 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-10 08:25:23.093 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-10 08:25:23.094 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-10 08:25:23.095 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-10 08:25:23.096 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-10 08:25:23.097 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-10 08:25:23.306 +02:00 [DBG] Starting grant removal
2019-07-10 08:25:33.739 +02:00 [DBG] Login Url: /Account/Login
2019-07-10 08:25:33.890 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-10 08:25:33.965 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-10 08:25:34.064 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-10 08:25:34.098 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-10 08:25:34.177 +02:00 [DBG] Error Url: /home/error
2019-07-10 08:25:34.217 +02:00 [DBG] Error Id Parameter: errorId
2019-07-10 08:25:36.276 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-10 08:25:45.983 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-10 08:25:49.931 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-10 08:25:50.517 +02:00 [DBG] Augmenting SignInContext
2019-07-10 08:25:50.528 +02:00 [DBG] Adding amr claim with value: external
2019-07-10 08:25:50.544 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-10 08:25:50.558 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-10 09:25:23.626 +02:00 [INF] Removing 0 grants
2019-07-10 10:25:23.710 +02:00 [INF] Removing 0 grants
2019-07-10 11:23:24.810 +02:00 [DBG] TaskCanceledException. Exiting.
2019-07-10 11:23:24.849 +02:00 [DBG] Stopping grant removal
2019-07-11 12:38:05.473 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 12:38:05.603 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 12:38:05.605 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 12:38:05.606 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 12:38:05.607 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 12:38:05.607 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 12:38:05.608 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 12:38:06.136 +02:00 [DBG] Starting grant removal
2019-07-11 12:38:12.209 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 12:38:12.213 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 12:38:12.216 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 12:38:12.218 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 12:38:12.219 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 12:38:12.221 +02:00 [DBG] Error Url: /home/error
2019-07-11 12:38:12.226 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 12:38:13.422 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-11 12:38:17.267 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-11 12:38:21.358 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-11 12:38:22.017 +02:00 [DBG] Augmenting SignInContext
2019-07-11 12:38:22.019 +02:00 [DBG] Adding amr claim with value: external
2019-07-11 12:38:22.027 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-11 12:38:22.037 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-11 12:39:46.282 +02:00 [ERR] Failed executing DbCommand (789ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:4e866ee2-fb4a-4a64-96ba-4711e801efa6
Error Number:2601,State:1,Class:14
2019-07-11 12:39:47.325 +02:00 [ERR] Failed executing DbCommand (1,838ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:7a405e60-abb2-40f8-8c09-22d7b03174be
Error Number:2601,State:1,Class:14
2019-07-11 12:39:47.332 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-11 12:39:47.935 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-11 12:39:48.099 +02:00 [ERR] Failed executing DbCommand (2,612ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:56a18ec7-8d95-4725-90ab-4f26d744efb2
Error Number:2601,State:1,Class:14
2019-07-11 12:39:48.770 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Petty Cash).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-11 12:45:29.700 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 12:45:29.827 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 12:45:29.836 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 12:45:29.842 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 12:45:29.844 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 12:45:29.853 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 12:45:29.856 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 12:45:30.114 +02:00 [DBG] Starting grant removal
2019-07-11 12:45:32.899 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 12:45:32.921 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 12:45:32.927 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 12:45:32.929 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 12:45:32.931 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 12:45:32.932 +02:00 [DBG] Error Url: /home/error
2019-07-11 12:45:32.933 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 12:49:11.560 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 12:49:11.759 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 12:49:11.857 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 12:49:11.862 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 12:49:11.862 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 12:49:11.863 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 12:49:11.864 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 12:49:12.198 +02:00 [DBG] Starting grant removal
2019-07-11 12:49:16.527 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 12:49:16.537 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 12:49:16.541 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 12:49:16.549 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 12:49:16.553 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 12:49:16.559 +02:00 [DBG] Error Url: /home/error
2019-07-11 12:49:16.561 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 12:49:23.303 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Select[TSource,TResult](IEnumerable`1 source, Func`2 selector)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 39
   at SecureTokenServer.Controllers.ResourcesController.Manage(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 79
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-11 12:52:27.682 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 12:52:27.738 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 12:52:27.741 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 12:52:27.743 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 12:52:27.744 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 12:52:27.744 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 12:52:27.745 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 12:52:27.960 +02:00 [DBG] Starting grant removal
2019-07-11 12:52:31.239 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 12:52:31.252 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 12:52:31.260 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 12:52:31.262 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 12:52:31.269 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 12:52:31.272 +02:00 [DBG] Error Url: /home/error
2019-07-11 12:52:31.274 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 13:05:59.026 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 13:05:59.088 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 13:05:59.090 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 13:05:59.091 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 13:05:59.091 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 13:05:59.092 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 13:05:59.093 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 13:05:59.331 +02:00 [DBG] Starting grant removal
2019-07-11 13:06:02.680 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 13:06:02.692 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 13:06:02.704 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 13:06:02.709 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 13:06:02.719 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 13:06:02.720 +02:00 [DBG] Error Url: /home/error
2019-07-11 13:06:02.723 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 13:08:35.310 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 13:08:35.410 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 13:08:35.412 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 13:08:35.413 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 13:08:35.414 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 13:08:35.415 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 13:08:35.416 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 13:08:35.681 +02:00 [DBG] Starting grant removal
2019-07-11 13:08:40.628 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 13:08:40.638 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 13:08:40.646 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 13:08:40.653 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 13:08:40.656 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 13:08:40.659 +02:00 [DBG] Error Url: /home/error
2019-07-11 13:08:40.669 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 13:21:52.491 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 13:21:52.689 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 13:21:52.692 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 13:21:52.693 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 13:21:52.695 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 13:21:52.696 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 13:21:52.697 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 13:21:53.095 +02:00 [DBG] Starting grant removal
2019-07-11 13:21:57.236 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 13:21:57.318 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 13:21:57.336 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 13:21:57.349 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 13:21:57.356 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 13:21:57.366 +02:00 [DBG] Error Url: /home/error
2019-07-11 13:21:57.378 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 13:25:20.243 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-11 13:25:20.344 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-11 13:25:20.346 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-11 13:25:20.347 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-11 13:25:20.348 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-11 13:25:20.350 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-11 13:25:20.351 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-11 13:25:20.638 +02:00 [DBG] Starting grant removal
2019-07-11 13:25:23.949 +02:00 [DBG] Login Url: /Account/Login
2019-07-11 13:25:23.955 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-11 13:25:23.961 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-11 13:25:23.963 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-11 13:25:23.965 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-11 13:25:23.967 +02:00 [DBG] Error Url: /home/error
2019-07-11 13:25:23.973 +02:00 [DBG] Error Id Parameter: errorId
2019-07-11 14:03:36.837 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml(49,38): error CS1002: ; expected
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-11 14:03:47.878 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Resources\ManageResource.cshtml(49,38): error CS1002: ; expected
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-07-15 10:07:48.854 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 10:07:49.051 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 10:07:49.053 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 10:07:49.053 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 10:07:49.054 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 10:07:49.055 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 10:07:49.056 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 10:07:50.078 +02:00 [DBG] Starting grant removal
2019-07-15 10:07:54.558 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 10:07:54.562 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 10:07:54.565 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 10:07:54.566 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 10:07:54.567 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 10:07:54.569 +02:00 [DBG] Error Url: /home/error
2019-07-15 10:07:54.570 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 10:07:56.307 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-15 10:08:02.303 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-15 10:08:06.078 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-15 10:08:06.843 +02:00 [DBG] Augmenting SignInContext
2019-07-15 10:08:06.846 +02:00 [DBG] Adding amr claim with value: external
2019-07-15 10:08:06.854 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-15 10:08:06.861 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-15 10:30:12.522 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 10:30:12.708 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 10:30:12.724 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 10:30:12.748 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 10:30:12.774 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 10:30:12.806 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 10:30:12.807 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 10:30:13.371 +02:00 [DBG] Starting grant removal
2019-07-15 10:30:17.099 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 10:30:17.183 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 10:30:17.231 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 10:30:17.258 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 10:30:17.261 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 10:30:17.264 +02:00 [DBG] Error Url: /home/error
2019-07-15 10:30:17.274 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:29:18.663 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:29:18.770 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:29:18.773 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:29:18.774 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:29:18.774 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:29:18.775 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:29:18.776 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:29:19.306 +02:00 [DBG] Starting grant removal
2019-07-15 11:29:25.170 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:29:25.242 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:29:25.263 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:29:25.270 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:29:25.280 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:29:25.286 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:29:25.289 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:36:09.847 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:36:09.938 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:36:09.941 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:36:09.942 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:36:09.943 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:36:09.944 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:36:09.945 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:36:10.210 +02:00 [DBG] Starting grant removal
2019-07-15 11:36:13.217 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:36:13.222 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:36:13.224 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:36:13.226 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:36:13.228 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:36:13.230 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:36:13.233 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:44:14.994 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:44:15.189 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:44:15.195 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:44:15.196 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:44:15.200 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:44:15.202 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:44:15.209 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:44:15.578 +02:00 [DBG] Starting grant removal
2019-07-15 11:44:18.232 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:44:18.241 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:44:18.243 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:44:18.245 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:44:18.246 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:44:18.248 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:44:18.250 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:44:18.823 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-15 11:44:20.701 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-15 11:44:53.008 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-15 11:44:53.558 +02:00 [DBG] Augmenting SignInContext
2019-07-15 11:44:53.562 +02:00 [DBG] Adding amr claim with value: external
2019-07-15 11:44:53.572 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-15 11:44:53.584 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-15 11:45:51.730 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-15 11:45:53.576 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-15 11:45:56.711 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-15 11:45:56.749 +02:00 [DBG] Augmenting SignInContext
2019-07-15 11:45:56.752 +02:00 [DBG] Adding amr claim with value: external
2019-07-15 11:45:56.753 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-15 11:45:56.759 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-15 11:48:25.164 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:48:25.247 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:48:25.249 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:48:25.250 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:48:25.251 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:48:25.252 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:48:25.254 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:48:25.629 +02:00 [DBG] Starting grant removal
2019-07-15 11:48:28.214 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:48:28.248 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:48:28.261 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:48:28.265 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:48:28.274 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:48:28.286 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:48:28.298 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:51:30.501 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:51:30.599 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:51:30.600 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:51:30.601 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:51:30.602 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:51:30.603 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:51:30.604 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:51:31.693 +02:00 [DBG] Starting grant removal
2019-07-15 11:51:34.294 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:51:34.304 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:51:34.306 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:51:34.312 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:51:34.313 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:51:34.319 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:51:34.321 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 11:58:40.091 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 11:58:40.182 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 11:58:40.184 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 11:58:40.185 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 11:58:40.186 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 11:58:40.187 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 11:58:40.190 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 11:58:40.484 +02:00 [DBG] Starting grant removal
2019-07-15 11:58:43.140 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 11:58:43.151 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 11:58:43.159 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 11:58:43.162 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 11:58:43.165 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 11:58:43.175 +02:00 [DBG] Error Url: /home/error
2019-07-15 11:58:43.181 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 12:37:21.545 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 12:37:21.621 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 12:37:21.622 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 12:37:21.623 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 12:37:21.624 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 12:37:21.624 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 12:37:21.625 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 12:37:21.822 +02:00 [DBG] Starting grant removal
2019-07-15 12:37:24.415 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 12:37:24.425 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 12:37:24.427 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 12:37:24.429 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 12:37:24.430 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 12:37:24.432 +02:00 [DBG] Error Url: /home/error
2019-07-15 12:37:24.435 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 12:42:08.594 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 12:42:08.694 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 12:42:08.696 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 12:42:08.697 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 12:42:08.698 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 12:42:08.700 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 12:42:08.701 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 12:42:08.985 +02:00 [DBG] Starting grant removal
2019-07-15 12:42:11.954 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 12:42:11.961 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 12:42:11.963 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 12:42:11.965 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 12:42:11.970 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 12:42:11.972 +02:00 [DBG] Error Url: /home/error
2019-07-15 12:42:11.972 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 12:44:05.527 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 12:44:05.590 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 12:44:05.592 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 12:44:05.593 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 12:44:05.593 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 12:44:05.594 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 12:44:05.595 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 12:44:05.800 +02:00 [DBG] Starting grant removal
2019-07-15 12:44:08.530 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 12:44:08.544 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 12:44:08.546 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 12:44:08.548 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 12:44:08.551 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 12:44:08.552 +02:00 [DBG] Error Url: /home/error
2019-07-15 12:44:08.554 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 13:44:07.531 +02:00 [INF] Removing 0 grants
2019-07-15 14:01:26.727 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:01:26.804 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:01:26.808 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:01:26.809 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:01:26.810 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:01:26.811 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:01:26.812 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:01:27.269 +02:00 [DBG] Starting grant removal
2019-07-15 14:01:30.209 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 14:01:30.215 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 14:01:30.222 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 14:01:30.224 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 14:01:30.227 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 14:01:30.230 +02:00 [DBG] Error Url: /home/error
2019-07-15 14:01:30.233 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 14:16:02.508 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:16:02.596 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:16:02.598 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:16:02.599 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:16:02.600 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:16:02.602 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:16:02.603 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:16:02.861 +02:00 [DBG] Starting grant removal
2019-07-15 14:16:05.497 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 14:16:05.534 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 14:16:05.548 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 14:16:05.553 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 14:16:05.558 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 14:16:05.560 +02:00 [DBG] Error Url: /home/error
2019-07-15 14:16:05.562 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 14:17:15.059 +02:00 [ERR] Failed executing DbCommand (838ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopeClaims] ([ApiScopeId], [Type])
VALUES (@p0, @p1);
SELECT [Id]
FROM [ApiScopeClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:d50f1339-76ad-480d-b116-ac57aa387da1
Error Number:515,State:2,Class:16
2019-07-15 14:17:15.734 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-15 14:18:10.864 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:18:10.944 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:18:10.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:18:10.949 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:18:10.950 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:18:10.951 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:18:10.952 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:18:11.198 +02:00 [DBG] Starting grant removal
2019-07-15 14:18:13.934 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 14:18:13.938 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 14:18:13.945 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 14:18:13.948 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 14:18:13.953 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 14:18:13.959 +02:00 [DBG] Error Url: /home/error
2019-07-15 14:18:13.965 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 14:18:28.439 +02:00 [ERR] Failed executing DbCommand (368ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopeClaims] ([ApiScopeId], [Type])
VALUES (@p0, @p1);
SELECT [Id]
FROM [ApiScopeClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:42c1ad60-779b-45bf-9090-2da28e0b36be
Error Number:515,State:2,Class:16
2019-07-15 14:18:28.944 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Type', table 'SecurityServer.dbo.ApiScopeClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-07-15 14:31:08.180 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:31:08.260 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:31:08.262 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:31:08.263 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:31:08.263 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:31:08.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:31:08.265 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:31:08.501 +02:00 [DBG] Starting grant removal
2019-07-15 14:31:11.321 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 14:31:11.332 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 14:31:11.350 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 14:31:11.362 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 14:31:11.371 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 14:31:11.382 +02:00 [DBG] Error Url: /home/error
2019-07-15 14:31:11.385 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 14:33:59.311 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:33:59.379 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:33:59.381 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:33:59.382 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:33:59.383 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:33:59.384 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:33:59.385 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:33:59.630 +02:00 [DBG] Starting grant removal
2019-07-15 14:34:36.841 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-15 14:34:36.963 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-15 14:34:36.965 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-15 14:34:36.966 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-15 14:34:36.968 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-15 14:34:36.969 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-15 14:34:36.970 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-15 14:34:37.301 +02:00 [DBG] Starting grant removal
2019-07-15 14:34:40.777 +02:00 [DBG] Login Url: /Account/Login
2019-07-15 14:34:40.790 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-15 14:34:40.794 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-15 14:34:40.796 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-15 14:34:40.800 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-15 14:34:40.802 +02:00 [DBG] Error Url: /home/error
2019-07-15 14:34:40.809 +02:00 [DBG] Error Id Parameter: errorId
2019-07-15 15:34:37.428 +02:00 [INF] Removing 0 grants
2019-07-15 16:18:58.976 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-15 16:18:58.997 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.003 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.011 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.014 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.022 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.026 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.039 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.041 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.049 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.051 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.056 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.061 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-07-15 16:18:59.068 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-07-16 15:02:04.792 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:02:05.040 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:02:05.052 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:02:05.053 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:02:05.055 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:02:05.059 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:02:05.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:02:06.312 +02:00 [DBG] Starting grant removal
2019-07-16 15:02:11.941 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:02:11.955 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:02:11.963 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:02:11.975 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:02:11.977 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:02:11.980 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:02:11.982 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:02:15.168 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:02:44.557 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:02:53.849 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:02:54.722 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:02:54.728 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:02:54.755 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:02:54.775 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:02:54.823 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:03:06.754 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:03:07.956 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:03:07.996 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:03:07.997 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:03:08.002 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:03:08.007 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:03:08.022 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:03:40.527 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:03:40.641 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:03:40.643 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:03:40.644 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:03:40.645 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:03:40.646 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:03:40.647 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:03:40.960 +02:00 [DBG] Starting grant removal
2019-07-16 15:03:44.257 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:03:44.270 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:03:44.283 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:03:44.288 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:03:44.291 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:03:44.304 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:03:44.335 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:03:45.129 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:03:47.978 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:03:51.276 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:03:52.111 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:03:52.116 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:03:52.132 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:03:52.154 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:03:52.199 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:04:27.574 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:04:41.558 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:04:41.597 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:04:41.597 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:04:41.600 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:04:41.604 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:04:41.617 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:07:17.634 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:07:17.753 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:07:17.755 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:07:17.756 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:07:17.757 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:07:17.758 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:07:17.759 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:07:17.987 +02:00 [DBG] Starting grant removal
2019-07-16 15:07:19.915 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:07:19.924 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:07:19.928 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:07:19.930 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:07:19.936 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:07:19.949 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:07:19.961 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:07:20.538 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:07:23.901 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:07:27.519 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:07:27.974 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:07:27.980 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:07:27.996 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:07:28.013 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:07:28.050 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:08:43.471 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:08:44.748 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:08:44.779 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:08:44.780 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:08:44.783 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:08:44.789 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:08:44.799 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:09:25.579 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:09:31.551 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:11:22.788 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:11:22.907 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:11:22.912 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:11:22.914 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:11:22.916 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:11:22.917 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:11:22.919 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:11:23.247 +02:00 [DBG] Starting grant removal
2019-07-16 15:11:26.639 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:11:26.645 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:11:26.653 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:11:26.656 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:11:26.661 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:11:26.663 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:11:26.674 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:11:27.330 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:11:29.762 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:11:33.336 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:11:34.263 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:11:34.268 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:11:34.288 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:11:34.317 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:11:34.374 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:11:50.946 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:11:52.358 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:11:52.390 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:11:52.393 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:11:52.397 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:11:52.402 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:11:52.424 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:15:37.791 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:15:53.140 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:15:53.180 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:15:53.181 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:15:53.190 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:15:53.201 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:15:53.231 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:17:03.891 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:17:05.047 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:17:05.078 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:17:05.079 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:17:05.087 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:17:05.093 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:17:05.110 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:17:09.874 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:17:10.898 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:17:10.930 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:17:10.931 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:17:10.935 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:17:10.939 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:17:10.957 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:17:13.520 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:17:14.552 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:17:14.578 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:17:14.579 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:17:14.582 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:17:14.587 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:17:14.598 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:17:20.290 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:17:21.274 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:17:21.302 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:17:21.303 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:17:21.306 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:17:21.309 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:17:21.321 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:17:23.124 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:17:24.096 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:17:24.174 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:17:24.180 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:17:24.185 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:17:24.190 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:17:24.232 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:52:56.001 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:52:56.083 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:52:56.085 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:52:56.086 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:52:56.086 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:52:56.087 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:52:56.088 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:52:56.319 +02:00 [DBG] Starting grant removal
2019-07-16 15:52:59.032 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:52:59.039 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:52:59.043 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:52:59.052 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:52:59.054 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:52:59.056 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:52:59.058 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:52:59.628 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:53:02.335 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:53:05.057 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:53:05.660 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:53:05.664 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:53:05.686 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:53:05.702 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:53:05.745 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:53:10.994 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:53:12.034 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:53:12.073 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:53:12.074 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:53:12.080 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:53:12.083 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 15:53:12.094 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:54:04.764 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 15:54:04.822 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 15:54:04.824 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 15:54:04.825 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 15:54:04.825 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 15:54:04.826 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 15:54:04.827 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 15:54:05.071 +02:00 [DBG] Starting grant removal
2019-07-16 15:54:20.889 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 15:54:20.926 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 15:54:20.990 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 15:54:21.016 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 15:54:21.026 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 15:54:21.031 +02:00 [DBG] Error Url: /home/error
2019-07-16 15:54:21.041 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 15:54:21.776 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 15:54:37.962 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 15:54:43.412 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 15:54:44.226 +02:00 [DBG] Augmenting SignInContext
2019-07-16 15:54:44.231 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 15:54:44.251 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 15:54:44.275 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 16:06:26.874 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 16:06:26.998 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 16:06:27.003 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 16:06:27.005 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 16:06:27.006 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 16:06:27.007 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 16:06:27.008 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 16:06:27.244 +02:00 [DBG] Starting grant removal
2019-07-16 16:06:31.936 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 16:06:32.240 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 16:06:32.527 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 16:06:32.711 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 16:06:32.752 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 16:06:32.826 +02:00 [DBG] Error Url: /home/error
2019-07-16 16:06:32.905 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 16:06:34.293 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 16:06:38.234 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 16:06:42.337 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 16:06:43.364 +02:00 [DBG] Augmenting SignInContext
2019-07-16 16:06:43.384 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 16:06:43.401 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 16:06:43.415 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 16:23:09.307 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 16:23:09.425 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 16:23:09.427 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 16:23:09.428 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 16:23:09.429 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 16:23:09.430 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 16:23:09.431 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 16:23:09.822 +02:00 [DBG] Starting grant removal
2019-07-16 16:23:17.898 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 16:23:17.902 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 16:23:17.907 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 16:23:17.908 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 16:23:17.912 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 16:23:17.915 +02:00 [DBG] Error Url: /home/error
2019-07-16 16:23:17.918 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 16:23:18.467 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 16:24:37.345 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 16:24:41.127 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 16:24:41.606 +02:00 [DBG] Augmenting SignInContext
2019-07-16 16:24:41.612 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 16:24:41.626 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 16:24:41.640 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-07-16 16:30:41.017 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-07-16 16:30:41.117 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-07-16 16:30:41.119 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-07-16 16:30:41.120 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-07-16 16:30:41.120 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-07-16 16:30:41.226 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-07-16 16:30:41.228 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-07-16 16:30:41.576 +02:00 [DBG] Starting grant removal
2019-07-16 16:30:47.374 +02:00 [DBG] Login Url: /Account/Login
2019-07-16 16:30:47.384 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-07-16 16:30:47.399 +02:00 [DBG] Logout Url: /Account/Logout
2019-07-16 16:30:47.414 +02:00 [DBG] ConsentUrl Url: /consent
2019-07-16 16:30:47.428 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-07-16 16:30:47.447 +02:00 [DBG] Error Url: /home/error
2019-07-16 16:30:47.460 +02:00 [DBG] Error Id Parameter: errorId
2019-07-16 16:30:48.393 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-07-16 16:30:53.572 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-07-16 16:30:57.429 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-07-16 16:30:58.132 +02:00 [DBG] Augmenting SignInContext
2019-07-16 16:30:58.136 +02:00 [DBG] Adding amr claim with value: external
2019-07-16 16:30:58.151 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-07-16 16:30:58.170 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-08 09:56:15.279 +02:00 [ERR] Failed executing DbCommand (458ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [DeviceCode] nvarchar(200) NOT NULL,
    [UserCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'DeviceCodes' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:af00635e-b31c-48da-b7d1-42d9e06a6ce3
Error Number:2714,State:6,Class:16
2019-08-08 09:56:22.302 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'DeviceCodes' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:af00635e-b31c-48da-b7d1-42d9e06a6ce3
Error Number:2714,State:6,Class:16
2019-08-08 09:57:36.093 +02:00 [ERR] Failed executing DbCommand (218ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [DeviceCode] nvarchar(200) NOT NULL,
    [UserCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'DeviceCodes' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:3c9f136c-708a-46ac-bbf6-1d61ea9bc97d
Error Number:2714,State:6,Class:16
2019-08-08 09:57:36.422 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'DeviceCodes' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:3c9f136c-708a-46ac-bbf6-1d61ea9bc97d
Error Number:2714,State:6,Class:16
2019-08-08 10:01:10.802 +02:00 [ERR] Failed executing DbCommand (581ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [SecurityServer];
System.Data.SqlClient.SqlException (0x80131904): Cannot create file 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\SecurityServer.mdf' because it already exists. Change the file path or the file name, and retry the operation.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:08010303-5048-40cd-a37a-68c29590fc91
Error Number:5170,State:4,Class:16
2019-08-08 10:01:11.230 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Cannot create file 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\SecurityServer.mdf' because it already exists. Change the file path or the file name, and retry the operation.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Create()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:08010303-5048-40cd-a37a-68c29590fc91
Error Number:5170,State:4,Class:16
2019-08-08 10:03:24.695 +02:00 [ERR] Failed executing DbCommand (152ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [SecurityServer];
System.Data.SqlClient.SqlException (0x80131904): Cannot create file 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\SecurityServer.mdf' because it already exists. Change the file path or the file name, and retry the operation.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:9877b37d-9efe-432b-bc62-95f4a469a576
Error Number:5170,State:4,Class:16
2019-08-08 10:03:24.962 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Cannot create file 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\SecurityServer.mdf' because it already exists. Change the file path or the file name, and retry the operation.
CREATE DATABASE failed. Some file names listed could not be created. Check related errors.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Create()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 147
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:9877b37d-9efe-432b-bc62-95f4a469a576
Error Number:5170,State:4,Class:16
2019-08-08 10:04:29.957 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 10:04:30.009 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 10:04:30.010 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 10:04:30.011 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 10:04:30.011 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 10:04:30.012 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 10:04:30.012 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 10:04:38.683 +02:00 [DBG] Starting grant removal
2019-08-08 10:04:52.464 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 10:04:52.467 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 10:04:52.469 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 10:04:52.470 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 10:04:52.473 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 10:04:52.475 +02:00 [DBG] Error Url: /home/error
2019-08-08 10:04:52.477 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 10:05:00.347 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-08 10:05:57.359 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:06:06.889 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:06:07.448 +02:00 [ERR] Failed executing DbCommand (427ms) [Parameters=[@__loginProvider_0='?' (Size = 450), @__providerKey_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [userLogin].[LoginProvider], [userLogin].[ProviderKey], [userLogin].[ProviderDisplayName], [userLogin].[UserId]
FROM [AspNetUserLogins] AS [userLogin]
WHERE ([userLogin].[LoginProvider] = @__loginProvider_0) AND ([userLogin].[ProviderKey] = @__providerKey_1)
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUserLogins'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:774253f6-fefd-492f-9c60-64aa64040fd9
Error Number:208,State:1,Class:16
2019-08-08 10:06:08.316 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUserLogins'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:774253f6-fefd-492f-9c60-64aa64040fd9
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUserLogins'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:774253f6-fefd-492f-9c60-64aa64040fd9
Error Number:208,State:1,Class:16
2019-08-08 10:06:08.620 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUserLogins'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:774253f6-fefd-492f-9c60-64aa64040fd9
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUserLogins'.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SingleOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:774253f6-fefd-492f-9c60-64aa64040fd9
Error Number:208,State:1,Class:16
2019-08-08 10:10:36.428 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 10:10:36.524 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 10:10:36.526 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 10:10:36.527 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 10:10:36.528 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 10:10:36.529 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 10:10:36.530 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 10:10:36.700 +02:00 [DBG] Starting grant removal
2019-08-08 10:10:39.071 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 10:10:39.079 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 10:10:39.089 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 10:10:39.093 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 10:10:39.096 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 10:10:39.103 +02:00 [DBG] Error Url: /home/error
2019-08-08 10:10:39.105 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 10:10:39.560 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-08 10:10:54.972 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:10:58.289 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:10:59.383 +02:00 [ERR] Failed executing DbCommand (586ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:fa3de23a-70a0-4511-92ac-2eeba945788a
Error Number:515,State:2,Class:16
2019-08-08 10:11:00.230 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:11:05.198 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:22:24.182 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 10:22:24.270 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 10:22:24.271 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 10:22:24.272 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 10:22:24.273 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 10:22:24.274 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 10:22:24.275 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 10:22:24.628 +02:00 [DBG] Starting grant removal
2019-08-08 10:22:27.267 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 10:22:27.273 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 10:22:27.277 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 10:22:27.282 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 10:22:27.284 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 10:22:27.288 +02:00 [DBG] Error Url: /home/error
2019-08-08 10:22:27.292 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 10:22:27.763 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-08 10:23:11.725 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:23:15.323 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:23:16.281 +02:00 [ERR] Failed executing DbCommand (403ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:19a4cc88-65e2-4731-b6f6-9e6456f3506f
Error Number:515,State:2,Class:16
2019-08-08 10:23:17.206 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:23:24.109 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:28:10.354 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:28:13.352 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:28:47.305 +02:00 [ERR] Failed executing DbCommand (303ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:19a4cc88-65e2-4731-b6f6-9e6456f3506f
Error Number:515,State:2,Class:16
2019-08-08 10:28:47.956 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:28:53.165 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:28:56.373 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:28:57.674 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:30:10.026 +02:00 [ERR] Failed executing DbCommand (323ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:19a4cc88-65e2-4731-b6f6-9e6456f3506f
Error Number:515,State:2,Class:16
2019-08-08 10:30:10.839 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:30:21.285 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:30:25.642 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:30:26.934 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:38:04.906 +02:00 [ERR] Failed executing DbCommand (313ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:19a4cc88-65e2-4731-b6f6-9e6456f3506f
Error Number:515,State:2,Class:16
2019-08-08 10:38:05.772 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:38:10.452 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:38:38.420 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:38:41.623 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:39:14.204 +02:00 [ERR] Failed executing DbCommand (271ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 450), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 450), @p26='?' (Size = 450), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p27='?' (Size = 4000), @p14='?' (Size = 256), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (DbType = DateTimeOffset), @p18='?' (Size = 256), @p19='?' (Size = 256), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (DbType = Boolean), @p23='?' (Size = 4000), @p24='?' (DbType = Boolean), @p25='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DECLARE @inserted0 TABLE ([Id] int, [_Position] [int]);
MERGE [AspNetUserClaims] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3)) AS i ([ClaimType], [ClaimValue], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ClaimType], [ClaimValue], [UserId])
VALUES (i.[ClaimType], i.[ClaimValue], i.[UserId])
OUTPUT INSERTED.[Id], i._Position
INTO @inserted0;

SELECT [t].[Id] FROM [AspNetUserClaims] t
INNER JOIN @inserted0 i ON ([t].[Id] = [i].[Id])
ORDER BY [i].[_Position];

UPDATE [AspNetUsers] SET [AccessFailedCount] = @p12, [ConcurrencyStamp] = @p13, [Email] = @p14, [EmailConfirmed] = @p15, [LockoutEnabled] = @p16, [LockoutEnd] = @p17, [NormalizedEmail] = @p18, [NormalizedUserName] = @p19, [PasswordHash] = @p20, [PhoneNumber] = @p21, [PhoneNumberConfirmed] = @p22, [SecurityStamp] = @p23, [TwoFactorEnabled] = @p24, [UserName] = @p25
WHERE [Id] = @p26 AND [ConcurrencyStamp] = @p27;
SELECT @@ROWCOUNT;
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:19a4cc88-65e2-4731-b6f6-9e6456f3506f
Error Number:515,State:2,Class:16
2019-08-08 10:39:15.123 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-08 10:39:19.989 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetUserClaims'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.UpdateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.UpdateUserAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddClaimsAsync(TUser user, IEnumerable`1 claims)
   at Host.Quickstart.Account.ExternalController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 273
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 10:44:34.475 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 10:44:34.543 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 10:44:34.545 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 10:44:34.546 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 10:44:34.547 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 10:44:34.548 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 10:44:34.549 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 10:44:34.755 +02:00 [DBG] Starting grant removal
2019-08-08 10:44:37.445 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 10:44:37.459 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 10:44:37.465 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 10:44:37.472 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 10:44:37.474 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 10:44:37.476 +02:00 [DBG] Error Url: /home/error
2019-08-08 10:44:37.491 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 10:44:38.153 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-08 10:44:40.945 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-08 10:44:44.671 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-08 10:44:54.194 +02:00 [DBG] Augmenting SignInContext
2019-08-08 10:44:54.195 +02:00 [DBG] Adding amr claim with value: external
2019-08-08 10:44:54.204 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-08 10:44:54.213 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-08 11:44:34.857 +02:00 [INF] Removing 0 grants
2019-08-08 12:13:01.609 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 12:13:01.672 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 12:13:01.674 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 12:13:01.675 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 12:13:01.676 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 12:13:01.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 12:13:01.678 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 12:13:01.856 +02:00 [DBG] Starting grant removal
2019-08-08 12:13:04.342 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 12:13:04.365 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 12:13:04.374 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 12:13:04.379 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 12:13:04.382 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 12:13:04.390 +02:00 [DBG] Error Url: /home/error
2019-08-08 12:13:04.397 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 12:15:14.099 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.ConfirmScopeRemoval(String apiResourceName, String scopeName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 171
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 12:15:28.962 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.ConfirmScopeRemoval(String apiResourceName, String scopeName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 171
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 12:15:42.232 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.ConfirmScopeRemoval(String apiResourceName, String scopeName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 171
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 12:16:29.309 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ResourceService.GetByName(String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 33
   at SecureTokenServer.Controllers.ResourcesController.ConfirmScopeRemoval(String apiResourceName, String scopeName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 171
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 12:20:49.695 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 12:20:49.754 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 12:20:49.756 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 12:20:49.758 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 12:20:49.759 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 12:20:49.761 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 12:20:49.762 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 12:20:50.299 +02:00 [DBG] Starting grant removal
2019-08-08 12:20:52.965 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 12:20:52.972 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 12:20:52.978 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 12:20:52.979 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 12:20:52.981 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 12:20:52.990 +02:00 [DBG] Error Url: /home/error
2019-08-08 12:20:52.994 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 12:28:48.624 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 12:28:48.728 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 12:28:48.732 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 12:28:48.734 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 12:28:48.735 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 12:28:48.737 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 12:28:48.741 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 12:28:49.062 +02:00 [DBG] Starting grant removal
2019-08-08 12:28:51.421 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 12:28:51.442 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 12:28:51.448 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 12:28:51.451 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 12:28:51.454 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 12:28:51.457 +02:00 [DBG] Error Url: /home/error
2019-08-08 12:28:51.466 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 12:53:39.629 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 12:53:39.716 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 12:53:39.719 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 12:53:39.720 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 12:53:39.721 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 12:53:39.722 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 12:53:39.724 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 12:53:39.994 +02:00 [DBG] Starting grant removal
2019-08-08 12:53:42.392 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 12:53:42.399 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 12:53:42.409 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 12:53:42.417 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 12:53:42.432 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 12:53:42.451 +02:00 [DBG] Error Url: /home/error
2019-08-08 12:53:42.458 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 12:57:44.565 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 12:57:44.652 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 12:57:44.654 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 12:57:44.655 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 12:57:44.656 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 12:57:44.657 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 12:57:44.657 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 12:57:44.931 +02:00 [DBG] Starting grant removal
2019-08-08 12:57:46.883 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 12:57:46.895 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 12:57:46.897 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 12:57:46.899 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 12:57:46.901 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 12:57:46.903 +02:00 [DBG] Error Url: /home/error
2019-08-08 12:57:46.904 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 13:02:30.560 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 13:02:30.648 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 13:02:30.651 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 13:02:30.653 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 13:02:30.654 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 13:02:30.663 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 13:02:30.664 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 13:02:30.977 +02:00 [DBG] Starting grant removal
2019-08-08 13:02:33.778 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 13:02:33.782 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 13:02:33.788 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 13:02:33.790 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 13:02:33.791 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 13:02:33.794 +02:00 [DBG] Error Url: /home/error
2019-08-08 13:02:33.799 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 13:07:34.611 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 13:07:34.673 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 13:07:34.675 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 13:07:34.677 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 13:07:34.678 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 13:07:34.679 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 13:07:34.679 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 13:07:34.889 +02:00 [DBG] Starting grant removal
2019-08-08 13:07:37.705 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 13:07:37.711 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 13:07:37.717 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 13:07:37.719 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 13:07:37.721 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 13:07:37.727 +02:00 [DBG] Error Url: /home/error
2019-08-08 13:07:37.731 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 13:18:31.303 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 13:18:31.427 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 13:18:31.434 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 13:18:31.436 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 13:18:31.437 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 13:18:31.440 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 13:18:31.442 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 13:18:32.036 +02:00 [DBG] Starting grant removal
2019-08-08 13:18:35.422 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 13:18:35.434 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 13:18:35.441 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 13:18:35.447 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 13:18:35.450 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 13:18:35.452 +02:00 [DBG] Error Url: /home/error
2019-08-08 13:18:35.455 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 14:14:49.113 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 14:14:49.175 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 14:14:49.176 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 14:14:49.177 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 14:14:49.177 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 14:14:49.178 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 14:14:49.179 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 14:14:49.398 +02:00 [DBG] Starting grant removal
2019-08-08 14:14:51.515 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 14:14:51.524 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 14:14:51.534 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 14:14:51.538 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 14:14:51.544 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 14:14:51.547 +02:00 [DBG] Error Url: /home/error
2019-08-08 14:14:51.553 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 14:16:11.347 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-08 14:17:00.051 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-08 14:17:02.681 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-08 14:17:03.520 +02:00 [ERR] Failed executing DbCommand (798ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (Size = 2000), @p12='?' (Size = 200), @p13='?' (Size = 200), @p14='?' (Size = 200), @p15='?' (Size = 2000), @p16='?' (DbType = Int32), @p17='?' (DbType = DateTime2), @p18='?' (Size = 1000), @p19='?' (DbType = Int32), @p20='?' (DbType = Boolean), @p21='?' (DbType = Boolean), @p22='?' (DbType = Boolean), @p23='?' (Size = 2000), @p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (DbType = DateTime2), @p27='?' (Size = 2000), @p28='?' (DbType = Boolean), @p29='?' (Size = 200), @p30='?' (Size = 200), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Boolean), @p34='?' (DbType = Boolean), @p35='?' (DbType = Boolean), @p36='?' (DbType = Int32), @p37='?' (DbType = Boolean), @p38='?' (DbType = DateTime2), @p39='?' (Size = 100), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Clients] ([AbsoluteRefreshTokenLifetime], [AccessTokenLifetime], [AccessTokenType], [AllowAccessTokensViaBrowser], [AllowOfflineAccess], [AllowPlainTextPkce], [AllowRememberConsent], [AlwaysIncludeUserClaimsInIdToken], [AlwaysSendClientClaims], [AuthorizationCodeLifetime], [BackChannelLogoutSessionRequired], [BackChannelLogoutUri], [ClientClaimsPrefix], [ClientId], [ClientName], [ClientUri], [ConsentLifetime], [Created], [Description], [DeviceCodeLifetime], [EnableLocalLogin], [Enabled], [FrontChannelLogoutSessionRequired], [FrontChannelLogoutUri], [IdentityTokenLifetime], [IncludeJwtId], [LastAccessed], [LogoUri], [NonEditable], [PairWiseSubjectSalt], [ProtocolType], [RefreshTokenExpiration], [RefreshTokenUsage], [RequireClientSecret], [RequireConsent], [RequirePkce], [SlidingRefreshTokenLifetime], [UpdateAccessTokenClaimsOnRefresh], [Updated], [UserCodeType], [UserSsoLifetime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
SELECT [Id]
FROM [Clients]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Clients' with unique index 'IX_Clients_ClientId'. The duplicate key value is (testClient2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:899492fd-e842-4bc7-8507-f7c44962a1bf
Error Number:2601,State:1,Class:14
2019-08-08 14:17:03.921 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.Clients' with unique index 'IX_Clients_ClientId'. The duplicate key value is (testClient2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.Clients' with unique index 'IX_Clients_ClientId'. The duplicate key value is (testClient2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-08-08 14:18:04.448 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 14:18:04.573 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 14:18:04.574 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 14:18:04.575 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 14:18:04.575 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 14:18:04.576 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 14:18:04.577 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 14:18:04.914 +02:00 [DBG] Starting grant removal
2019-08-08 14:18:06.847 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 14:18:06.853 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 14:18:06.856 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 14:18:06.860 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 14:18:06.865 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 14:18:06.872 +02:00 [DBG] Error Url: /home/error
2019-08-08 14:18:06.874 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 14:21:03.856 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-08 14:48:37.365 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 14:48:37.420 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 14:48:37.421 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 14:48:37.421 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 14:48:37.422 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 14:48:37.423 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 14:48:37.424 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 14:48:37.614 +02:00 [DBG] Starting grant removal
2019-08-08 14:48:39.638 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 14:48:39.660 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 14:48:39.670 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 14:48:39.694 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 14:48:39.711 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 14:48:39.749 +02:00 [DBG] Error Url: /home/error
2019-08-08 14:48:39.756 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 14:48:53.402 +02:00 [ERR] The partial view '_ManageResourcePartial' was not found. Searched locations: ["/Views/Resources/_ManageResourcePartial.cshtml","/Views/Shared/_ManageResourcePartial.cshtml","/Pages/Shared/_ManageResourcePartial.cshtml"]
2019-08-08 14:48:54.457 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view '_ManageResourcePartial' was not found. The following locations were searched:
/Views/Resources/_ManageResourcePartial.cshtml
/Views/Shared/_ManageResourcePartial.cshtml
/Pages/Shared/_ManageResourcePartial.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-08 14:51:27.559 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-08 14:51:27.686 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-08 14:51:27.687 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-08 14:51:27.689 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-08 14:51:27.690 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-08 14:51:27.691 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-08 14:51:27.692 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-08 14:51:28.101 +02:00 [DBG] Starting grant removal
2019-08-08 14:51:30.587 +02:00 [DBG] Login Url: /Account/Login
2019-08-08 14:51:30.606 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-08 14:51:30.608 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-08 14:51:30.610 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-08 14:51:30.612 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-08 14:51:30.614 +02:00 [DBG] Error Url: /home/error
2019-08-08 14:51:30.616 +02:00 [DBG] Error Id Parameter: errorId
2019-08-08 14:57:12.092 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-08 14:57:12.195 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-08-08 14:57:12.223 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-08 14:57:12.241 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-08-09 09:29:38.474 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 09:29:38.676 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 09:29:38.679 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 09:29:38.680 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 09:29:38.681 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 09:29:38.683 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 09:29:38.683 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 09:29:40.456 +02:00 [DBG] Starting grant removal
2019-08-09 09:29:44.583 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 09:29:44.603 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 09:29:44.612 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 09:29:44.616 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 09:29:44.620 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 09:29:44.621 +02:00 [DBG] Error Url: /home/error
2019-08-09 09:29:44.627 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 09:29:49.764 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-09 10:02:57.936 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-09 10:03:04.077 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-09 10:03:17.977 +02:00 [DBG] Augmenting SignInContext
2019-08-09 10:03:18.001 +02:00 [DBG] Adding amr claim with value: external
2019-08-09 10:03:18.029 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-09 10:03:18.069 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-09 10:29:40.671 +02:00 [INF] Removing 0 grants
2019-08-09 10:53:29.684 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 10:53:29.795 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 10:53:29.798 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 10:53:29.799 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 10:53:29.800 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 10:53:29.801 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 10:53:29.802 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 10:53:30.467 +02:00 [DBG] Starting grant removal
2019-08-09 10:53:33.097 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 10:53:33.106 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 10:53:33.111 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 10:53:33.114 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 10:53:33.118 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 10:53:33.126 +02:00 [DBG] Error Url: /home/error
2019-08-09 10:53:33.130 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 10:57:56.486 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ResourcesController.cs:line 50
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 10:59:47.755 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 11:00:30.337 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 11:03:37.714 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 11:03:37.812 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 11:03:37.814 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 11:03:37.814 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 11:03:37.815 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 11:03:37.815 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 11:03:37.816 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 11:03:38.062 +02:00 [DBG] Starting grant removal
2019-08-09 11:03:40.635 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 11:03:40.643 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 11:03:40.649 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 11:03:40.652 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 11:03:40.658 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 11:03:40.667 +02:00 [DBG] Error Url: /home/error
2019-08-09 11:03:40.671 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 11:06:22.977 +02:00 [ERR] Failed executing DbCommand (777ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 200), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiResources] ([Created], [Description], [DisplayName], [Enabled], [LastAccessed], [Name], [NonEditable], [Updated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [ApiResources]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (test).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:9ba7ab8b-ee17-4c37-a3dc-2976353381a8
Error Number:2601,State:1,Class:14
2019-08-09 11:06:23.960 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (test).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiResources' with unique index 'IX_ApiResources_Name'. The duplicate key value is (test).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-08-09 11:48:48.556 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 11:48:48.664 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 11:48:48.667 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 11:48:48.669 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 11:48:48.673 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 11:48:48.674 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 11:48:48.676 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 11:48:49.379 +02:00 [DBG] Starting grant removal
2019-08-09 11:48:52.740 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 11:48:52.746 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 11:48:52.752 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 11:48:52.754 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 11:48:52.756 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 11:48:52.762 +02:00 [DBG] Error Url: /home/error
2019-08-09 11:48:52.764 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 11:57:49.440 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Any[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context)
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 11:59:29.668 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 11:59:29.810 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 11:59:29.813 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 11:59:29.814 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 11:59:29.814 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 11:59:29.815 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 11:59:29.816 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 11:59:30.040 +02:00 [DBG] Starting grant removal
2019-08-09 11:59:32.539 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 11:59:32.547 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 11:59:32.550 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 11:59:32.552 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 11:59:32.555 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 11:59:32.560 +02:00 [DBG] Error Url: /home/error
2019-08-09 11:59:32.567 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 11:59:42.189 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. To show additional information call EnableSensitiveDataLogging() when overriding DbContext.OnConfiguring. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.TryExtractParameter(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at System.Linq.Expressions.BinaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitLambda[T](Expression`1 node)
   at System.Linq.Expressions.Expression`1.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitUnary(UnaryExpression unaryExpression)
   at System.Linq.Expressions.UnaryExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.ExpressionVisitors.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryModelGenerator.ExtractParameters(IDiagnosticsLogger`1 logger, Expression query, IParameterValues parameterValues, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Any[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 25
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:02:22.053 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:02:22.204 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:02:22.208 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:02:22.210 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:02:22.211 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:02:22.214 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:02:22.225 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:02:22.571 +02:00 [DBG] Starting grant removal
2019-08-09 12:02:24.519 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:02:24.533 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:02:24.542 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:02:24.559 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:02:24.580 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:02:24.586 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:02:24.590 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:07:47.881 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:07:47.995 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:07:47.998 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:07:48.000 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:07:48.000 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:07:48.001 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:07:48.002 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:07:48.370 +02:00 [DBG] Starting grant removal
2019-08-09 12:07:50.303 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:07:50.311 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:07:50.316 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:07:50.318 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:07:50.324 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:07:50.331 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:07:50.334 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:11:12.426 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:11:12.539 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:11:12.541 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:11:12.542 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:11:12.543 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:11:12.544 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:11:12.545 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:11:12.711 +02:00 [DBG] Starting grant removal
2019-08-09 12:11:14.141 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:11:14.191 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:11:14.217 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:11:14.218 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:11:14.221 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:11:14.224 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:11:14.230 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:20:47.735 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:20:47.840 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:20:47.841 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:20:47.842 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:20:47.845 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:20:47.846 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:20:47.847 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:20:48.144 +02:00 [DBG] Starting grant removal
2019-08-09 12:20:49.825 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:20:49.833 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:20:49.837 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:20:49.843 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:20:49.851 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:20:49.892 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:20:49.913 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:21:01.489 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 20
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:21:40.742 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 20
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:22:40.008 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 20
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:40:29.938 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context)
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:42:37.759 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context)
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:44:27.307 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:45:03.036 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Controllers.ResourcesController.Register(RegisterApiResourceViewModel registerApiResourceViewModel)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:49:47.770 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:49:47.874 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:49:47.876 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:49:47.877 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:49:47.878 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:49:47.879 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:49:47.880 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:49:48.090 +02:00 [DBG] Starting grant removal
2019-08-09 12:49:50.395 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:49:50.411 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:49:50.414 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:49:50.423 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:49:50.424 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:49:50.426 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:49:50.437 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:52:58.863 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 23
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 12:56:28.022 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 12:56:28.141 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 12:56:28.156 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 12:56:28.158 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 12:56:28.160 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 12:56:28.162 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 12:56:28.163 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 12:56:28.398 +02:00 [DBG] Starting grant removal
2019-08-09 12:56:30.569 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 12:56:30.579 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 12:56:30.588 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 12:56:30.595 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 12:56:30.604 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 12:56:30.605 +02:00 [DBG] Error Url: /home/error
2019-08-09 12:56:30.609 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 12:58:00.628 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: name
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName, IEnumerable`1 claimTypes) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 64
   at IdentityServer4.Models.ApiResource..ctor(String name, String displayName) in C:\local\identity\server4\IdentityServer4\src\Storage\src\Models\ApiResource.cs:line 41
   at lambda_method(Closure , RegisterApiResourceViewModel , ApiResource , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecureTokenServer.Providers.ApiResourceValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceValidationActionFilter.cs:line 22
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 14:23:55.728 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 14:23:55.808 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 14:23:55.812 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 14:23:55.813 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 14:23:55.814 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 14:23:55.823 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 14:23:55.824 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 14:23:56.061 +02:00 [DBG] Starting grant removal
2019-08-09 14:23:58.291 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 14:23:58.307 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 14:23:58.317 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 14:23:58.326 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 14:23:58.341 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 14:23:58.347 +02:00 [DBG] Error Url: /home/error
2019-08-09 14:23:58.359 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 14:51:24.049 +02:00 [ERR] Failed executing DbCommand (521ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Approvals).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:8b1389ad-e01b-4b58-b4c6-2696c310c73c
Error Number:2601,State:1,Class:14
2019-08-09 14:51:24.797 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Approvals).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (Approvals).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-08-09 14:51:56.367 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagation(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-08-09 15:04:49.792 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 15:04:49.916 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 15:04:49.923 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 15:04:49.924 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 15:04:49.925 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 15:04:49.926 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 15:04:49.928 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 15:04:50.284 +02:00 [DBG] Starting grant removal
2019-08-09 15:04:52.918 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 15:04:52.923 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 15:04:52.928 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 15:04:52.930 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 15:04:52.932 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 15:04:52.937 +02:00 [DBG] Error Url: /home/error
2019-08-09 15:04:52.940 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 15:07:06.283 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 15:07:06.445 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 15:07:06.447 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 15:07:06.449 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 15:07:06.450 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 15:07:06.466 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 15:07:06.476 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 15:07:06.850 +02:00 [DBG] Starting grant removal
2019-08-09 15:07:08.875 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 15:07:08.893 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 15:07:08.895 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 15:07:08.897 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 15:07:08.908 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 15:07:08.912 +02:00 [DBG] Error Url: /home/error
2019-08-09 15:07:08.915 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 15:28:39.152 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 15:28:39.304 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 15:28:39.310 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 15:28:39.313 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 15:28:39.318 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 15:28:39.322 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 15:28:39.364 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 15:28:39.894 +02:00 [DBG] Starting grant removal
2019-08-09 15:28:43.101 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 15:28:43.141 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 15:28:43.174 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 15:28:43.199 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 15:28:43.250 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 15:28:43.264 +02:00 [DBG] Error Url: /home/error
2019-08-09 15:28:43.268 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 15:30:36.459 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:30:36.459 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:30:40.896 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:30:41.342 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:30:42.894 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:30:42.894 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-09 15:33:15.046 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-09 15:33:15.169 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-09 15:33:15.175 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-09 15:33:15.176 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-09 15:33:15.178 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-09 15:33:15.180 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-09 15:33:15.181 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-09 15:33:15.681 +02:00 [DBG] Starting grant removal
2019-08-09 15:33:20.159 +02:00 [DBG] Login Url: /Account/Login
2019-08-09 15:33:20.191 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-09 15:33:20.201 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-09 15:33:20.237 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-09 15:33:20.286 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-09 15:33:20.335 +02:00 [DBG] Error Url: /home/error
2019-08-09 15:33:20.344 +02:00 [DBG] Error Id Parameter: errorId
2019-08-09 15:33:45.279 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecureTokenServer.Services.ResourceService.ValidateScopeBusinessLogic(Scope resourceScope, Boolean newScope, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ResourceService.cs:line 272
   at SecureTokenServer.Providers.ApiResourceScopeValidationActionFilter.OnActionExecuting(ActionExecutingContext context) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ApiResourceScopeValidationActionFilter.cs:line 30
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 10:08:27.286 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 10:08:27.414 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 10:08:27.415 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 10:08:27.416 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 10:08:27.417 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 10:08:27.417 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 10:08:27.418 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 10:08:32.243 +02:00 [DBG] Starting grant removal
2019-08-20 10:08:42.892 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 10:08:42.908 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 10:08:42.911 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 10:08:42.915 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 10:08:42.917 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 10:08:42.918 +02:00 [DBG] Error Url: /home/error
2019-08-20 10:08:42.920 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 10:08:47.474 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:09:01.506 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:09:09.976 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:09:38.645 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:09:38.660 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:09:38.690 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:09:38.748 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:09:38.838 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:10:22.926 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:10:24.033 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:10:35.288 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:10:35.292 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:10:35.297 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:10:35.305 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:10:35.324 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:10:57.412 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:10:58.453 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:10:58.477 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:10:58.478 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:10:58.480 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:10:58.482 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:10:58.495 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:11:22.833 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:11:23.896 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:11:23.922 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:11:23.923 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:11:23.925 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:11:23.928 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:11:23.939 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:13:00.962 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:13:01.991 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:13:02.015 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:13:02.015 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:13:02.017 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:13:02.020 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:13:02.028 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:13:38.787 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:13:39.850 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:13:39.890 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:13:39.891 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:13:39.904 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:13:39.906 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:13:39.929 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:15:29.567 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 10:15:29.626 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 10:15:29.628 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 10:15:29.628 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 10:15:29.629 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 10:15:29.629 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 10:15:29.630 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 10:15:29.788 +02:00 [DBG] Starting grant removal
2019-08-20 10:15:31.989 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 10:15:31.997 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 10:15:32.001 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 10:15:32.001 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 10:15:32.002 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 10:15:32.003 +02:00 [DBG] Error Url: /home/error
2019-08-20 10:15:32.005 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 10:15:32.541 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:15:40.716 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:15:43.242 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:15:43.791 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:15:43.793 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:15:43.805 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:15:43.820 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:15:43.858 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:37:39.255 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: RenderBody has not been called for the page at '/Views/Shared/_Layout.cshtml'. To ignore call IgnoreBody().
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 10:48:34.386 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 10:48:34.514 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 10:48:34.522 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 10:48:34.535 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 10:48:34.542 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 10:48:34.549 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 10:48:34.568 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 10:48:35.060 +02:00 [DBG] Starting grant removal
2019-08-20 10:48:37.815 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 10:48:37.819 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 10:48:37.820 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 10:48:37.821 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 10:48:37.822 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 10:48:37.824 +02:00 [DBG] Error Url: /home/error
2019-08-20 10:48:37.826 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 10:48:38.529 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:48:41.494 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:48:44.941 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:48:45.483 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:48:45.486 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:48:45.502 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:48:45.522 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:48:45.570 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:48:55.827 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:48:56.917 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:48:56.950 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:48:56.952 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:48:56.960 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:48:56.963 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:48:56.981 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:50:25.947 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:50:29.487 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:50:29.537 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:50:29.538 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:50:29.548 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:50:29.551 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:50:29.564 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 10:51:31.751 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 10:51:32.793 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 10:53:20.446 +02:00 [DBG] Augmenting SignInContext
2019-08-20 10:53:20.448 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 10:53:20.462 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 10:53:28.928 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 10:53:44.812 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 11:01:44.717 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 11:01:44.788 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 11:01:44.790 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 11:01:44.790 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 11:01:44.790 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 11:01:44.790 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 11:01:44.790 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 11:01:45.021 +02:00 [DBG] Starting grant removal
2019-08-20 11:01:45.628 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 11:01:45.636 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 11:01:45.637 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 11:01:45.637 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 11:01:45.637 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 11:01:45.637 +02:00 [DBG] Error Url: /home/error
2019-08-20 11:01:45.637 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 11:01:46.002 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 11:03:18.470 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 11:03:22.952 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 11:03:28.693 +02:00 [DBG] Augmenting SignInContext
2019-08-20 11:03:28.695 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 11:03:28.706 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 11:03:28.722 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 11:03:28.762 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 14:45:15.328 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 14:45:15.428 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 14:45:15.430 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 14:45:15.431 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 14:45:15.432 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 14:45:15.433 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 14:45:15.434 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 14:45:15.783 +02:00 [DBG] Starting grant removal
2019-08-20 14:45:18.796 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 14:45:18.804 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 14:45:18.809 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 14:45:18.811 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 14:45:18.814 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 14:45:18.816 +02:00 [DBG] Error Url: /home/error
2019-08-20 14:45:18.824 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 14:45:19.897 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 15:15:24.412 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 15:15:40.521 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 15:20:53.210 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.SLBhW7JXDOfpdr0ZkfyzJM2cwM42-zWUT_qzBEqZRfs' cookie not found.
2019-08-20 15:20:53.211 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.SLBhW7JXDOfpdr0ZkfyzJM2cwM42-zWUT_qzBEqZRfs' cookie not found.
2019-08-20 15:20:53.215 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-20 15:20:53.216 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-20 15:20:54.237 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 15:20:55.087 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSectionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSectionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-20 15:20:54.275 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 15:20:57.434 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSectionAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByLoginAsync(String loginProvider, String providerKey, CancellationToken cancellationToken)
   at Host.Quickstart.Account.ExternalController.FindUserFromExternalProviderAsync(AuthenticateResult result) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 204
   at Host.Quickstart.Account.ExternalController.Callback() in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ExternalController.cs:line 97
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 15:21:14.275 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.SLBhW7JXDOfpdr0ZkfyzJM2cwM42-zWUT_qzBEqZRfs' cookie not found.
2019-08-20 15:21:14.281 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-20 15:21:15.117 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 15:21:15.163 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.SLBhW7JXDOfpdr0ZkfyzJM2cwM42-zWUT_qzBEqZRfs' cookie not found.
2019-08-20 15:21:15.165 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-20 15:21:15.735 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-20 15:22:23.953 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 15:22:36.368 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 15:22:42.069 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 15:22:46.683 +02:00 [DBG] Augmenting SignInContext
2019-08-20 15:22:46.690 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 15:22:46.706 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 15:22:46.723 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 15:29:19.355 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-20 15:29:19.421 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-20 15:29:19.422 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-20 15:29:19.423 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-20 15:29:19.424 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-20 15:29:19.424 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-20 15:29:19.425 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-20 15:29:19.640 +02:00 [DBG] Starting grant removal
2019-08-20 15:29:21.805 +02:00 [DBG] Login Url: /Account/Login
2019-08-20 15:29:21.821 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-20 15:29:21.824 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-20 15:29:21.825 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-20 15:29:21.826 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-20 15:29:21.828 +02:00 [DBG] Error Url: /home/error
2019-08-20 15:29:21.829 +02:00 [DBG] Error Id Parameter: errorId
2019-08-20 15:29:22.340 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-20 15:29:30.300 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-20 15:29:56.744 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-20 15:30:00.584 +02:00 [DBG] Augmenting SignInContext
2019-08-20 15:30:00.587 +02:00 [DBG] Adding amr claim with value: external
2019-08-20 15:30:00.602 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-20 15:30:00.616 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-20 16:29:19.840 +02:00 [INF] Removing 0 grants
2019-08-20 16:53:57.337 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.351 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.360 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.376 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.382 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.388 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.401 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.429 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.434 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.447 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.451 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.455 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.460 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-20 16:53:57.465 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-08-20 17:29:19.882 +02:00 [INF] Removing 0 grants
2019-08-20 18:29:19.906 +02:00 [INF] Removing 0 grants
2019-08-20 19:29:19.919 +02:00 [INF] Removing 0 grants
2019-08-20 20:29:19.939 +02:00 [INF] Removing 0 grants
2019-08-20 21:29:19.969 +02:00 [INF] Removing 0 grants
2019-08-20 22:29:19.990 +02:00 [INF] Removing 0 grants
2019-08-20 23:29:20.017 +02:00 [INF] Removing 0 grants
2019-08-21 00:29:20.039 +02:00 [INF] Removing 0 grants
2019-08-21 01:29:20.090 +02:00 [INF] Removing 0 grants
2019-08-21 02:29:20.128 +02:00 [INF] Removing 0 grants
2019-08-21 03:29:20.163 +02:00 [INF] Removing 0 grants
2019-08-21 04:29:20.181 +02:00 [INF] Removing 0 grants
2019-08-21 05:29:20.212 +02:00 [INF] Removing 0 grants
2019-08-21 06:29:20.252 +02:00 [INF] Removing 0 grants
2019-08-21 07:29:20.282 +02:00 [INF] Removing 0 grants
2019-08-21 08:24:55.345 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:24:55.486 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:24:55.489 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:24:55.492 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:24:55.493 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:24:55.494 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:24:55.496 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:24:56.332 +02:00 [DBG] Starting grant removal
2019-08-21 08:25:01.748 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:25:01.756 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:25:01.760 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:25:01.761 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:25:01.762 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:25:01.765 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:25:01.766 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 08:25:13.672 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 08:25:13.798 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-08-21 08:25:13.803 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-21 08:25:13.812 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-08-21 08:25:25.183 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-21 08:25:26.935 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-21 08:25:31.266 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-21 08:25:34.631 +02:00 [DBG] Augmenting SignInContext
2019-08-21 08:25:34.635 +02:00 [DBG] Adding amr claim with value: external
2019-08-21 08:25:34.640 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-21 08:25:34.642 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-21 08:37:32.657 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.InvalidOperationException: A second operation started on this context before a previous operation completed. Any instance members are not guaranteed to be thread safe.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.InvalidOperationException: A second operation started on this context before a previous operation completed. Any instance members are not guaranteed to be thread safe.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2019-08-21 08:40:35.094 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:40:35.196 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:40:35.198 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:40:35.200 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:40:35.201 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:40:35.202 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:40:35.203 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:40:35.641 +02:00 [DBG] Starting grant removal
2019-08-21 08:40:40.733 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:40:40.747 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:40:40.757 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:40:40.759 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:40:40.761 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:40:40.763 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:40:40.765 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 08:47:25.420 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:47:25.537 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:47:25.539 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:47:25.546 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:47:25.549 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:47:25.552 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:47:25.553 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:47:25.875 +02:00 [DBG] Starting grant removal
2019-08-21 08:47:28.358 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:47:28.363 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:47:28.366 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:47:28.368 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:47:28.371 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:47:28.378 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:47:28.382 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 08:49:13.920 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:49:14.023 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:49:14.024 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:49:14.026 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:49:14.027 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:49:14.028 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:49:14.029 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:49:14.302 +02:00 [DBG] Starting grant removal
2019-08-21 08:49:16.565 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:49:16.574 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:49:16.576 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:49:16.578 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:49:16.581 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:49:16.584 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:49:16.588 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 08:53:47.997 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:53:48.073 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:53:48.075 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:53:48.076 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:53:48.077 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:53:48.078 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:53:48.079 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:53:48.418 +02:00 [DBG] Starting grant removal
2019-08-21 08:53:50.735 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:53:50.746 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:53:50.752 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:53:50.754 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:53:50.759 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:53:50.761 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:53:50.763 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 08:57:16.110 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 08:57:16.162 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 08:57:16.163 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 08:57:16.163 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 08:57:16.164 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 08:57:16.165 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 08:57:16.165 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 08:57:16.420 +02:00 [DBG] Starting grant removal
2019-08-21 08:57:18.664 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 08:57:18.672 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 08:57:18.675 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 08:57:18.676 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 08:57:18.678 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 08:57:18.679 +02:00 [DBG] Error Url: /home/error
2019-08-21 08:57:18.681 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 09:05:05.641 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 09:05:05.734 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 09:05:05.735 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 09:05:05.737 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 09:05:05.739 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 09:05:05.740 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 09:05:05.740 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 09:05:06.002 +02:00 [DBG] Starting grant removal
2019-08-21 09:05:09.332 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 09:05:09.341 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 09:05:09.345 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 09:05:09.347 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 09:05:09.351 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 09:05:09.357 +02:00 [DBG] Error Url: /home/error
2019-08-21 09:05:09.358 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 09:08:26.318 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 09:08:26.388 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 09:08:26.388 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 09:08:26.389 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 09:08:26.390 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 09:08:26.391 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 09:08:26.392 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 09:08:26.605 +02:00 [DBG] Starting grant removal
2019-08-21 09:08:30.085 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 09:08:30.096 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 09:08:30.100 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 09:08:30.101 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 09:08:30.102 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 09:08:30.104 +02:00 [DBG] Error Url: /home/error
2019-08-21 09:08:30.111 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 09:09:11.685 +02:00 [ERR] Failed executing DbCommand (1,340ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 1000), @p2='?' (Size = 200), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [ApiScopes] ([ApiResourceId], [Description], [DisplayName], [Emphasize], [Name], [Required], [ShowInDiscoveryDocument])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [ApiScopes]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (test 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:5bff8704-db1c-4d02-b6db-ae631fc75476
Error Number:2601,State:1,Class:14
2019-08-21 09:09:12.310 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (test 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert duplicate key row in object 'dbo.ApiScopes' with unique index 'IX_ApiScopes_Name'. The duplicate key value is (test 2).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IReadOnlyList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2019-08-21 09:21:05.944 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 09:21:06.085 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 09:21:06.088 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 09:21:06.089 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 09:21:06.093 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 09:21:06.100 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 09:21:06.104 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 09:21:06.458 +02:00 [DBG] Starting grant removal
2019-08-21 09:21:09.012 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 09:21:09.023 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 09:21:09.026 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 09:21:09.035 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 09:21:09.037 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 09:21:09.038 +02:00 [DBG] Error Url: /home/error
2019-08-21 09:21:09.040 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 09:36:06.042 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 09:36:20.868 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.877 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.880 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.886 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.888 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.893 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.897 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.904 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.906 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.913 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.915 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.917 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.921 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 09:36:20.925 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-08-21 09:38:19.291 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 09:39:01.376 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 09:39:01.432 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 09:39:01.433 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 09:39:01.434 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 09:39:01.434 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 09:39:01.435 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 09:39:01.435 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 09:39:01.711 +02:00 [DBG] Starting grant removal
2019-08-21 09:39:04.131 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 09:39:04.138 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 09:39:04.142 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 09:39:04.143 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 09:39:04.145 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 09:39:04.146 +02:00 [DBG] Error Url: /home/error
2019-08-21 09:39:04.148 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 09:39:22.488 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.497 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.505 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.510 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.513 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.525 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.530 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.551 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.559 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.572 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.576 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.579 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.587 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 09:39:22.592 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-08-21 09:39:44.684 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 09:55:07.037 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-21 09:55:08.600 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-21 09:55:39.597 +02:00 [INF] Error from RemoteAuthentication: The operation was canceled..
2019-08-21 09:55:41.173 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-21 09:55:41.176 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled. ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request. ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.GetResult(Int16 token)
   at System.Net.FixedSizeReader.ReadPacketAsync(Stream transport, AsyncProtocolRequest request)
   at System.Net.Security.SslState.ThrowIfExceptional()
   at System.Net.Security.SslState.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__47_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.CreateConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.WaitForCreatedConnectionAsync(ValueTask`1 creationTask)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.AspNetCore.Authentication.MicrosoftAccount.MicrosoftAccountHandler.CreateTicketAsync(ClaimsIdentity identity, AuthenticationProperties properties, OAuthTokenResponse tokens)
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthHandler`1.HandleRemoteAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-21 09:55:46.571 +02:00 [DBG] Augmenting SignInContext
2019-08-21 09:55:46.575 +02:00 [DBG] Adding amr claim with value: external
2019-08-21 09:55:46.591 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-21 09:55:46.611 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-21 09:55:51.377 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 09:56:57.352 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 09:57:28.118 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 10:39:01.778 +02:00 [INF] Removing 0 grants
2019-08-21 11:39:01.844 +02:00 [INF] Removing 0 grants
2019-08-21 12:08:31.645 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-21 12:08:33.335 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-21 12:09:02.217 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-21 12:09:02.244 +02:00 [DBG] Augmenting SignInContext
2019-08-21 12:09:02.245 +02:00 [DBG] Adding amr claim with value: external
2019-08-21 12:09:02.248 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-21 12:09:02.249 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-21 12:22:52.698 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 12:22:52.806 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 12:22:52.808 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 12:22:52.811 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 12:22:52.813 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 12:22:52.815 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 12:22:52.816 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 12:22:53.168 +02:00 [DBG] Starting grant removal
2019-08-21 12:22:56.577 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 12:22:56.583 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 12:22:56.592 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 12:22:56.594 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 12:22:56.596 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 12:22:56.598 +02:00 [DBG] Error Url: /home/error
2019-08-21 12:22:56.600 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 12:39:35.247 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.262 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.272 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.282 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.286 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.293 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.RedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.296 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.314 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.319 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.333 +02:00 [WRN] The LINQ expression 'where ([t].ToModel().ClientId == __clientId_0)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.337 +02:00 [WRN] The LINQ expression 'Take(1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.344 +02:00 [WRN] The LINQ expression 'join AnonymousObject _t in {from Client t in value(Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[IdentityServer4.EntityFramework.Entities.Client]) where ([t].ToModel().ClientId == __clientId_0) orderby EF.Property(?[t]?, "Id") asc select new AnonymousObject(new [] {Convert(EF.Property(?[t]?, "Id"), Object)}) => Take(1)} on Property([t.PostLogoutRedirectUris], "ClientId") equals Convert([_t].GetValue(0), Nullable`1)' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.350 +02:00 [WRN] The LINQ expression 'orderby [_t].GetValue(0) asc' could not be translated and will be evaluated locally.
2019-08-21 12:39:35.360 +02:00 [WRN] The LINQ expression 'FirstOrDefault()' could not be translated and will be evaluated locally.
2019-08-21 12:43:00.259 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 12:49:19.612 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 12:49:19.705 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 12:49:19.707 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 12:49:19.708 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 12:49:19.709 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 12:49:19.710 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 12:49:19.711 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 12:49:19.914 +02:00 [DBG] Starting grant removal
2019-08-21 12:49:23.081 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 12:49:23.158 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 12:49:23.168 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 12:49:23.180 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 12:49:23.189 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 12:49:23.193 +02:00 [DBG] Error Url: /home/error
2019-08-21 12:49:23.195 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 13:04:56.019 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 13:05:34.208 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 13:06:13.448 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 13:06:45.842 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 13:07:12.505 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:09:29.611 +02:00 [INF] Removing 0 grants
2019-08-21 14:09:51.145 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:10:06.691 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:11:24.138 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:11:57.881 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:14:04.658 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:14:15.942 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:22:08.438 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:37:26.042 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 14:49:48.195 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 14:49:48.264 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 14:49:48.265 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 14:49:48.266 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 14:49:48.267 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 14:49:48.271 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 14:49:48.272 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 14:49:48.693 +02:00 [DBG] Starting grant removal
2019-08-21 14:49:55.268 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 14:49:55.282 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 14:49:55.303 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 14:49:55.329 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 14:49:55.334 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 14:49:55.338 +02:00 [DBG] Error Url: /home/error
2019-08-21 14:49:55.340 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 15:37:44.467 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.EntityTypeExtensions.DisplayName(IEntityType type)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.WalkNavigations(IEntityType entityType, IReadOnlyList`1 navigationPropertyPaths, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.PopulateIncludeLoadTree(IncludeResultOperator includeResultOperator, IncludeLoadTree includeLoadTree)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CreateIncludeLoadTrees(QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.IncludeCompiler.CompileIncludes(QueryModel queryModel, Boolean trackingQuery, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryModelVisitor.OptimizeQueryModel(QueryModel queryModel, Boolean asyncQuery)
   at Microsoft.EntityFrameworkCore.Query.EntityQueryModelVisitor.CreateQueryExecutor[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](QueryModel queryModel)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](Expression query, IQueryModelGenerator queryModelGenerator, IDatabase database, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass13_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQueryCore[TFunc](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at SecureTokenServer.Services.ClientService.Get(String clientId)
   at SecurityServer.Controllers.ClientsController.Edit(String clientId)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-21 15:46:32.305 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 15:47:19.451 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-21 16:14:49.075 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-21 16:14:49.167 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-21 16:14:49.168 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-21 16:14:49.169 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-21 16:14:49.170 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-21 16:14:49.171 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-21 16:14:49.171 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-21 16:14:50.511 +02:00 [DBG] Starting grant removal
2019-08-21 16:14:55.497 +02:00 [DBG] Login Url: /Account/Login
2019-08-21 16:14:55.506 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-21 16:14:55.507 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-21 16:14:55.509 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-21 16:14:55.509 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-21 16:14:55.510 +02:00 [DBG] Error Url: /home/error
2019-08-21 16:14:55.511 +02:00 [DBG] Error Id Parameter: errorId
2019-08-21 17:15:01.875 +02:00 [INF] Removing 0 grants
2019-08-22 16:26:06.403 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-22 16:26:06.500 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-22 16:26:06.510 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-22 16:26:06.511 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-22 16:26:06.512 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-22 16:26:06.513 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-22 16:26:06.514 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-22 16:26:07.598 +02:00 [DBG] Starting grant removal
2019-08-22 16:26:12.767 +02:00 [DBG] Login Url: /Account/Login
2019-08-22 16:26:12.772 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-22 16:26:12.781 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-22 16:26:12.783 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-22 16:26:12.788 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-22 16:26:12.790 +02:00 [DBG] Error Url: /home/error
2019-08-22 16:26:12.793 +02:00 [DBG] Error Id Parameter: errorId
2019-08-22 16:26:14.744 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-22 16:26:25.109 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-22 16:26:29.585 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-22 16:26:30.530 +02:00 [DBG] Augmenting SignInContext
2019-08-22 16:26:30.535 +02:00 [DBG] Adding amr claim with value: external
2019-08-22 16:26:30.546 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-22 16:26:30.560 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-22 16:26:30.599 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-22 16:26:53.827 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-22 16:26:55.048 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-22 16:26:55.094 +02:00 [DBG] Augmenting SignInContext
2019-08-22 16:26:55.094 +02:00 [DBG] Adding amr claim with value: external
2019-08-22 16:26:55.099 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-22 16:26:55.103 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-22 16:26:55.118 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-22 16:28:13.166 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-22 16:28:38.820 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-22 16:28:38.952 +02:00 [INF] Error from RemoteAuthentication: The operation was canceled..
2019-08-22 16:28:38.953 +02:00 [DBG] Augmenting SignInContext
2019-08-22 16:28:38.959 +02:00 [DBG] Adding amr claim with value: external
2019-08-22 16:28:39.065 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-22 16:28:39.124 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-22 16:28:39.711 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.l6pd3T6w1rUx5PLZcS3ZXOSyWkhexuAwW58lXvZbk5I' cookie not found.
2019-08-22 16:28:39.851 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-22 16:28:41.406 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled. ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request. ---> System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.GetResult(Int16 token)
   at System.Net.Security.SslStreamInternal.<FillBufferAsync>g__InternalFillBufferAsync|38_0[TReadAdapter](TReadAdapter adap, ValueTask`1 task, Int32 min, Int32 initial)
   at System.Net.Security.SslStreamInternal.ReadAsyncInternal[TReadAdapter](TReadAdapter adapter, Memory`1 buffer)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithNtConnectionAuthAsync(HttpConnection connection, HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.AspNetCore.Authentication.MicrosoftAccount.MicrosoftAccountHandler.CreateTicketAsync(ClaimsIdentity identity, AuthenticationProperties properties, OAuthTokenResponse tokens)
   at Microsoft.AspNetCore.Authentication.OAuth.OAuthHandler`1.HandleRemoteAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-22 16:28:42.001 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-22 16:28:42.371 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.l6pd3T6w1rUx5PLZcS3ZXOSyWkhexuAwW58lXvZbk5I' cookie not found.
2019-08-22 16:28:42.445 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-22 16:28:43.106 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-22 16:28:51.882 +02:00 [WRN] '.AspNetCore.Correlation.Microsoft.l6pd3T6w1rUx5PLZcS3ZXOSyWkhexuAwW58lXvZbk5I' cookie not found.
2019-08-22 16:28:51.889 +02:00 [INF] Error from RemoteAuthentication: Correlation failed..
2019-08-22 16:28:52.391 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: An error was encountered while handling the remote login. ---> System.Exception: Correlation failed.
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at IdentityServer4.Hosting.FederatedSignOut.AuthenticationRequestHandlerWrapper.HandleRequestAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\FederatedSignOut\AuthenticationRequestHandlerWrapper.cs:line 38
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-22 16:29:28.368 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-22 16:29:28.514 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-22 16:29:28.517 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-22 16:29:28.518 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-22 16:29:28.519 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-22 16:29:28.519 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-22 16:29:28.520 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-22 16:29:28.824 +02:00 [DBG] Starting grant removal
2019-08-22 16:29:30.405 +02:00 [DBG] Login Url: /Account/Login
2019-08-22 16:29:30.415 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-22 16:29:30.420 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-22 16:29:30.423 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-22 16:29:30.427 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-22 16:29:30.432 +02:00 [DBG] Error Url: /home/error
2019-08-22 16:29:30.435 +02:00 [DBG] Error Id Parameter: errorId
2019-08-22 16:29:30.958 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-22 16:29:34.326 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-22 16:29:37.169 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-22 16:29:37.700 +02:00 [DBG] Augmenting SignInContext
2019-08-22 16:29:37.704 +02:00 [DBG] Adding amr claim with value: external
2019-08-22 16:29:37.718 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-22 16:29:37.733 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-22 16:30:10.505 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-22 16:36:18.656 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-22 16:36:51.908 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-22 16:37:33.317 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-22 16:40:10.412 +02:00 [DBG] CORS request made for path: /Clients/Edit from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-22 16:54:41.740 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-22 16:54:41.821 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-22 16:54:41.823 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-22 16:54:41.824 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-22 16:54:41.825 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-22 16:54:41.826 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-22 16:54:41.827 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-22 16:54:42.044 +02:00 [DBG] Starting grant removal
2019-08-22 16:54:44.157 +02:00 [DBG] Login Url: /Account/Login
2019-08-22 16:54:44.177 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-22 16:54:44.179 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-22 16:54:44.180 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-22 16:54:44.186 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-22 16:54:44.187 +02:00 [DBG] Error Url: /home/error
2019-08-22 16:54:44.188 +02:00 [DBG] Error Id Parameter: errorId
2019-08-22 17:05:42.558 +02:00 [DBG] TaskCanceledException. Exiting.
2019-08-22 17:05:42.765 +02:00 [DBG] Stopping grant removal
2019-08-27 09:50:51.375 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 09:50:51.538 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 09:50:51.540 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 09:50:51.541 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 09:50:51.542 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 09:50:51.543 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 09:50:51.571 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 09:50:52.111 +02:00 [DBG] Starting grant removal
2019-08-27 09:50:58.998 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 09:50:59.001 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 09:50:59.005 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 09:50:59.007 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 09:50:59.008 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 09:50:59.010 +02:00 [DBG] Error Url: /home/error
2019-08-27 09:50:59.012 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 09:51:00.369 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-27 09:51:06.883 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-27 09:51:10.704 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-27 09:51:11.514 +02:00 [DBG] Augmenting SignInContext
2019-08-27 09:51:11.516 +02:00 [DBG] Adding amr claim with value: external
2019-08-27 09:51:11.523 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-27 09:51:11.533 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-27 11:54:33.502 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 11:54:33.590 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 11:54:33.594 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 11:54:33.595 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 11:54:33.597 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 11:54:33.600 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 11:54:33.606 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 11:54:34.054 +02:00 [DBG] Starting grant removal
2019-08-27 11:54:37.492 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 11:54:37.502 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 11:54:37.507 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 11:54:37.511 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 11:54:37.517 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 11:54:37.518 +02:00 [DBG] Error Url: /home/error
2019-08-27 11:54:37.520 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 11:54:52.335 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 39
   at SecurityServer.Controllers.ClientsController.Manage(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 111
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 11:56:11.335 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 39
   at SecurityServer.Controllers.ClientsController.Manage(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 111
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 11:57:45.224 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.Get(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 39
   at SecurityServer.Controllers.ClientsController.Manage(String clientId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 111
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 11:59:26.774 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 11:59:26.841 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 11:59:26.843 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 11:59:26.843 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 11:59:26.844 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 11:59:26.844 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 11:59:26.845 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 11:59:27.035 +02:00 [DBG] Starting grant removal
2019-08-27 11:59:30.427 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 11:59:30.436 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 11:59:30.439 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 11:59:30.442 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 11:59:30.444 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 11:59:30.452 +02:00 [DBG] Error Url: /home/error
2019-08-27 11:59:30.455 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 12:05:24.811 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:05:24.834 +02:00 [ERR] The view 'Manage' was not found. Searched locations: ["/Views/Clients/Manage.cshtml","/Views/Shared/Manage.cshtml","/Pages/Shared/Manage.cshtml"]
2019-08-27 12:05:26.158 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Manage' was not found. The following locations were searched:
/Views/Clients/Manage.cshtml
/Views/Shared/Manage.cshtml
/Pages/Shared/Manage.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 12:06:36.167 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 12:06:36.327 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 12:06:36.335 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 12:06:36.337 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 12:06:36.341 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 12:06:36.345 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 12:06:36.346 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 12:06:37.143 +02:00 [DBG] Starting grant removal
2019-08-27 12:06:40.518 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 12:06:40.535 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 12:06:40.537 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 12:06:40.548 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 12:06:40.553 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 12:06:40.568 +02:00 [DBG] Error Url: /home/error
2019-08-27 12:06:40.573 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 12:06:51.723 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:08:21.183 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:11:25.141 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:11:26.623 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Clients\Manage.cshtml(18,91): error CS1061: 'ManageClientVm' does not contain a definition for 'DisplayName' and no extension method 'DisplayName' accepting a first argument of type 'ManageClientVm' could be found (are you missing a using directive or an assembly reference?)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 12:11:49.988 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:12:30.234 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:12:44.328 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:14:34.917 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:17:03.947 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:18:28.386 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:19:45.725 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:23:50.714 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:24:27.827 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:25:38.709 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:29:24.230 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:31:46.299 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 12:31:46.404 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 12:31:46.406 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 12:31:46.407 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 12:31:46.407 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 12:31:46.408 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 12:31:46.409 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 12:31:46.683 +02:00 [DBG] Starting grant removal
2019-08-27 12:31:49.601 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 12:31:49.617 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 12:31:49.620 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 12:31:49.635 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 12:31:49.641 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 12:31:49.651 +02:00 [DBG] Error Url: /home/error
2019-08-27 12:31:49.668 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 12:32:01.723 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:32:19.923 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:33:12.635 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:35:53.804 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:36:24.835 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:36:55.054 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:38:00.363 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:38:42.019 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:39:19.965 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:40:10.509 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:40:30.582 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:40:37.242 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:43:03.806 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:43:46.952 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:45:46.992 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:47:05.792 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:48:05.259 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:49:05.212 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:49:15.946 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:53:30.108 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:55:13.505 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:55:49.401 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:56:14.010 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:56:25.288 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:56:54.239 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:57:14.870 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 12:59:24.961 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:00:03.020 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:00:59.485 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:07:52.745 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:07:57.989 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:08:08.831 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:08:43.614 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:09:55.347 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:09:58.380 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:13:10.478 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:13:45.389 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:15:13.447 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:17:09.427 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:17:28.358 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:18:30.872 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:18:38.067 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:18:59.381 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:19:07.467 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:20:48.859 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:21:20.783 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:24:08.073 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:24:32.321 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:25:16.511 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:27:38.840 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:28:58.969 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:29:30.478 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:29:38.071 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:30:59.200 +02:00 [DBG] CORS request made for path: /Clients/Register from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-27 13:31:06.625 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 13:31:47.277 +02:00 [INF] Removing 0 grants
2019-08-27 14:31:47.307 +02:00 [INF] Removing 0 grants
2019-08-27 14:56:51.870 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 14:58:23.525 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 14:58:41.289 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:06:44.750 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:12:31.808 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:12:55.257 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:13:13.770 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:13:20.763 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:15:55.133 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 15:15:55.214 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 15:15:55.217 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 15:15:55.218 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 15:15:55.219 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 15:15:55.219 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 15:15:55.220 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 15:15:55.682 +02:00 [DBG] Starting grant removal
2019-08-27 15:15:58.267 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 15:15:58.280 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 15:15:58.283 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 15:15:58.286 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 15:15:58.288 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 15:15:58.291 +02:00 [DBG] Error Url: /home/error
2019-08-27 15:15:58.302 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 15:17:13.872 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:17:21.893 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:41:55.946 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 15:41:56.068 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 15:41:56.070 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 15:41:56.071 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 15:41:56.072 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 15:41:56.073 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 15:41:56.074 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 15:41:56.402 +02:00 [DBG] Starting grant removal
2019-08-27 15:41:59.834 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 15:41:59.839 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 15:41:59.847 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 15:41:59.849 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 15:41:59.852 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 15:41:59.858 +02:00 [DBG] Error Url: /home/error
2019-08-27 15:41:59.865 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 15:42:33.819 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:43:21.633 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:43:45.120 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:44:18.627 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:44:29.448 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:44:39.131 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecurityServer.Controllers.ClientsController.GetResources(String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 15:44:56.627 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:44:58.412 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecurityServer.Controllers.ClientsController.GetResources(String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 15:45:16.843 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:45:23.668 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:45:25.239 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecurityServer.Controllers.ClientsController.GetResources(String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 15:45:33.674 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:45:46.015 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:45:47.292 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecurityServer.Controllers.ClientsController.GetResources(String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 15:46:25.936 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:46:39.558 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: source
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at SecurityServer.Controllers.ClientsController.GetResources(String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 15:47:57.718 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:48:19.993 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:53:14.548 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 15:53:14.649 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 15:53:14.652 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 15:53:14.653 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 15:53:14.654 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 15:53:14.655 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 15:53:14.656 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 15:53:14.956 +02:00 [DBG] Starting grant removal
2019-08-27 15:53:17.715 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 15:53:17.750 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 15:53:17.778 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 15:53:17.784 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 15:53:17.787 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 15:53:17.793 +02:00 [DBG] Error Url: /home/error
2019-08-27 15:53:17.796 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 15:53:33.884 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 15:53:38.438 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:03:11.148 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 16:03:11.221 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 16:03:11.223 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 16:03:11.224 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 16:03:11.225 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 16:03:11.227 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 16:03:11.228 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 16:03:11.438 +02:00 [DBG] Starting grant removal
2019-08-27 16:03:14.354 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 16:03:14.358 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 16:03:14.365 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 16:03:14.369 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 16:03:14.373 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 16:03:14.375 +02:00 [DBG] Error Url: /home/error
2019-08-27 16:03:14.377 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 16:03:22.451 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:03:28.179 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:03:31.802 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.Collections.Generic.List`1[System.String]', but this ViewDataDictionary instance requires a model item of type 'SecureTokenServer.Models.AssignClientResourceVm'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary`1..ctor(ViewDataDictionary source)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.PartialViewResultExecutor.ExecuteAsync(ActionContext context, PartialViewResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 16:04:25.853 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:04:31.258 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:04:53.617 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:05:00.687 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:13:37.788 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 16:13:37.889 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 16:13:37.890 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 16:13:37.892 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 16:13:37.893 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 16:13:37.894 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 16:13:37.895 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 16:13:38.197 +02:00 [DBG] Starting grant removal
2019-08-27 16:13:41.158 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 16:13:41.165 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 16:13:41.173 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 16:13:41.176 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 16:13:41.178 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 16:13:41.181 +02:00 [DBG] Error Url: /home/error
2019-08-27 16:13:41.184 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 16:13:51.942 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:13:57.366 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 16:14:06.741 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(ReadOnlySpan`1 str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(ReadOnlySpan`1 s, NumberStyles style, NumberFormatInfo info)
   at System.Int32.Parse(String s)
   at SecureTokenServer.Services.ClientService.AssignResource(String clientName, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 30
   at SecurityServer.Controllers.ClientsController.AssignResource(String resourceName, String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 153
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 16:14:42.310 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:02:01.340 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 21:03:20.629 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 21:03:20.631 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 21:03:20.631 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 21:03:20.632 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 21:03:20.632 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 21:03:20.633 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 21:03:20.827 +02:00 [DBG] Starting grant removal
2019-08-27 21:03:22.480 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 21:03:22.484 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 21:03:22.487 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 21:03:22.490 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 21:03:22.492 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 21:03:22.493 +02:00 [DBG] Error Url: /home/error
2019-08-27 21:03:22.494 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 21:03:22.965 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-27 21:03:30.567 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-27 21:03:43.059 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-27 21:03:43.979 +02:00 [DBG] Augmenting SignInContext
2019-08-27 21:03:43.999 +02:00 [DBG] Adding amr claim with value: external
2019-08-27 21:03:44.035 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-27 21:03:44.048 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-27 21:03:51.542 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:03:54.534 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:04:52.103 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(ReadOnlySpan`1 str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(ReadOnlySpan`1 s, NumberStyles style, NumberFormatInfo info)
   at System.Int32.Parse(String s)
   at SecureTokenServer.Services.ClientService.AssignResource(String clientName, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 30
   at SecurityServer.Controllers.ClientsController.AssignResource(String resourceName, String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 153
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 21:08:17.858 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:09:57.061 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:11:43.246 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:14:14.805 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.AutomaperConfig.AddClientResourceScope(ManageClientVm manageClientVm, ClientScopeStruct scopeStruct)
   at SecureTokenServer.Providers.AutomaperConfig.ClientToManageClientVm(Client client)
   at lambda_method(Closure , Client , ManageClientVm , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TDestination](Object source) in C:\projects\automapper\src\AutoMapper\Mapper.cs:line 213
   at SecurityServer.Controllers.ClientsController.Manage(String clientId)
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-27 21:16:27.549 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:17:10.887 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 21:17:10.952 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 21:17:10.953 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 21:17:10.954 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 21:17:10.954 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 21:17:10.955 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 21:17:10.955 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 21:17:11.150 +02:00 [DBG] Starting grant removal
2019-08-27 21:17:13.822 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 21:17:13.832 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 21:17:13.838 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 21:17:13.841 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 21:17:13.845 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 21:17:13.847 +02:00 [DBG] Error Url: /home/error
2019-08-27 21:17:13.851 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 21:17:32.497 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:18:00.663 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 21:18:00.724 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 21:18:00.725 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 21:18:00.726 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 21:18:00.726 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 21:18:00.727 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 21:18:00.728 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 21:18:00.934 +02:00 [DBG] Starting grant removal
2019-08-27 21:18:02.581 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 21:18:02.589 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 21:18:02.592 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 21:18:02.594 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 21:18:02.595 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 21:18:02.600 +02:00 [DBG] Error Url: /home/error
2019-08-27 21:18:02.604 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 21:21:36.888 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-27 21:23:01.330 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-27 21:23:01.397 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-27 21:23:01.397 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-27 21:23:01.398 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-27 21:23:01.399 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-27 21:23:01.399 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-27 21:23:01.400 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-27 21:23:01.647 +02:00 [DBG] Starting grant removal
2019-08-27 21:23:03.224 +02:00 [DBG] Login Url: /Account/Login
2019-08-27 21:23:03.231 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-27 21:23:03.232 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-27 21:23:03.233 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-27 21:23:03.234 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-27 21:23:03.237 +02:00 [DBG] Error Url: /home/error
2019-08-27 21:23:03.238 +02:00 [DBG] Error Id Parameter: errorId
2019-08-27 21:27:24.468 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 09:18:13.371 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 09:18:13.512 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 09:18:13.519 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 09:18:13.520 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 09:18:13.520 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 09:18:13.521 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 09:18:13.521 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 09:18:14.510 +02:00 [DBG] Starting grant removal
2019-08-28 09:18:18.917 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 09:18:18.923 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 09:18:18.927 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 09:18:18.929 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 09:18:18.930 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 09:18:18.932 +02:00 [DBG] Error Url: /home/error
2019-08-28 09:18:18.937 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 09:18:20.991 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-28 09:18:24.926 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-28 09:18:29.406 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-28 09:18:30.185 +02:00 [DBG] Augmenting SignInContext
2019-08-28 09:18:30.190 +02:00 [DBG] Adding amr claim with value: external
2019-08-28 09:18:30.203 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-28 09:18:30.224 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 09:18:57.559 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 09:19:21.578 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 09:19:21.748 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 09:19:21.749 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 09:19:21.750 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 09:19:21.750 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 09:19:21.751 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 09:19:21.762 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 09:19:22.414 +02:00 [DBG] Starting grant removal
2019-08-28 09:19:25.325 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 09:19:25.353 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 09:19:25.358 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 09:19:25.360 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 09:19:25.374 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 09:19:25.376 +02:00 [DBG] Error Url: /home/error
2019-08-28 09:19:25.386 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 09:19:59.681 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 09:31:58.494 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 09:31:58.589 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 09:31:58.593 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 09:31:58.594 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 09:31:58.594 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 09:31:58.595 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 09:31:58.596 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 09:31:58.815 +02:00 [DBG] Starting grant removal
2019-08-28 09:32:01.955 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 09:32:01.963 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 09:32:01.972 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 09:32:01.974 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 09:32:01.978 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 09:32:01.982 +02:00 [DBG] Error Url: /home/error
2019-08-28 09:32:01.985 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 09:34:52.550 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot return null from an action method with a return type of 'Microsoft.AspNetCore.Mvc.IActionResult'.
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.EnsureActionResultNotNull(ObjectMethodExecutor executor, IActionResult actionResult)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-28 09:35:55.609 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 09:36:01.764 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 12:10:25.550 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 12:10:25.644 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 12:10:25.649 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 12:10:25.651 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 12:10:25.651 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 12:10:25.652 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 12:10:25.653 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 12:10:25.878 +02:00 [DBG] Starting grant removal
2019-08-28 12:10:28.305 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 12:10:28.313 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 12:10:28.315 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 12:10:28.317 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 12:10:28.319 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 12:10:28.320 +02:00 [DBG] Error Url: /home/error
2019-08-28 12:10:28.326 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 12:10:45.917 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 12:10:46.044 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 12:10:46.052 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 12:10:46.072 +02:00 [DBG] Start discovery request
2019-08-28 12:10:46.675 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 12:50:36.157 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-28 12:50:36.462 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-08-28 12:50:36.479 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 12:50:36.489 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-08-28 12:50:51.569 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-28 12:50:53.315 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-28 12:50:57.208 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-28 12:50:57.527 +02:00 [DBG] Augmenting SignInContext
2019-08-28 12:50:57.529 +02:00 [DBG] Adding amr claim with value: external
2019-08-28 12:50:57.533 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-28 12:50:57.535 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 12:51:06.902 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-28 12:51:06.914 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-08-28 12:51:06.918 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 12:51:06.922 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-08-28 13:10:26.079 +02:00 [INF] Removing 0 grants
2019-08-28 14:09:31.324 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 14:09:31.411 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 14:09:31.412 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 14:09:31.413 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 14:09:31.414 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 14:09:31.415 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 14:09:31.416 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 14:09:32.128 +02:00 [DBG] Starting grant removal
2019-08-28 14:09:35.346 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 14:09:35.363 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 14:09:35.371 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 14:09:35.373 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 14:09:35.376 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 14:09:35.378 +02:00 [DBG] Error Url: /home/error
2019-08-28 14:09:35.380 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 14:09:37.109 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-28 14:09:41.577 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-28 14:09:45.380 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-28 14:09:46.218 +02:00 [DBG] Augmenting SignInContext
2019-08-28 14:09:46.222 +02:00 [DBG] Adding amr claim with value: external
2019-08-28 14:09:46.232 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-28 14:09:46.245 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 14:10:32.321 +02:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-08-28 14:10:32.394 +02:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-08-28 14:10:32.404 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 14:10:32.409 +02:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-08-28 14:10:34.597 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-28 14:10:35.725 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-28 14:10:36.849 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-28 14:10:36.888 +02:00 [DBG] Augmenting SignInContext
2019-08-28 14:10:36.889 +02:00 [DBG] Adding amr claim with value: external
2019-08-28 14:10:36.899 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-28 14:10:36.908 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-28 14:10:39.176 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 14:10:39.196 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 14:10:39.199 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 14:10:39.213 +02:00 [DBG] Start discovery request
2019-08-28 14:10:39.650 +02:00 [DBG] Found ["openid","profile","email","TestScope","Approvals","test Scopr","TestApi"] as all scopes in database
2019-08-28 14:15:24.242 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 14:15:24.250 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 14:15:24.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 14:15:24.268 +02:00 [DBG] Start discovery request
2019-08-28 14:15:24.310 +02:00 [DBG] Found ["openid","profile","email","TestApi"] as all scopes in database
2019-08-28 14:19:56.727 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 14:19:56.731 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 14:19:56.740 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 14:19:56.745 +02:00 [DBG] Start discovery request
2019-08-28 14:19:56.821 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:21:51.441 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 14:21:51.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 14:21:51.455 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 14:21:51.462 +02:00 [DBG] Start discovery request
2019-08-28 14:21:51.492 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:29:09.464 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-08-28 14:29:09.477 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-08-28 14:29:09.483 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-08-28 14:29:09.486 +02:00 [DBG] Start discovery request
2019-08-28 14:29:09.535 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:29:50.934 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:31:42.772 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:39:52.338 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 14:39:52.569 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 14:39:52.572 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 14:39:52.578 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 14:39:52.581 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 14:39:52.584 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 14:39:52.589 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 14:39:53.515 +02:00 [DBG] Starting grant removal
2019-08-28 14:39:57.590 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 14:39:57.595 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 14:39:57.598 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 14:39:57.600 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 14:39:57.614 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 14:39:57.615 +02:00 [DBG] Error Url: /home/error
2019-08-28 14:39:57.616 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 14:42:09.543 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:44:36.803 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:45:12.667 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:46:16.733 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:55:29.716 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 14:55:29.777 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 14:55:29.778 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 14:55:29.779 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 14:55:29.779 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 14:55:29.780 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 14:55:29.781 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 14:55:29.975 +02:00 [DBG] Starting grant removal
2019-08-28 14:55:32.410 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 14:55:32.416 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 14:55:32.420 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 14:55:32.423 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 14:55:32.425 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 14:55:32.427 +02:00 [DBG] Error Url: /home/error
2019-08-28 14:55:32.429 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 14:57:31.058 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:57:47.062 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 14:58:06.953 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:03:12.772 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 15:03:12.845 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 15:03:12.846 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 15:03:12.847 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 15:03:12.847 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 15:03:12.848 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 15:03:12.849 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 15:03:13.137 +02:00 [DBG] Starting grant removal
2019-08-28 15:03:15.476 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 15:03:15.516 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 15:03:15.541 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 15:03:15.550 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 15:03:15.554 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 15:03:15.560 +02:00 [DBG] Error Url: /home/error
2019-08-28 15:03:15.570 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 15:03:52.250 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:04:09.401 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:04:19.520 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:06:45.389 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 15:06:45.495 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 15:06:45.496 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 15:06:45.497 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 15:06:45.498 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 15:06:45.499 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 15:06:45.500 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 15:06:45.787 +02:00 [DBG] Starting grant removal
2019-08-28 15:06:48.958 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 15:06:48.967 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 15:06:48.983 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 15:06:48.987 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 15:06:48.999 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 15:06:49.003 +02:00 [DBG] Error Url: /home/error
2019-08-28 15:06:49.020 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 15:07:11.442 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:08:38.538 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:08:50.129 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:10:39.675 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:10:46.904 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:11:11.320 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:11:21.491 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:12:42.798 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:12:52.037 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:15:05.833 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 15:15:05.963 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 15:15:05.965 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 15:15:05.966 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 15:15:05.967 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 15:15:05.968 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 15:15:05.970 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 15:15:06.419 +02:00 [DBG] Starting grant removal
2019-08-28 15:15:09.167 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 15:15:09.179 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 15:15:09.184 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 15:15:09.187 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 15:15:09.204 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 15:15:09.217 +02:00 [DBG] Error Url: /home/error
2019-08-28 15:15:09.218 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 15:15:22.190 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:15:33.890 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:15:57.766 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:16:14.028 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:16:54.477 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:17:15.389 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:17:26.281 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:19:02.853 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 15:19:02.927 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 15:19:02.928 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 15:19:02.929 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 15:19:02.929 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 15:19:02.930 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 15:19:02.931 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 15:19:03.186 +02:00 [DBG] Starting grant removal
2019-08-28 15:19:05.837 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 15:19:05.858 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 15:19:05.864 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 15:19:05.866 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 15:19:05.874 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 15:19:05.877 +02:00 [DBG] Error Url: /home/error
2019-08-28 15:19:05.880 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 15:19:57.325 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 15:19:57.452 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 15:19:57.454 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 15:19:57.456 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 15:19:57.457 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 15:19:57.462 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 15:19:57.463 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 15:19:57.784 +02:00 [DBG] Starting grant removal
2019-08-28 15:20:00.675 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 15:20:00.680 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 15:20:00.683 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 15:20:00.685 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 15:20:00.687 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 15:20:00.694 +02:00 [DBG] Error Url: /home/error
2019-08-28 15:20:00.697 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 15:20:32.646 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:20:40.939 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:25:56.372 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:26:05.209 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:26:12.863 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:26:22.452 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:26:36.727 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.AssignResource(String clientName, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 30
   at SecurityServer.Controllers.ClientsController.AssignResource(String resourceName, String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 147
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-28 15:26:36.727 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.AssignResource(String clientName, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 30
   at SecurityServer.Controllers.ClientsController.AssignResource(String resourceName, String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 147
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-28 15:27:02.732 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:27:10.759 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:27:45.356 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:28:03.113 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Services.ClientService.AssignResource(String clientName, String resourceName) in D:\Projects\SecurityServer2\SecureTokenServer\Services\ClientService.cs:line 30
   at SecurityServer.Controllers.ClientsController.AssignResource(String resourceName, String clientName) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\ClientsController.cs:line 147
   at lambda_method(Closure , Object , Object[] )
   at Microsoft.Extensions.Internal.ObjectMethodExecutor.Execute(Object target, Object[] parameters)
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.SyncActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-28 15:29:42.671 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:29:51.975 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 15:30:14.698 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:06:56.535 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-28 16:06:56.657 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-28 16:06:56.665 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-28 16:06:56.666 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-28 16:06:56.668 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-28 16:06:56.670 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-28 16:06:56.671 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-28 16:06:57.067 +02:00 [DBG] Starting grant removal
2019-08-28 16:07:00.268 +02:00 [DBG] Login Url: /Account/Login
2019-08-28 16:07:00.284 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-28 16:07:00.285 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-28 16:07:00.287 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-28 16:07:00.293 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-28 16:07:00.298 +02:00 [DBG] Error Url: /home/error
2019-08-28 16:07:00.300 +02:00 [DBG] Error Id Parameter: errorId
2019-08-28 16:07:22.220 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:08:35.157 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:08:50.455 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:09:26.531 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:09:37.499 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:09:40.031 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:10:14.044 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:10:23.583 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 16:10:31.493 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash"] as all scopes in database
2019-08-28 17:06:57.167 +02:00 [INF] Removing 0 grants
2019-08-28 18:06:57.322 +02:00 [INF] Removing 0 grants
2019-08-28 19:06:57.352 +02:00 [INF] Removing 0 grants
2019-08-28 20:06:57.410 +02:00 [INF] Removing 0 grants
2019-08-28 21:06:57.447 +02:00 [INF] Removing 0 grants
2019-08-28 22:06:57.489 +02:00 [INF] Removing 0 grants
2019-08-28 23:06:57.554 +02:00 [INF] Removing 0 grants
2019-08-29 00:06:57.607 +02:00 [INF] Removing 0 grants
2019-08-29 01:06:57.661 +02:00 [INF] Removing 0 grants
2019-08-29 02:06:57.694 +02:00 [INF] Removing 0 grants
2019-08-29 03:06:57.741 +02:00 [INF] Removing 0 grants
2019-08-29 04:06:57.779 +02:00 [INF] Removing 0 grants
2019-08-29 05:06:57.807 +02:00 [INF] Removing 0 grants
2019-08-29 06:06:57.846 +02:00 [INF] Removing 0 grants
2019-08-29 07:06:57.863 +02:00 [INF] Removing 0 grants
2019-08-29 08:06:57.918 +02:00 [INF] Removing 0 grants
2019-08-29 11:34:04.380 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 11:34:04.523 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 11:34:04.525 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 11:34:04.527 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 11:34:04.529 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 11:34:04.531 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 11:34:04.532 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 11:34:05.277 +02:00 [DBG] Starting grant removal
2019-08-29 11:34:09.630 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 11:34:09.642 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 11:34:09.643 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 11:34:09.645 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 11:34:09.648 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 11:34:09.648 +02:00 [DBG] Error Url: /home/error
2019-08-29 11:34:09.650 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 11:44:47.490 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 11:44:47.613 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 11:44:47.615 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 11:44:47.616 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 11:44:47.617 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 11:44:47.618 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 11:44:47.619 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 11:44:48.493 +02:00 [DBG] Starting grant removal
2019-08-29 11:44:52.247 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 11:44:52.286 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 11:44:52.320 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 11:44:52.342 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 11:44:52.346 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 11:44:52.371 +02:00 [DBG] Error Url: /home/error
2019-08-29 11:44:52.384 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 11:45:12.527 +02:00 [ERR] Failed executing DbCommand (842ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 11:45:13.802 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 11:45:14.306 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 11:50:23.854 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 11:50:23.964 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 11:50:23.966 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 11:50:23.974 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 11:50:23.976 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 11:50:24.052 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 11:50:24.063 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 11:50:24.492 +02:00 [DBG] Starting grant removal
2019-08-29 11:50:27.645 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 11:50:27.652 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 11:50:27.654 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 11:50:27.655 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 11:50:27.658 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 11:50:27.660 +02:00 [DBG] Error Url: /home/error
2019-08-29 11:50:27.661 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 11:50:56.566 +02:00 [ERR] Connection id "0HLPCCP87SAQF", Request id "0HLPCCP87SAQF:00000004": An unhandled exception was thrown by the application.
System.InvalidOperationException: The connection does not support MultipleActiveResultSets.
   at System.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at System.Data.SqlClient.SqlInternalTransaction.Rollback()
   at System.Data.SqlClient.SqlTransaction.Dispose(Boolean disposing)
   at System.Data.Common.DbTransaction.Dispose()
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.Dispose()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ClearTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Dispose()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.Dispose()
   at Microsoft.EntityFrameworkCore.DbContext.Dispose()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.Dispose()
   at Microsoft.AspNetCore.Hosting.Internal.RequestServicesFeature.Dispose()
   at Microsoft.AspNetCore.Http.HttpResponse.<>c.<.cctor>b__30_1(Object disposable)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.FireOnCompletedAwaited(Stack`1 onCompleted)
2019-08-29 11:57:15.880 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 11:57:16.035 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 11:57:16.036 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 11:57:16.037 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 11:57:16.038 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 11:57:16.040 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 11:57:16.041 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 11:57:16.457 +02:00 [DBG] Starting grant removal
2019-08-29 11:57:19.268 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 11:57:19.284 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 11:57:19.293 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 11:57:19.295 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 11:57:19.296 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 11:57:19.297 +02:00 [DBG] Error Url: /home/error
2019-08-29 11:57:19.298 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 11:59:40.640 +02:00 [ERR] Failed executing DbCommand (574ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 11:59:42.391 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 11:59:42.995 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 12:00:36.591 +02:00 [ERR] Failed executing DbCommand (702ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 12:00:38.280 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 12:00:38.956 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 12:01:28.516 +02:00 [ERR] Failed executing DbCommand (531ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 12:01:30.070 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 12:01:30.493 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 12:06:49.332 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:06:49.472 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:06:49.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:06:49.485 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:06:49.486 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:06:49.488 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:06:49.495 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:06:50.280 +02:00 [DBG] Starting grant removal
2019-08-29 12:06:52.899 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:06:52.942 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:06:52.969 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:06:52.970 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:06:52.971 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:06:52.972 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:06:52.974 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:07:25.085 +02:00 [ERR] Failed executing DbCommand (728ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 12:07:27.069 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 12:07:27.471 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 12:07:43.147 +02:00 [ERR] Failed executing DbCommand (975ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
2019-08-29 12:07:44.988 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
System.InvalidOperationException: Invalid operation. The connection is closed.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
2019-08-29 12:07:45.727 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'SecureTokenServer.Data.ApplicationDbContext'.
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
System.ObjectDisposedException: Cannot access a disposed object. A common cause of this error is disposing a context that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling Dispose() on the context, or wrapping the context in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'AsyncDisposer'.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.AsyncDisposer.Dispose()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
2019-08-29 12:12:02.223 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:12:02.342 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:12:02.343 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:12:02.344 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:12:02.346 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:12:02.348 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:12:02.350 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:12:02.956 +02:00 [DBG] Starting grant removal
2019-08-29 12:12:06.496 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:12:06.509 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:12:06.510 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:12:06.513 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:12:06.514 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:12:06.518 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:12:06.521 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:12:52.189 +02:00 [WRN] Role 586bdec5-61df-4ca0-a857-f9268c892c51 validation failed: DuplicateRoleName.
2019-08-29 12:14:14.473 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:14:14.627 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:14:14.631 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:14:14.632 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:14:14.633 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:14:14.634 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:14:14.635 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:14:15.153 +02:00 [DBG] Starting grant removal
2019-08-29 12:14:18.279 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:14:18.309 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:14:18.324 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:14:18.369 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:14:18.430 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:14:18.444 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:14:18.447 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:15:11.385 +02:00 [WRN] Role f9d85b00-3201-4680-aeaf-c9baebc286b0 validation failed: DuplicateRoleName.
2019-08-29 12:16:15.424 +02:00 [WRN] Role 54d58913-1c20-473c-9e22-871e744e3f3c validation failed: DuplicateRoleName.
2019-08-29 12:19:40.761 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:19:40.861 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:19:40.863 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:19:40.864 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:19:40.865 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:19:40.866 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:19:40.867 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:19:41.333 +02:00 [DBG] Starting grant removal
2019-08-29 12:19:44.927 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:19:44.934 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:19:44.936 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:19:44.938 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:19:44.939 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:19:44.940 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:19:44.952 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:19:56.622 +02:00 [WRN] Role 1ce2d59a-29ac-45f7-aad5-5c655b2878c1 validation failed: DuplicateRoleName.
2019-08-29 12:20:06.661 +02:00 [WRN] Role 37459d4c-4a78-46ee-8f8b-44a8f8ebe63f validation failed: InvalidRoleName.
2019-08-29 12:22:11.243 +02:00 [WRN] Role bd3cf5d3-1d87-488c-96f0-a571e9aa8c8a validation failed: InvalidRoleName.
2019-08-29 12:33:33.679 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:33:33.775 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:33:33.777 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:33:33.778 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:33:33.779 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:33:33.780 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:33:33.782 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:33:34.076 +02:00 [DBG] Starting grant removal
2019-08-29 12:33:37.018 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:33:37.070 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:33:37.080 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:33:37.085 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:33:37.097 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:33:37.107 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:33:37.149 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:39:07.867 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 12:39:07.966 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 12:39:07.968 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 12:39:07.970 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 12:39:07.971 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 12:39:07.972 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 12:39:07.973 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 12:39:08.268 +02:00 [DBG] Starting grant removal
2019-08-29 12:39:10.904 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 12:39:10.916 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 12:39:10.918 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 12:39:10.920 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 12:39:10.921 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 12:39:10.929 +02:00 [DBG] Error Url: /home/error
2019-08-29 12:39:10.931 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 12:43:51.976 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Edit.cshtml(5,58): error CS1002: ; expected
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-29 12:46:52.313 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 148
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 126
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:159a2c97-9c6f-4eb7-8c59-341b2ecb685a
Error Number:18456,State:1,Class:14
2019-08-29 12:47:22.809 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 148
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 126
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:b6bad952-6655-4164-bb47-148bcbf99065
Error Number:18456,State:1,Class:14
2019-08-29 12:49:03.021 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 148
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 126
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:2dc56619-b31b-4e2b-81a5-a4307d484a57
Error Number:18456,State:1,Class:14
2019-08-29 12:50:00.398 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 148
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 126
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:570643df-dfc9-48ea-bba7-2f398de8c536
Error Number:18456,State:1,Class:14
2019-08-29 12:58:59.870 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 148
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 126
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:057af230-3bc5-4b71-8a80-0832bf9667a0
Error Number:18456,State:1,Class:14
2019-08-29 14:24:37.737 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 14:24:37.863 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 14:24:37.865 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 14:24:37.866 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 14:24:37.866 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 14:24:37.867 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 14:24:37.867 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 14:24:38.037 +02:00 [DBG] Starting grant removal
2019-08-29 14:24:39.892 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 14:24:39.906 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 14:24:39.910 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 14:24:39.916 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 14:24:39.920 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 14:24:39.922 +02:00 [DBG] Error Url: /home/error
2019-08-29 14:24:39.924 +02:00 [DBG] Error Id Parameter: errorId
2019-08-29 14:24:40.574 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-29 14:25:35.583 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-29 14:25:41.710 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-29 14:25:42.355 +02:00 [DBG] Augmenting SignInContext
2019-08-29 14:25:42.358 +02:00 [DBG] Adding amr claim with value: external
2019-08-29 14:25:42.368 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-29 14:25:42.379 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-29 14:31:26.125 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-29 14:33:01.527 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-29 14:37:38.389 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-29 14:38:06.874 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: Database operation expected to affect 1 row(s) but actually affected 0 row(s). Data may have been modified or deleted since entities were loaded. See http://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyException(Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithoutPropagationAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-08-29 14:39:37.340 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-29 14:39:37.437 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-29 14:39:37.439 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-29 14:39:37.440 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-29 14:39:37.441 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-29 14:39:37.442 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-29 14:39:37.443 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-29 14:39:37.773 +02:00 [DBG] Starting grant removal
2019-08-29 14:39:40.110 +02:00 [DBG] Login Url: /Account/Login
2019-08-29 14:39:40.116 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-29 14:39:40.119 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-29 14:39:40.129 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-29 14:39:40.130 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-29 14:39:40.133 +02:00 [DBG] Error Url: /home/error
2019-08-29 14:39:40.136 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 09:14:20.634 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 09:14:20.723 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 09:14:20.724 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 09:14:20.725 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 09:14:20.726 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 09:14:20.726 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 09:14:20.727 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 09:14:21.425 +02:00 [DBG] Starting grant removal
2019-08-30 09:14:23.923 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 09:14:23.927 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 09:14:23.932 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 09:14:23.933 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 09:14:23.934 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 09:14:23.935 +02:00 [DBG] Error Url: /home/error
2019-08-30 09:14:23.937 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 09:14:25.605 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-08-30 09:14:56.354 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-08-30 09:15:01.545 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-08-30 09:15:02.098 +02:00 [DBG] Augmenting SignInContext
2019-08-30 09:15:02.100 +02:00 [DBG] Adding amr claim with value: external
2019-08-30 09:15:02.112 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-08-30 09:15:02.122 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-08-30 09:26:44.036 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml(43,92): error CS0103: The name 'example' does not exist in the current context
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.OnCacheMiss(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 09:47:37.413 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash","InternalRequisitions"] as all scopes in database
2019-08-30 09:56:03.098 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 09:56:03.256 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 09:56:03.258 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 09:56:03.259 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 09:56:03.262 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 09:56:03.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 09:56:03.266 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 09:56:03.808 +02:00 [DBG] Starting grant removal
2019-08-30 09:56:05.804 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 09:56:05.837 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 09:56:05.856 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 09:56:05.868 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 09:56:05.878 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 09:56:05.881 +02:00 [DBG] Error Url: /home/error
2019-08-30 09:56:05.893 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 09:58:55.736 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 09:58:55.827 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 09:58:55.829 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 09:58:55.830 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 09:58:55.830 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 09:58:55.831 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 09:58:55.831 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 09:58:56.055 +02:00 [DBG] Starting grant removal
2019-08-30 09:58:57.854 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 09:58:57.860 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 09:58:57.869 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 09:58:57.870 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 09:58:57.872 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 09:58:57.873 +02:00 [DBG] Error Url: /home/error
2019-08-30 09:58:57.877 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 10:36:45.412 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 10:36:45.561 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 10:36:45.566 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 10:36:45.568 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 10:36:45.570 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 10:36:45.571 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 10:36:45.572 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 10:36:45.889 +02:00 [DBG] Starting grant removal
2019-08-30 10:36:48.670 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 10:36:48.677 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 10:36:48.683 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 10:36:48.687 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 10:36:48.689 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 10:36:48.693 +02:00 [DBG] Error Url: /home/error
2019-08-30 10:36:48.696 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 10:37:23.949 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__14_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 4
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 10:42:03.904 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__14_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 10:45:00.117 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__14_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 11:28:17.424 +02:00 [DBG] TaskCanceledException. Exiting.
2019-08-30 11:28:17.534 +02:00 [DBG] Stopping grant removal
2019-08-30 12:00:09.348 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 12:00:09.411 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 12:00:09.414 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 12:00:09.415 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 12:00:09.416 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 12:00:09.417 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 12:00:09.418 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 12:00:09.847 +02:00 [DBG] Starting grant removal
2019-08-30 12:00:12.254 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 12:00:12.260 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 12:00:12.266 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 12:00:12.269 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 12:00:12.270 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 12:00:12.275 +02:00 [DBG] Error Url: /home/error
2019-08-30 12:00:12.277 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 12:03:21.858 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__14_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 12:08:26.186 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 12:08:26.558 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 12:08:26.565 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 12:08:26.571 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 12:08:26.578 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 12:08:26.582 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 12:08:26.591 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 12:08:28.944 +02:00 [DBG] Starting grant removal
2019-08-30 12:08:31.826 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 12:08:31.838 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 12:08:31.842 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 12:08:31.852 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 12:08:31.855 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 12:08:31.860 +02:00 [DBG] Error Url: /home/error
2019-08-30 12:08:31.869 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 12:24:22.233 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 12:24:22.301 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 12:24:22.308 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 12:24:22.308 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 12:24:22.309 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 12:24:22.310 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 12:24:22.311 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 12:24:22.522 +02:00 [DBG] Starting grant removal
2019-08-30 12:24:24.054 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 12:24:24.059 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 12:24:24.064 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 12:24:24.068 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 12:24:24.073 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 12:24:24.076 +02:00 [DBG] Error Url: /home/error
2019-08-30 12:24:24.077 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 12:25:41.419 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 12:27:00.278 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 38
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 12:27:52.280 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 12:27:52.367 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 12:27:52.368 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 12:27:52.369 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 12:27:52.370 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 12:27:52.370 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 12:27:52.371 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 12:27:52.594 +02:00 [DBG] Starting grant removal
2019-08-30 12:27:55.166 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 12:27:55.171 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 12:27:55.178 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 12:27:55.180 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 12:27:55.181 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 12:27:55.183 +02:00 [DBG] Error Url: /home/error
2019-08-30 12:27:55.188 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 13:17:35.378 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 13:17:35.477 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 13:17:35.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 13:17:35.485 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 13:17:35.486 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 13:17:35.487 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 13:17:35.489 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 13:17:35.793 +02:00 [DBG] Starting grant removal
2019-08-30 13:17:37.939 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 13:17:37.951 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 13:17:37.953 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 13:17:37.957 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 13:17:37.958 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 13:17:37.961 +02:00 [DBG] Error Url: /home/error
2019-08-30 13:17:37.967 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 13:18:18.381 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 37
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 13:33:48.019 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 13:33:48.141 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 13:33:48.144 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 13:33:48.145 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 13:33:48.146 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 13:33:48.147 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 13:33:48.148 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 13:33:48.384 +02:00 [DBG] Starting grant removal
2019-08-30 13:33:50.091 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 13:33:50.096 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 13:33:50.103 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 13:33:50.106 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 13:33:50.108 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 13:33:50.111 +02:00 [DBG] Error Url: /home/error
2019-08-30 13:33:50.118 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 13:35:34.628 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 13:35:34.724 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 13:35:34.727 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 13:35:34.728 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 13:35:34.729 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 13:35:34.730 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 13:35:34.731 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 13:35:34.944 +02:00 [DBG] Starting grant removal
2019-08-30 13:35:36.557 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 13:35:36.567 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 13:35:36.570 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 13:35:36.572 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 13:35:36.583 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 13:35:36.588 +02:00 [DBG] Error Url: /home/error
2019-08-30 13:35:36.596 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 13:51:20.470 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-08-30 13:51:20.561 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-08-30 13:51:20.562 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-08-30 13:51:20.563 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-08-30 13:51:20.564 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-08-30 13:51:20.565 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-08-30 13:51:20.566 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-08-30 13:51:20.836 +02:00 [DBG] Starting grant removal
2019-08-30 13:51:22.776 +02:00 [DBG] Login Url: /Account/Login
2019-08-30 13:51:22.781 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-08-30 13:51:22.790 +02:00 [DBG] Logout Url: /Account/Logout
2019-08-30 13:51:22.793 +02:00 [DBG] ConsentUrl Url: /consent
2019-08-30 13:51:22.798 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-08-30 13:51:22.800 +02:00 [DBG] Error Url: /home/error
2019-08-30 13:51:22.804 +02:00 [DBG] Error Id Parameter: errorId
2019-08-30 13:51:38.505 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ExpressionMetadataProvider.FromLambdaExpression[TModel,TResult](Expression`1 expression, ViewDataDictionary`1 viewData, IModelMetadataProvider metadataProvider)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.GetModelExplorer[TResult](Expression`1 expression)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.HiddenFor[TResult](Expression`1 expression, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.Rendering.HtmlHelperInputExtensions.HiddenFor[TModel,TResult](IHtmlHelper`1 htmlHelper, Expression`1 expression)
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 39
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-08-30 13:53:09.484 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ExpressionMetadataProvider.FromLambdaExpression[TModel,TResult](Expression`1 expression, ViewDataDictionary`1 viewData, IModelMetadataProvider metadataProvider)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.GetModelExplorer[TResult](Expression`1 expression)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.HiddenFor[TResult](Expression`1 expression, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.Rendering.HtmlHelperInputExtensions.HiddenFor[TModel,TResult](IHtmlHelper`1 htmlHelper, Expression`1 expression)
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 39
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 08:46:08.344 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 08:46:08.455 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 08:46:08.456 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 08:46:08.457 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 08:46:08.458 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 08:46:08.459 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 08:46:08.459 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 08:46:09.463 +02:00 [DBG] Starting grant removal
2019-09-02 08:46:13.326 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 08:46:13.330 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 08:46:13.334 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 08:46:13.336 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 08:46:13.337 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 08:46:13.338 +02:00 [DBG] Error Url: /home/error
2019-09-02 08:46:13.340 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 08:46:16.616 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-09-02 08:46:24.565 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-09-02 08:46:29.798 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-09-02 08:46:31.223 +02:00 [DBG] Augmenting SignInContext
2019-09-02 08:46:31.231 +02:00 [DBG] Adding amr claim with value: external
2019-09-02 08:46:31.249 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-02 08:46:31.282 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-09-02 09:46:10.038 +02:00 [INF] Removing 0 grants
2019-09-02 10:46:10.601 +02:00 [INF] Removing 0 grants
2019-09-02 11:52:09.348 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 11:52:09.467 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 11:52:09.472 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 11:52:09.480 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 11:52:09.485 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 11:52:09.488 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 11:52:09.491 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 11:52:10.335 +02:00 [DBG] Starting grant removal
2019-09-02 11:52:14.142 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 11:52:14.164 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 11:52:14.172 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 11:52:14.177 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 11:52:14.180 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 11:52:14.185 +02:00 [DBG] Error Url: /home/error
2019-09-02 11:52:14.187 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 11:52:58.872 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 37
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:04:33.781 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 12:04:33.908 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 12:04:33.923 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 12:04:33.928 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 12:04:33.932 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 12:04:33.939 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 12:04:33.944 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 12:04:34.400 +02:00 [DBG] Starting grant removal
2019-09-02 12:04:37.015 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 12:04:37.038 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 12:04:37.058 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 12:04:37.071 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 12:04:37.082 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 12:04:37.096 +02:00 [DBG] Error Url: /home/error
2019-09-02 12:04:37.107 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 12:07:43.932 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at SecureTokenServer.Providers.ManageRoleVmFactory.CreateModel(String roleId) in D:\Projects\SecurityServer2\SecureTokenServer\Providers\ManageRoleVmFactory.cs:line 32
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 90
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:13:40.136 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 37
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:13:57.623 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__9_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 37
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:14:44.234 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot override the 'action' attribute for <form>. A <form> with a specified 'action' must not have attributes starting with 'asp-route-' or an 'asp-action', 'asp-controller', 'asp-fragment', 'asp-area', 'asp-route', 'asp-page' or 'asp-page-handler' attribute.
   at Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:15:03.081 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot override the 'action' attribute for <form>. A <form> with a specified 'action' must not have attributes starting with 'asp-route-' or an 'asp-action', 'asp-controller', 'asp-fragment', 'asp-area', 'asp-route', 'asp-page' or 'asp-page-handler' attribute.
   at Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:15:25.586 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot override the 'action' attribute for <form>. A <form> with a specified 'action' must not have attributes starting with 'asp-route-' or an 'asp-action', 'asp-controller', 'asp-fragment', 'asp-area', 'asp-route', 'asp-page' or 'asp-page-handler' attribute.
   at Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:15:34.187 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot override the 'action' attribute for <form>. A <form> with a specified 'action' must not have attributes starting with 'asp-route-' or an 'asp-action', 'asp-controller', 'asp-fragment', 'asp-area', 'asp-route', 'asp-page' or 'asp-page-handler' attribute.
   at Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:29:52.827 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 12:29:52.941 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 12:29:52.945 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 12:29:52.947 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 12:29:52.950 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 12:29:52.952 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 12:29:52.956 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 12:29:53.644 +02:00 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions'.
2019-09-02 12:29:53.656 +02:00 [DBG] Starting grant removal
2019-09-02 12:29:56.993 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 12:29:57.023 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 12:29:57.033 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 12:29:57.039 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 12:29:57.049 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 12:29:57.053 +02:00 [DBG] Error Url: /home/error
2019-09-02 12:29:57.059 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 12:44:46.138 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 12:44:46.259 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 12:44:46.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 12:44:46.268 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 12:44:46.270 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 12:44:46.272 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 12:44:46.275 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 12:44:46.636 +02:00 [DBG] Starting grant removal
2019-09-02 12:44:48.533 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 12:44:48.552 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 12:44:48.561 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 12:44:48.565 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 12:44:48.570 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 12:44:48.574 +02:00 [DBG] Error Url: /home/error
2019-09-02 12:44:48.578 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 12:44:56.552 +02:00 [DBG] Found ["openid","profile","email","TestApi","PettyCash","InternalRequisitions"] as all scopes in database
2019-09-02 12:52:11.765 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 12:52:11.888 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 12:52:11.890 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 12:52:11.895 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 12:52:11.898 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 12:52:11.902 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 12:52:11.905 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 12:52:12.288 +02:00 [DBG] Starting grant removal
2019-09-02 12:52:14.786 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 12:52:14.812 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 12:52:14.816 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 12:52:14.821 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 12:52:14.828 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 12:52:14.833 +02:00 [DBG] Error Url: /home/error
2019-09-02 12:52:14.837 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 12:52:34.072 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Templates can be used only with field access, property access, single-dimension array index, or single-parameter custom indexer expressions.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ExpressionMetadataProvider.FromLambdaExpression[TModel,TResult](Expression`1 expression, ViewDataDictionary`1 viewData, IModelMetadataProvider metadataProvider)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.GetModelExplorer[TResult](Expression`1 expression)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper`1.HiddenFor[TResult](Expression`1 expression, Object htmlAttributes)
   at Microsoft.AspNetCore.Mvc.Rendering.HtmlHelperInputExtensions.HiddenFor[TModel,TResult](IHtmlHelper`1 htmlHelper, Expression`1 expression)
   at AspNetCore.Views_Roles_Manage.<ExecuteAsync>b__15_0() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 39
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.GetChildContentAsync(Boolean useCachedResult, HtmlEncoder encoder)
   at Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Roles_Manage.ExecuteAsync() in D:\Projects\SecurityServer2\SecureTokenServer\Views\Roles\Manage.cshtml:line 17
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 12:54:53.253 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 12:54:53.371 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 12:54:53.377 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 12:54:53.379 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 12:54:53.382 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 12:54:53.385 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 12:54:53.387 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 12:54:53.723 +02:00 [DBG] Starting grant removal
2019-09-02 12:54:56.230 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 12:54:56.236 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 12:54:56.242 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 12:54:56.245 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 12:54:56.250 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 12:54:56.259 +02:00 [DBG] Error Url: /home/error
2019-09-02 12:54:56.263 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 13:26:23.228 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 13:26:23.428 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 13:26:23.444 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 13:26:23.456 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 13:26:23.465 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 13:26:23.468 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 13:26:23.475 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 13:26:24.027 +02:00 [DBG] Starting grant removal
2019-09-02 13:26:26.301 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 13:26:26.309 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 13:26:26.315 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 13:26:26.320 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 13:26:26.326 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 13:26:26.332 +02:00 [DBG] Error Url: /home/error
2019-09-02 13:26:26.338 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 13:31:14.908 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 13:31:15.075 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 13:31:15.079 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 13:31:15.081 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 13:31:15.083 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 13:31:15.085 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 13:31:15.090 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 13:31:15.450 +02:00 [DBG] Starting grant removal
2019-09-02 13:31:17.819 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 13:31:17.833 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 13:31:17.838 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 13:31:17.854 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 13:31:17.862 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 13:31:17.865 +02:00 [DBG] Error Url: /home/error
2019-09-02 13:31:17.872 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 13:34:33.169 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 13:34:33.354 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 13:34:33.364 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 13:34:33.366 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 13:34:33.368 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 13:34:33.376 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 13:34:33.378 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 13:34:33.848 +02:00 [DBG] Starting grant removal
2019-09-02 13:34:36.844 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 13:34:36.860 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 13:34:36.894 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 13:34:36.901 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 13:34:36.906 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 13:34:36.912 +02:00 [DBG] Error Url: /home/error
2019-09-02 13:34:36.916 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 13:37:32.254 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 13:37:32.383 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 13:37:32.386 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 13:37:32.388 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 13:37:32.391 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 13:37:32.393 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 13:37:32.397 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 13:37:32.709 +02:00 [DBG] Starting grant removal
2019-09-02 13:37:35.289 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 13:37:35.301 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 13:37:35.311 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 13:37:35.320 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 13:37:35.324 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 13:37:35.329 +02:00 [DBG] Error Url: /home/error
2019-09-02 13:37:35.334 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 14:37:32.803 +02:00 [INF] Removing 0 grants
2019-09-02 14:51:37.291 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 14:51:37.506 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 14:51:37.511 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 14:51:37.516 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 14:51:37.519 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 14:51:37.522 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 14:51:37.527 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 14:51:37.829 +02:00 [DBG] Starting grant removal
2019-09-02 14:51:40.236 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 14:51:40.249 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 14:51:40.259 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 14:51:40.262 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 14:51:40.275 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 14:51:40.280 +02:00 [DBG] Error Url: /home/error
2019-09-02 14:51:40.284 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 14:56:00.342 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 14:56:00.438 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 14:56:00.445 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 14:56:00.447 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 14:56:00.449 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 14:56:00.452 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 14:56:00.457 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 14:56:00.784 +02:00 [DBG] Starting grant removal
2019-09-02 14:56:02.792 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 14:56:02.803 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 14:56:02.812 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 14:56:02.816 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 14:56:02.828 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 14:56:02.833 +02:00 [DBG] Error Url: /home/error
2019-09-02 14:56:02.842 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 15:04:03.190 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 15:04:03.306 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 15:04:03.309 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 15:04:03.311 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 15:04:03.313 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 15:04:03.316 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 15:04:03.320 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 15:04:03.636 +02:00 [DBG] Starting grant removal
2019-09-02 15:04:05.912 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 15:04:05.920 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 15:04:05.928 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 15:04:05.934 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 15:04:05.938 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 15:04:05.945 +02:00 [DBG] Error Url: /home/error
2019-09-02 15:04:05.949 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 15:05:21.214 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 15:05:21.313 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 15:05:21.319 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 15:05:21.321 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 15:05:21.324 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 15:05:21.328 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 15:05:21.331 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 15:05:21.775 +02:00 [DBG] Starting grant removal
2019-09-02 15:05:23.512 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 15:05:23.526 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 15:05:23.533 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 15:05:23.541 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 15:05:23.544 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 15:05:23.556 +02:00 [DBG] Error Url: /home/error
2019-09-02 15:05:23.560 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 15:05:40.217 +02:00 [ERR] Failed executing DbCommand (1,206ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoleClaims] ([ClaimType], [ClaimValue], [RoleId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoleClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:de581bf6-2db7-4ee0-89f3-8d78e5b3793c
Error Number:515,State:2,Class:16
2019-09-02 15:05:41.425 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-09-02 15:05:54.260 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.SaveChanges(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.UpdateAsync(TRole role, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.UpdateRoleAsync(TRole role)
   at Microsoft.AspNetCore.Identity.RoleManager`1.AddClaimAsync(TRole role, Claim claim)
   at SecureTokenServer.Services.RolesService.AddClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 47
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 15:09:08.853 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 15:09:08.988 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 15:09:08.991 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 15:09:08.995 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 15:09:08.998 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 15:09:09.003 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 15:09:09.006 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 15:09:09.521 +02:00 [DBG] Starting grant removal
2019-09-02 15:09:12.386 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 15:09:12.397 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 15:09:12.412 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 15:09:12.418 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 15:09:12.435 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 15:09:12.451 +02:00 [DBG] Error Url: /home/error
2019-09-02 15:09:12.462 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 15:12:35.682 +02:00 [ERR] Failed executing DbCommand (491ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoleClaims] ([ClaimType], [ClaimValue], [RoleId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoleClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:a499f3ec-417d-4bc0-8af9-26dc5c20cd1d
Error Number:515,State:2,Class:16
2019-09-02 15:12:37.416 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-09-02 15:12:45.690 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.SaveChanges(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.UpdateAsync(TRole role, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.UpdateRoleAsync(TRole role)
   at Microsoft.AspNetCore.Identity.RoleManager`1.AddClaimAsync(TRole role, Claim claim)
   at SecureTokenServer.Services.RolesService.AddClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 47
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 15:21:23.379 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-02 15:21:23.497 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-02 15:21:23.499 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-02 15:21:23.501 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-02 15:21:23.502 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-02 15:21:23.504 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-02 15:21:23.505 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-02 15:21:23.856 +02:00 [DBG] Starting grant removal
2019-09-02 15:21:26.090 +02:00 [DBG] Login Url: /Account/Login
2019-09-02 15:21:26.118 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-02 15:21:26.125 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-02 15:21:26.129 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-02 15:21:26.133 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-02 15:21:26.136 +02:00 [DBG] Error Url: /home/error
2019-09-02 15:21:26.138 +02:00 [DBG] Error Id Parameter: errorId
2019-09-02 15:22:08.124 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: type
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at SecureTokenServer.Services.RolesService.DeleteClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 58
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 105
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 15:22:08.136 +02:00 [ERR] Failed executing DbCommand (2,983ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoleClaims] ([ClaimType], [ClaimValue], [RoleId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoleClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:2fd65ce6-9c14-42f9-854f-7e50adf8b8ed
Error Number:515,State:2,Class:16
2019-09-02 15:22:09.725 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-09-02 15:22:18.651 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.SaveChanges(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.UpdateAsync(TRole role, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.UpdateRoleAsync(TRole role)
   at Microsoft.AspNetCore.Identity.RoleManager`1.AddClaimAsync(TRole role, Claim claim)
   at SecureTokenServer.Services.RolesService.AddClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 47
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 15:25:07.557 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: type
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at SecureTokenServer.Services.RolesService.DeleteClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 58
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 105
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-02 15:25:25.884 +02:00 [ERR] Failed executing DbCommand (430ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoleClaims] ([ClaimType], [ClaimValue], [RoleId])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [AspNetRoleClaims]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
ClientConnectionId:2fd65ce6-9c14-42f9-854f-7e50adf8b8ed
Error Number:515,State:2,Class:16
2019-09-02 15:25:27.042 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'SecureTokenServer.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2019-09-02 15:25:35.168 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'SecurityServer.dbo.AspNetRoleClaims'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__122_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteAsync(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(DbContext _, ValueTuple`2 parameters, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IReadOnlyList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.SaveChanges(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.RoleStore`5.UpdateAsync(TRole role, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.RoleManager`1.UpdateRoleAsync(TRole role)
   at Microsoft.AspNetCore.Identity.RoleManager`1.AddClaimAsync(TRole role, Claim claim)
   at SecureTokenServer.Services.RolesService.AddClaim(IdentityRole identityRole, String claimType, String claimValue) in D:\Projects\SecurityServer2\SecureTokenServer\Services\RolesService.cs:line 47
   at SecureTokenServer.Controllers.RolesController.Manage(String roleId, String resourceName, String scopeName, Boolean assignClaim) in D:\Projects\SecurityServer2\SecureTokenServer\Controllers\RolesController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-24 11:59:12.609 +02:00 [FTL] Application startup exception
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext c, TState s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, Func`2 operation, Func`2 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.Execute[TState,TResult](IExecutionStrategy strategy, TState state, Func`2 operation)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists(Boolean retryOnNotExists)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at SecureTokenServer.Startup.InitializeDatabase(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 149
   at SecureTokenServer.Startup.Configure(IApplicationBuilder app) in D:\Projects\SecurityServer2\SecureTokenServer\Startup.cs:line 127
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2019-09-24 14:18:58.220 +02:00 [INF] Starting IdentityServer4 version 2.4.0.0
2019-09-24 14:18:58.810 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-24 14:18:58.874 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-24 14:18:58.875 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-24 14:18:58.876 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-24 14:18:58.876 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-24 14:18:58.876 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-24 14:19:00.693 +02:00 [DBG] Starting grant removal
2019-09-24 14:19:15.792 +02:00 [DBG] Login Url: /Account/Login
2019-09-24 14:19:15.800 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-24 14:19:15.804 +02:00 [DBG] Logout Url: /Account/Logout
2019-09-24 14:19:15.805 +02:00 [DBG] ConsentUrl Url: /consent
2019-09-24 14:19:15.806 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-24 14:19:15.807 +02:00 [DBG] Error Url: /home/error
2019-09-24 14:19:15.808 +02:00 [DBG] Error Id Parameter: errorId
2019-09-24 14:19:23.376 +02:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-09-24 14:19:41.353 +02:00 [INF] AuthenticationScheme: Microsoft was challenged.
2019-09-24 14:20:25.323 +02:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-09-24 14:20:26.357 +02:00 [DBG] Augmenting SignInContext
2019-09-24 14:20:26.358 +02:00 [DBG] Adding amr claim with value: external
2019-09-24 14:20:26.369 +02:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-24 14:20:26.377 +02:00 [INF] AuthenticationScheme: Identity.External signed out.
